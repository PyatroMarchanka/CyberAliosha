(this.webpackJsonpparter=this.webpackJsonpparter||[]).push([[0],{12:function(e,t,a){e.exports=a(20)},17:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(11),s=a.n(o);a(17),a(18);function i(){return n.a.createElement("header",{className:"App-header"},n.a.createElement("h1",null,'CyberAliosha\'s "Parter"'))}var d=a(1),c=a(2),h=a(5),l=a(4),C=a(3),u=a(6),m=a(7),A=["1","2","4","8","16"],F=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],D=a(9),G=[[["A","m",["A","C","E"],["A","B","C","D","E","F","G"]],["A","m7",["A","C","E","G"],["A","B","C","D","E","F","G"]],["A","m7",["A","C","E","G"],["A","B","C","D","E","F","G"]],["A","m7b5",["A","C","D#","G"],["A","A#","C","D","D#","F","G"]],["A","",["A","C#","E"],["A","B","C#","D","E","F#","G#"]],["A","7",["A","C#","E","G"],["A","B","C#","D","E","F#","G"]],["A","7",["A","C#","E","G"],["A","B","C#","D","E","F#","G"]],["A","maj",["A","C#","E","G#"],["A","B","C#","D","E","F#","G#"]],["A","maj",["A","C#","E","G#"],["A","B","C#","D","E","F#","G#"]],["A","dim7",["A","C","D#","F#"],["A#","C","D#","D","F#","G"]]],[["A#","m",["A#","C#","F"],["A#","C","C#","D#","F","F#","G#"]],["A#","m7",["A#","C#","F","G#"],["A#","C","C#","D#","F","F#","G#"]],["A#","m7",["A#","C#","F","G#"],["A#","C","C#","D#","F","F#","G#"]],["A#","m7b5",["A#","C#","E","G#"],["A#","B","C#","D#","E","F#","G#"]],["A#","",["A#","D","F"],["A#","C","D","D#","F","G","A"]],["A#","7",["A#","D","F","G#"],["A#","C","D","D#","F","G","G#"]],["A#","7",["A#","D","F","G#"],["A#","C","D","D#","F","G","G#"]],["A#","maj",["A#","D","F","A"],["A#","C","D","D#","F","G","A"]],["A#","maj",["A#","D","F","A"],["A#","C","D","D#","F","G","A"]],["A#","dim7",["A#","C#","E","G"],["B","C#","E","D#","G","G#"]]],[["B","m",["B","D","F#"],["B","C#","D","E","F#","G","A"]],["B","m7",["B","D","F#","A"],["B","C#","D","E","F#","G","A"]],["B","m7",["B","D","F#","A"],["B","C#","D","E","F#","G","A"]],["B","m7b5",["B","D","F","A"],["B","C","D","E","F","G","A"]],["B","",["B","D#","F#"],["B","C#","D#","E","F#","G#","A#"]],["B","7",["B","D#","F#","A"],["B","C#","D#","E","F#","G#","A"]],["B","7",["B","D#","F#","A"],["B","C#","D#","E","F#","G#","A"]],["B","maj",["B","D#","F#","A#"],["B","C#","D#","E","F#","G#","A#"]],["B","maj",["B","D#","F#","A#"],["B","C#","D#","E","F#","G#","A#"]],["B","dim7",["B","D","F","G#"],["C","D","F","E","G#","A"]]],[["C","m",["C","D#","G"],["C","D","D#","F","G","G#","A#"]],["C","m7",["C","D#","G","A#"],["C","D","D#","F","G","G#","A#"]],["C","m7",["C","D#","G","A#"],["C","D","D#","F","G","G#","A#"]],["C","m7b5",["C","D#","F#","A#"],["C","C#","D#","F","F#","G#","A#"]],["C","",["C","E","G"],["C","D","E","F","G","A","B"]],["C","7",["C","E","G","A#"],["C","D","E","F","G","A","A#"]],["C","7",["C","E","G","A#"],["C","D","E","F","G","A","A#"]],["C","maj",["C","E","G","B"],["C","D","E","F","G","A","B"]],["C","maj",["C","E","G","B"],["C","D","E","F","G","A","B"]],["C","dim7",["C","D#","F#","A"],["C#","D#","F#","F","A","A#"]]],[["C#","m",["C#","E","G#"],["C#","D#","E","F#","G#","A","B"]],["C#","m7",["C#","E","G#","B"],["C#","D#","E","F#","G#","A","B"]],["C#","m7",["C#","E","G#","B"],["C#","D#","E","F#","G#","A","B"]],["C#","m7b5",["C#","E","G","B"],["C#","D","E","F#","G","A","B"]],["C#","",["C#","F","G#"],["C#","D#","F","F#","G#","A#","C"]],["C#","7",["C#","F","G#","B"],["C#","D#","F","F#","G#","A#","B"]],["C#","7",["C#","F","G#","B"],["C#","D#","F","F#","G#","A#","B"]],["C#","maj",["C#","F","G#","C"],["C#","D#","F","F#","G#","A#","C"]],["C#","maj",["C#","F","G#","C"],["C#","D#","F","F#","G#","A#","C"]],["C#","dim7",["C#","E","G","A#"],["D","E","G","F#","A#","B"]]],[["D","m",["D","F","A"],["D","E","F","G","A","A#","C"]],["D","m7",["D","F","A","C"],["D","E","F","G","A","A#","C"]],["D","m7",["D","F","A","C"],["D","E","F","G","A","A#","C"]],["D","m7b5",["D","F","G#","C"],["D","D#","F","G","G#","A#","C"]],["D","",["D","F#","A"],["D","E","F#","G","A","B","C#"]],["D","7",["D","F#","A","C"],["D","E","F#","G","A","B","C"]],["D","7",["D","F#","A","C"],["D","E","F#","G","A","B","C"]],["D","maj",["D","F#","A","C#"],["D","E","F#","G","A","B","C#"]],["D","maj",["D","F#","A","C#"],["D","E","F#","G","A","B","C#"]],["D","dim7",["D","F","G#","B"],["D#","F","G#","G","B","C"]]],[["D#","m",["D#","F#","A#"],["D#","F","F#","G#","A#","B","C#"]],["D#","m7",["D#","F#","A#","C#"],["D#","F","F#","G#","A#","B","C#"]],["D#","m7",["D#","F#","A#","C#"],["D#","F","F#","G#","A#","B","C#"]],["D#","m7b5",["D#","F#","A","C#"],["D#","E","F#","G#","A","B","C#"]],["D#","",["D#","G","A#"],["D#","F","G","G#","A#","C","D"]],["D#","7",["D#","G","A#","C#"],["D#","F","G","G#","A#","C","C#"]],["D#","7",["D#","G","A#","C#"],["D#","F","G","G#","A#","C","C#"]],["D#","maj",["D#","G","A#","D"],["D#","F","G","G#","A#","C","D"]],["D#","maj",["D#","G","A#","D"],["D#","F","G","G#","A#","C","D"]],["D#","dim7",["D#","F#","A","C"],["E","F#","A","G#","C","C#"]]],[["E","m",["E","G","B"],["E","F#","G","A","B","C","D"]],["E","m7",["E","G","B","D"],["E","F#","G","A","B","C","D"]],["E","m7",["E","G","B","D"],["E","F#","G","A","B","C","D"]],["E","m7b5",["E","G","A#","D"],["E","F","G","A","A#","C","D"]],["E","",["E","G#","B"],["E","F#","G#","A","B","C#","D#"]],["E","7",["E","G#","B","D"],["E","F#","G#","A","B","C#","D"]],["E","7",["E","G#","B","D"],["E","F#","G#","A","B","C#","D"]],["E","maj",["E","G#","B","D#"],["E","F#","G#","A","B","C#","D#"]],["E","maj",["E","G#","B","D#"],["E","F#","G#","A","B","C#","D#"]],["E","dim7",["E","G","A#","C#"],["F","G","A#","A","C#","D"]]],[["F","m",["F","G#","C"],["F","G","G#","A#","C","C#","D#"]],["F","m7",["F","G#","C","D#"],["F","G","G#","A#","C","C#","D#"]],["F","m7",["F","G#","C","D#"],["F","G","G#","A#","C","C#","D#"]],["F","m7b5",["F","G#","B","D#"],["F","F#","G#","A#","B","C#","D#"]],["F","",["F","A","C"],["F","G","A","A#","C","D","E"]],["F","7",["F","A","C","D#"],["F","G","A","A#","C","D","D#"]],["F","7",["F","A","C","D#"],["F","G","A","A#","C","D","D#"]],["F","maj",["F","A","C","E"],["F","G","A","A#","C","D","E"]],["F","maj",["F","A","C","E"],["F","G","A","A#","C","D","E"]],["F","dim7",["F","G#","B","D"],["F#","G#","B","A#","D","D#"]]],[["F#","m",["F#","A","C#"],["F#","G#","A","B","C#","D","E"]],["F#","m7",["F#","A","C#","E"],["F#","G#","A","B","C#","D","E"]],["F#","m7",["F#","A","C#","E"],["F#","G#","A","B","C#","D","E"]],["F#","m7b5",["F#","A","C","E"],["F#","G","A","B","C","D","E"]],["F#","",["F#","A#","C#"],["F#","G#","A#","B","C#","D#","F"]],["F#","7",["F#","A#","C#","E"],["F#","G#","A#","B","C#","D#","E"]],["F#","7",["F#","A#","C#","E"],["F#","G#","A#","B","C#","D#","E"]],["F#","maj",["F#","A#","C#","F"],["F#","G#","A#","B","C#","D#","F"]],["F#","maj",["F#","A#","C#","F"],["F#","G#","A#","B","C#","D#","F"]],["F#","dim7",["F#","A","C","D#"],["G","A","C","B","D#","E"]]],[["G","m",["G","A#","D"],["G","A","A#","C","D","D#","F"]],["G","m7",["G","A#","D","F"],["G","A","A#","C","D","D#","F"]],["G","m7",["G","A#","D","F"],["G","A","A#","C","D","D#","F"]],["G","m7b5",["G","A#","C#","F"],["G","G#","A#","C","C#","D#","F"]],["G","",["G","B","D"],["G","A","B","C","D","E","F#"]],["G","7",["G","B","D","F"],["G","A","B","C","D","E","F"]],["G","7",["G","B","D","F"],["G","A","B","C","D","E","F"]],["G","maj",["G","B","D","F#"],["G","A","B","C","D","E","F#"]],["G","maj",["G","B","D","F#"],["G","A","B","C","D","E","F#"]],["G","dim7",["G","A#","C#","E"],["G#","A#","C#","C","E","F"]]],[["G#","m",["G#","B","D#"],["G#","A#","B","C#","D#","E","F#"]],["G#","m7",["G#","B","D#","F#"],["G#","A#","B","C#","D#","E","F#"]],["G#","m7",["G#","B","D#","F#"],["G#","A#","B","C#","D#","E","F#"]],["G#","m7b5",["G#","B","D","F#"],["G#","A","B","C#","D","E","F#"]],["G#","",["G#","C","D#"],["G#","A#","C","C#","D#","F","G"]],["G#","7",["G#","C","D#","F#"],["G#","A#","C","C#","D#","F","F#"]],["G#","7",["G#","C","D#","F#"],["G#","A#","C","C#","D#","F","F#"]],["G#","maj",["G#","C","D#","G"],["G#","A#","C","C#","D#","F","G"]],["G#","maj",["G#","C","D#","G"],["G#","A#","C","C#","D#","F","G"]],["G#","dim7",["G#","B","D","F"],["A","B","D","C#","F","F#"]]]];function f(e,t){return Math.floor(Math.random()*(t-e))+e}function p(e,t,a){return G.find((function(a){return a[0][0]===B(e,t,F)})).find((function(e){return e[1]===a}))}var E=new D.PolySynth(5,D.AMSynth).toMaster();function b(e){var t,a;return"#"===e[1]?(t=e.slice(0,2),a=e.slice(2)):(t=e.slice(0,1),a=e.slice(1)),[t,a]}function v(e,t){for(var a={often:[2,4,8,8,8,16,16,16],middle:[2,4,4,4,4,8,8,8],seldom:[1,1,2,2,2,4],veryOften:[8,16],verySeldom:[1,2],whole:[1],half:[2],quarter:[4],eight:[8],sixteen:[16]},r=[],n=0;n<1;){var o=1/a[e][f(0,a[e].length)];r.push(o),n+=o}return r[r.length-1]=r[r.length-1]-(n-1),r}function B(e,t,a){var r=a.indexOf(e);return t<0&&(t=a.length-t),a[(r+t)%a.length]}function g(e){return n.a.createElement("button",{id:e.id,key:e.id,className:"btn btn-outline-dark",onClick:function(t){e.handleClick(t),function(e){var t=b(e),a=p(t[0],0,t[1])[2],r=!0,n=!1,o=void 0;try{for(var s,i=a[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var d=s.value;E.triggerAttackRelease(d+"4",1)}}catch(c){n=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}(e.chordName)}},e.chordName)}function k(e){return n.a.createElement("button",{className:"".concat(e.class," btn-outline-dark"),onClick:e.handleClick},e.text)}function j(e){return n.a.createElement("div",{className:"chord-menu"},n.a.createElement(k,{class:"btn",handleClick:e.deleteChord,text:"Delete chord"}),n.a.createElement(k,{class:"btn",handleClick:e.replaceChord,text:"Replace chord"}),n.a.createElement(k,{class:"btn",handleClick:e.deselectChord,text:"Cancel"}))}var y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"showMenu",value:function(){var e=this;return this.props.isSelection&&n.a.createElement(j,{deleteChord:function(){return e.props.deleteChord(e.props.selectedChord)},replaceChord:this.props.replaceChord,deselectChord:this.props.deselectChord})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"added-chords text-white"},n.a.createElement("h3",{className:"App-chord-editor text-white"},"Added Chords"),this.showMenu(),this.props.chords.length>0?n.a.createElement("div",{className:"grid-col-4"},this.props.chords.map((function(t,a){return n.a.createElement(g,{id:a+"-added-chord",key:a+"-added-chord",chordName:t,handleClick:e.props.selectChord})}))):"Chords have not been added!")}}]),t}(r.Component),O=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App-chord-editor "},n.a.createElement("h3",null,"Chord Adder"),n.a.createElement("div",{className:"grid-col-4"},this.props.chords?this.props.chords.map((function(t,a){return n.a.createElement(g,{key:a+"-chord-to-add",id:a+"-chord-to-add",chordName:t[0]+t[1],handleClick:e.props.handleClick})})):null))}}]),t}(r.Component);function w(e){if(e){var t;if("dim7"===e[1]){switch(f(1,5)){case 1:t=p(e[0],1,"maj");break;case 2:t=p(e[0],4,"m7");break;case 3:t=p(e[0],7,"maj");break;case 4:t=p(e[0],10,"m")}return t}if("7"===e[1])return t=p(e[0],5,Math.random()>.5?"m7":"maj");if("m7b5"===e[1]){switch(f(1,8)){case 1:t=p(e[0],5,"7");break;case 2:t=p(e[0],9,"dim7")}return t=p(e[0],5,"7")}if("m"===e[1]||"m7"===e[1]||"mAdd9"===e[1]){switch(f(1,5)){case 1:t=p(e[0],3,"maj");break;case 2:t=p(e[0],5,"m7");break;case 3:t=p(e[0],7,"7");break;case 4:t=p(e[0],8,"maj")}return t}if(""===e[1]||"maj"===e[1]){switch(f(1,10)){case 1:t=p(e[0],2,"m");break;case 2:t=p(e[0],4,"m7");break;case 3:t=p(e[0],5,"maj");break;case 4:t=p(e[0],7,"7");break;case 5:t=p(e[0],9,"m7");break;case 6:t=p(e[0],11,"m7b5");break;case 7:t=p(e[0],2,"7");break;case 8:t=p(e[0],11,"m7");break;case 9:t=p(e[0],7,"maj")}return t}return t}}var S=function(){function e(){Object(d.a)(this,e),this.chords=[]}return Object(c.a)(e,[{key:"generateChords",value:function(e,t){for(var a=[],r=0;r<t;r++){var n=w(a[r-1]);if(n)a.push(n);else{var o=e[f(0,e.length)],s=o[f(0,o.length)];a.push(s)}}return a.slice(0,t)}},{key:"getNewChords",value:function(e){return this.generateChords(G,e)}},{key:"getChords",value:function(){return this.chords}}]),e}(),N=function(){function e(){Object(d.a)(this,e)}return Object(c.a)(e,[{key:"searchItems",value:function(e){if(e){if("dim7"===(e=b(e))[1])return P(e,[0,"dim7"],[1,"maj"],[4,"m7"],[7,"maj"],[10,"m"]);if("7"===e[1])return P(e,[0,"7"],[5,"m7"],[5,"m"],[5,""],[5,"maj"],[2,"m"],[2,"m7"]);if("m7b5"===e[1])return P(e,[0,"m7b5"],[10,"m"],[10,"m7"],[5,"7"],[9,"dim7"]);if("m"===e[1]||"m7"===e[1]||"mAdd9"===e[1])return P(e,[0,"m"],[0,"m7"],[2,"7"],[3,"maj"],[5,"m7"],[7,"7"],[7,"m7"],[8,"maj"],[10,"maj"]);if(""===e[1]||"maj"===e[1])return P(e,[0,""],[0,"maj"],[2,"m"],[4,""],[4,"7"],[4,"m7"],[5,"maj"],[7,"7"],[9,"m7"],[11,"m7b5"],[2,"7"],[11,"m7"],[7,"maj"]);if(!(void 0).length)throw new Error("Unknown chord ".concat(e[0]+e[1]))}}}]),e}();function P(e){for(var t=[],a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return r.forEach((function(a){t.push(p(e[0],a[0],a[1]))})),t}var R=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).chordsCreator=new S,a.chordSearcher=new N,a.addChord=a.addChord.bind(Object(C.a)(a)),a.deleteChord=a.deleteChord.bind(Object(C.a)(a)),a.replaceChord=a.replaceChord.bind(Object(C.a)(a)),a.setUpForReplace=a.setUpForReplace.bind(Object(C.a)(a)),a.selectChord=a.selectChord.bind(Object(C.a)(a)),a.deselectChord=a.deselectChord.bind(Object(C.a)(a)),a.liftUpChords=a.liftUpChords.bind(Object(C.a)(a)),a.proposeChordsForLast=a.proposeChordsForLast.bind(Object(C.a)(a)),a.getRandomChords=a.getRandomChords.bind(Object(C.a)(a)),a.toggleAddedChordsLabel=a.toggleAddedChordsLabel.bind(Object(C.a)(a)),a.state={chordsToAdd:a.chordSearcher.searchItems("C"),addedChords:[],isForReplace:!1,isSelection:!1,selectedChord:null,addedChordsLabel:"Click 'Set these chords' to set"},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"liftUpChords",value:function(){this.state.addedChords.length<1?this.toggleAddedChordsLabel(2):(this.props.setChords(this.state.addedChords,!0),this.toggleAddedChordsLabel(1))}},{key:"toggleAddedChordsLabel",value:function(e){this.setState({addedChordsLabel:{0:"Click 'Set these chords' to set",1:"Chords have been added!",2:"Chords have not been added!"}[e]})}},{key:"selectChord",value:function(e){this.setState({isSelection:!0,selectedChord:e.target})}},{key:"deselectChord",value:function(){this.setState({isSelection:!1,isForReplace:!1,selectedChord:null}),this.proposeChordsForLast()}},{key:"addChord",value:function(e){var t=Object(m.a)(this.state.addedChords);this.setState({chordsToAdd:this.chordSearcher.searchItems(e.target.innerText),addedChords:[].concat(Object(m.a)(t),[e.target.innerText])})}},{key:"deleteChord",value:function(e){var t=+e.id[0],a=Object(m.a)(this.state.addedChords);a.splice(t,1),this.setState({addedChords:a})}},{key:"proposeChordsForLast",value:function(){var e=this.state.addedChords[this.state.addedChords.length-1];console.log(e),this.setState({chordsToAdd:this.chordSearcher.searchItems(e)})}},{key:"setUpForReplace",value:function(){var e=+this.state.selectedChord.id[0],t=0===e?0:e-1;this.setState({chordsToAdd:this.chordSearcher.searchItems(this.state.addedChords[t]),isForReplace:!0})}},{key:"replaceChord",value:function(e){var t=+this.state.selectedChord.id[0],a=Object(m.a)(this.state.addedChords);a.splice(t,1,e.target.innerText),this.setState({addedChords:a,isForReplace:!1})}},{key:"getRandomChords",value:function(){var e=this.chordsCreator.getNewChords(8);console.log(e),this.setState({addedChords:e.map((function(e){return e[0]+e[1]}))})}},{key:"render",value:function(){return n.a.createElement("div",{className:"text-white"},n.a.createElement(y,{chords:this.state.addedChords,selectedChord:this.state.selectedChord,selectChord:this.selectChord,isSelection:this.state.isSelection,deleteChord:this.deleteChord,replaceChord:this.setUpForReplace,deselectChord:this.deselectChord}),n.a.createElement(O,{chords:this.state.chordsToAdd,handleClick:this.state.isForReplace?this.replaceChord:this.addChord}),n.a.createElement(k,{handleClick:this.getRandomChords,text:"Set random chords",class:"btn btn-big mb-20"}),n.a.createElement("div",null,n.a.createElement(k,{handleClick:this.liftUpChords,text:"Set these chords",class:"btn btn-big mb-20"})),this.state.addedChordsLabel)}}]),t}(r.Component);function x(e){var t=e.name,a=e.id,r=e.options,o=e.handleChange;return n.a.createElement("select",{name:t,key:a,id:a,onChange:o,className:"selector mb-20"},r.map((function(e,a){return n.a.createElement("option",{key:a,value:e[0]},"".concat(t,": ").concat(e[1]))})))}var M=function(){function e(){Object(d.a)(this,e)}return Object(c.a)(e,[{key:"getPattern",value:function(e,t){var a=v(e),r=[];return a.forEach((function(e,n){console.log(n),0===n&&"bass"===t?(console.log("bass 0 note tonic"),r.push({chordPitch:0,dur:e})):"bass"===t&&1===n&&a[0]<.25?(console.log("bass 1 note tonic"),r.push({chordPitch:0,dur:e})):(console.log("not the bass"),r.push({chordPitch:f(0,3),dur:e}))})),console.log(r),console.log(r.reduce((function(e,t){return e+t.dur}),0)),r}}]),e}(),L=function(){function e(t,a){Object(d.a)(this,e),this.type=a,this.notesLengthMode=t,this.toneJsArr=[]}return Object(c.a)(e,[{key:"getRandomBar",value:function(e,t,a){return this.toneJsArr=this.createRandomBar(e,a),this.createOctave(t),this.toneJsArr}},{key:"createRandomBar",value:function(e,t){var a=[];if(t)return t.map((function(t){a.push({note:e[2][t.chordPitch],dur:t.dur})})),a;for(var r=v(this.notesLengthMode),n=0;n<r.length;n++){var o=this.createRandomNote(e[2],r[n]);a.push(o)}return a}},{key:"createOctave",value:function(e){"soprano"===this.type&&(this.toneJsArr=this.toneJsArr.map((function(t){return t.note=t.note+(e%5===0?"4":e%9===0?"6":"5"),t}))),"bass"===this.type&&(this.toneJsArr=this.toneJsArr.map((function(t){return t.note=t.note+(e%6===0?"1":"2"),t}))),"tenor"===this.type&&(this.toneJsArr=this.toneJsArr.map((function(t){return t.note=t.note+(e%6===0?"3":"4"),t})))}},{key:"createRandomNote",value:function(e,t,a){var r=f(0,e.length);return{note:a||e[r],dur:t||1/+A[f(1,A.length)]}}}]),e}(),I=function(){function e(t,a,r,n,o){Object(d.a)(this,e),this.pattern="accompaniment"===o&&(new M).getPattern(r,n),console.log(this.pattern),this.chords=t,this.barCreator=new L(r,n),this.squaresCountToAdd=a,this.notes=[],this.onInit()}return Object(c.a)(e,[{key:"onInit",value:function(){this.createRandomPart()}},{key:"createRandomPart",value:function(){for(var e=0;e<this.squaresCountToAdd;e++)for(var t in this.chords){var a=this.barCreator.getRandomBar(this.chords[t],t,this.pattern);this.notes=[].concat(Object(m.a)(this.notes),Object(m.a)(a))}}}]),e}(),T=function(){function e(t,a){Object(d.a)(this,e),this.chords=t,console.log("this.chords ",this.chords),this.parts=[],this.squaresCount=a}return Object(c.a)(e,[{key:"addPart",value:function(e){console.log(e);var t=new I(this.chords,this.squaresCount,e.notes,e.type,e.pattern).notes;this.parts.push(t),console.log(this.parts)}},{key:"getParts",value:function(){return this.parts}}]),e}(),U=a(8),J=a.n(U),q=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(d.a)(this,e),this.chords=t||new S(a),this.partsFabric=new T(t||this.chords.getChords(),r),this.file=new J.a.File,this.parts=[],this.tempo=f(80,130)}return Object(c.a)(e,[{key:"addPart",value:function(e){this.partsFabric.addPart(e)}},{key:"createMidiFile",value:function(){this.file=new J.a.File}},{key:"addAllPartsInFile",value:function(){var e=this;this.partsFabric.getParts().forEach((function(t){return e.addPartInFIle(t)}))}},{key:"addPartInFIle",value:function(e){var t=new J.a.Track;t.instrument(0,30),t.setTempo(this.tempo);var a=!0,r=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var i=o.value;t.addNote(0,i.note,512*i.dur)}}catch(d){r=!0,n=d}finally{try{a||null==s.return||s.return()}finally{if(r)throw n}}this.file.addTrack(t)}},{key:"getURI",value:function(){return"data:audio/mid;base64,"+btoa(this.file.toBytes())}}]),e}(),H=function(){function e(){Object(d.a)(this,e),this.userChords=null,this.midiCreator=null,this.partOptions={type:"soprano",notesLength:"often",function:"solo"}}return Object(c.a)(e,[{key:"createNewFile",value:function(e){this.midiCreator=new q(e)}},{key:"generateMidi",value:function(){this.midiCreator.addAllPartsInFile()}},{key:"addNewPart",value:function(){this.midiCreator.addPart(this.partOptions)}},{key:"getURI",value:function(){return this.midiCreator.getURI()}}]),e}(),W=[["soprano","Soprano"],["tenor","Tenor"],["bass","Bass"]],_=[["solo","Solo"],["accompaniment","Accompaniment"]],V=[["often","Often notes"],["middle","Middle notes"],["seldom","Seldom notes"],["veryOften","Very often notes"],["verySeldom","Very seldom notes"],["whole","Whole notes"],["half","Half notes"],["quarter","Quarter notes"],["eight","Eight notes"],["sixteen","Sixteen notes"]];function Q(e){var t=e.partOptions;return n.a.createElement("div",{className:"added-parts__part text-white"},"Added part: Type: ".concat(t.type,", Function: ").concat(t.function,", Notes: ").concat(t.notes))}function $(e){var t=e.partOptionsArr;return n.a.createElement("div",{className:"part-editor__added-parts mb-20 mt-20"},t.map((function(e,t){return n.a.createElement(Q,{key:t,partOptions:e})})))}var z=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).state={partOptions:{type:"soprano",function:"solo",notes:"often"},fileLink:null,addedPartsHeaders:[]},a.fileEditor=new H,a.isFile=!1,a.types=W,a.function=_,a.notes=V,a.handleSelectorsChange=a.handleSelectorsChange.bind(Object(C.a)(a)),a.addPart=a.addPart.bind(Object(C.a)(a)),a.generateMidi=a.generateMidi.bind(Object(C.a)(a)),a.createNewFile=a.createNewFile.bind(Object(C.a)(a)),a.fileDidDownloaded=a.fileDidDownloaded.bind(Object(C.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleSelectorsChange",value:function(e){var t=JSON.parse(JSON.stringify(this.state.partOptions));t[e.target.name]=e.target.value,this.setState({partOptions:t})}},{key:"createNewFile",value:function(){var e=this.props.chords.map((function(e){return b(e)})).map((function(e){return p(e[0],0,e[1])}));console.log(e),this.fileEditor.createNewFile(e)}},{key:"addPart",value:function(){this.fileEditor.midiCreator||this.createNewFile(),this.fileEditor.partOptions=this.state.partOptions,console.log(this.fileEditor.partOptions),this.fileEditor.addNewPart();var e=this.state.partOptions;this.setState({addedPartsHeaders:[].concat(Object(m.a)(this.state.addedPartsHeaders),[e])})}},{key:"fileDidDownloaded",value:function(){this.props.setChords(null,!1),this.setState({fileLink:null,addedPartsHeaders:[]})}},{key:"generateMidi",value:function(){null!==this.fileEditor.midiCreator?null===this.state.fileLink?(this.fileEditor.generateMidi(),this.setState({fileLink:n.a.createElement("a",{href:this.fileEditor.getURI()},n.a.createElement(k,{class:"btn btn-big",handleClick:this.fileDidDownloaded,text:"Download file"}))}),this.createNewFile()):console.log("file already generated!"):console.log("add a part !")}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return n.a.createElement("div",{className:"App-chord-editor"},n.a.createElement("h3",null,"Part Editor"),n.a.createElement(x,{name:"type",id:"part-type",options:this.types,handleChange:this.handleSelectorsChange}),n.a.createElement(x,{name:"function",id:"part-function",options:this.function,handleChange:this.handleSelectorsChange}),n.a.createElement(x,{name:"notes",id:"part-notes",options:this.notes,handleChange:this.handleSelectorsChange}),n.a.createElement(k,{class:"btn btn-big",handleClick:this.addPart,text:"Add a part in file"}),n.a.createElement($,{partOptionsArr:this.state.addedPartsHeaders}),n.a.createElement(k,{class:"btn btn-big mb-20",handleClick:this.generateMidi,text:"Generate file"}),this.state.fileLink)}}]),t}(r.Component),K=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).chords=[],a.state={chordsToAdd:a.chords,isChordsSet:!1},a.setChords=a.setChords.bind(Object(C.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setChords",value:function(e,t){this.setState({chordsToAdd:e,isChordsSet:t})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"main-window"},n.a.createElement(R,{setChords:this.setChords,chords:this.chords}),this.state.isChordsSet?n.a.createElement(z,{setChords:this.setChords,chords:this.state.chordsToAdd}):null))}}]),t}(r.Component);function X(){return n.a.createElement("footer",{className:"App-footer text-white mb-20"},n.a.createElement("span",null,"Petr Marchanka ",n.a.createElement("a",{href:"https://www.facebook.com/piatro.marchanka"},"FaceBook")," ",n.a.createElement("a",{href:"https://github.com/PyatroMarchanka"},"Github")," 2020"))}var Y=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",null,n.a.createElement(i,null),n.a.createElement(K,null),n.a.createElement(X,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[12,1,2]]]);
//# sourceMappingURL=main.d306f14d.chunk.js.map