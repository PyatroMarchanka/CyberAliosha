{"version":3,"sources":["styled/fonts/HelveticaComp.ttf","styled/fonts/index.tsx","pages/routes.ts","utils/theme.ts","components/global/AlioshaLink.tsx","components/Header/Logo.tsx","components/Header/Navigation.tsx","components/global/SimpleMenu.tsx","dataset/all_chords_for_impro.ts","styled/global.tsx","components/global/Icon.tsx","localStorageUtils/storagesController.ts","localStorageUtils/settingsStorage.ts","context/SettingsProvider.tsx","components/Settings/SettingsModal.tsx","components/Settings/index.tsx","components/Header/Header.tsx","pages/AboutPage.tsx","components/global/Button.tsx","hooks/useLongPress.ts","components/global/HeroSection.tsx","pages/MainPage.tsx","dataset/all_chords.ts","dataset/dataset.js","utils/chordsUtils.ts","musicBrain/releaserUtils.ts","musicBrain/MidiChordsCreator.ts","styled/utils.ts","musicViews/VexFlowController.ts","pages/Melodies/SheetStave.tsx","styled/Chords.tsx","components/global/ChordsProgression.tsx","components/global/PageTitle.tsx","components/global/SaveModal.tsx","pages/Melodies/SaveMelodiesModal.tsx","localStorageUtils/melodiesStorage.ts","components/global/Checkbox.tsx","components/global/PlayStopButton.tsx","utils/MidiPlayer.ts","utils/useMidiPlayer.tsx","hooks/usePlayMelodyAndChords.tsx","components/Text/TextSplitter.tsx","utils/text/syllabifyRuFork.js","utils/text/textUtils.ts","musicBrain/BarCreator.ts","musicBrain/LyricPartCreator.ts","musicBrain/MotiveCreator.ts","musicBrain/PatternCreator.ts","musicBrain/PartCreator.ts","musicBrain/PartsFabric.ts","musicBrain/melodyUtils.ts","pages/Melodies/MelodiesPage.tsx","components/Footer/Footer.tsx","components/global/Tabs.tsx","components/global/Modal.tsx","musicViews/vexchordsFork/builder.ts","pages/Melodies/Melody.tsx","hooks/useColorChords.ts","musicViews/vexchordsFork/chordbox.ts","musicViews/VexChordsController.ts","components/Chords/ChordCharts.tsx","pages/Chords/SavedChordsLine.tsx","pages/SavedPage.tsx","localStorageUtils/addedChordsStorage.ts","context/ChordsAdderContext.tsx","components/Chords/ChordWithEditModal.tsx","components/Chords/SaveChordsModal.tsx","components/global/CheckboxIcon.tsx","components/Chords/GuitarModeSwitcher.tsx","components/Chords/Actions.tsx","components/Chords/AddedChordsNew.tsx","components/Chords/ChordsTitledLine.tsx","components/Chords/KeySelector.tsx","components/Chords/ChordsToAdd.tsx","pages/Chords/ChordEditorPage.tsx","pages/rootRouter.tsx","App.tsx","hooks/useSettings.tsx","serviceWorker.js","index.js"],"names":["createGlobalStyle","HelveticaComp","routes","theme","fonts","primary","colors","grey50","bluePurple","white","black","red","a100","a200","a400","a700","pink","purple","deeppurple","indigo","blue","lightblue","cyan","teal","green","lightgreen","lime","yellow","amber","orange","deeporange","brown","grey","bluegrey","breakpoints","belowMobileS","belowMobileM","belowMobileL","belowMobile","belowTablet","belowTabletM","belowLaptopL","AlioshaLink","styled","className","to","children","onClick","undefined","Logo","Container","Line","div","Navigation","Button","SimpleMenu","items","target","React","useState","anchorEl","setAnchorEl","handleClose","aria-controls","aria-haspopup","event","currentTarget","id","keepMounted","open","Boolean","onClose","map","item","idx","link","MenuItem","title","MajorChords","MinorChords","UnstableChords","SolidNotes","DotNotes","NotesLengthType","NotesPatterns","ChordsMode","borders","css","MetalBlock","Mobile","display","Desktop","Icon","type","fill","disabled","getClassName","fontSize","style","color","role","focusable","aria-hidden","xmlns","viewBox","d","height","version","width","x","y","enableBackground","allNotes","StorageNames","getChordsModeLabel","mode","SingleTonality","JazzChords","getNotesTypeLabel","Often","Middle","VeryOften","VerySeldom","Whole","Half","Quarter","Eight","Sixteen","Seldom","Lyric","getNotesPatternLabel","None","Riff","Motive","saveItem","storage","previousItems","localStorage","getItem","currentItems","Math","random","toString","data","JSON","stringify","Date","toLocaleDateString","updatedItems","parse","push","setItem","removeItemById","saved","filteredItems","filter","getStorage","progression","initialSettings","bpm","notesLength","notesPattern","playAccompanimentWithMelody","chordsGuitarMode","chordsToGenerateCount","notesCountToPlayForChord","chordsMode","getSettings","Settings","saveSettings","settings","oldSettings","initialState","settingsStore","createContext","state","dispatch","Provider","SettingsProvider","useReducer","action","payload","value","useStyles","makeStyles","createStyles","container","flexWrap","borderColor","borderBottomColor","formControl","margin","spacing","icon","marginLeft","notesLengthTypes","Object","values","notesPatterns","chordModes","bpmToTempoName","60","75","90","110","130","160","190","220","SettingsModal","isOpen","setIsOpen","classes","useContext","Dialog","DialogTitle","DialogContent","FormControl","InputLabel","htmlFor","Select","labelId","onChange","e","input","Input","entries","label","pattern","count","DialogActions","IconButton","edge","aria-label","SettingsIcon","root","flexGrow","menuButton","Header","isSettingsOpen","setIsSettingsOpen","Left","Right","AboutPage","props","onLongPress","ref","Component","PrimaryButton","BigButton","getButtonByType","longPressEvent","callback","ms","startLongPress","setStartLongPress","setEvent","useEffect","timerId","setTimeout","clearTimeout","onMouseDown","persist","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","useLongPress","fontColor","button","HeroSection","backgroundImage","summary","actionComponent","rightImage","reversed","ImageBackground","Content","Title","Typography","align","fontWeight","variant","Summary","RightImage","src","Actions","img","MainPage","Link","Minor","M7","M9","Min7b5","Madd9","Major","D7","D7b5","Maj7","MajAdd9","Dim7","Aug","DURATIONS","NOTES_MAP_SOLO","randomIntegerRange","min","max","floor","sortChordsByType","types","chords","chord","includes","chordStringToFullChord","chordName","chordKeyMood","convertChordStringToArr","findNotes","tone","step","chordsForImpro","find","tonica","note","notesMap","indexOfNote","indexOf","length","transposeNote","chordFunction","slice","convertChordToString","getTermsFromArrToSum","array","partial","sort","a","b","sum","reduce","acc","cur","rand","result","getTermsFromArrToSumSimple","getDursByNotesLengthType","isInChordsArray","chordsArr","index","chordElement","notesLengthType","createDurMeasure","createDurMeasureByCount","getReleasesByType","getAllReleaserable","getReleaserablesByChordType","release","getAllReleaserablesForTonality","toneChord","getChordsReleasesForTonality","getAllReleases","getReleasesByChordType","searchItemsForReplace","previousChord","nextChord","previous","next","intersectionWith","console","log","MidiChordsCreator","generateRandomCyclicChords","all_chords","startChord","randTone","chordsOk","randChord","releasersForStartChord","releases","releaseChord","test","pop","this","i","generateChords","ALL_CHORDS_FOR_IMPROVISE","getDevice","window","matchMedia","matches","lessTabletQueryList","aboveMobileQueryList","isTablet","isSmallLaptop","VF","Vex","Flow","VexFlowController","renderer","barsPerLine","lineHeight","lineWidth","context","drawAll","notes","drawStaveLines","clear","bars","barsVexflow","bar","vexflowBar","convertToVexflow","addChordName","staveLines","ceil","resize","staveLineNumber","forEach","barNumber","drawStaveLineBar","stave","Stave","addClef","setContext","draw","Formatter","FormatAndDraw","partNote","noteWithDur","getVexflowDuration","dot","rest","octave","accidental","vexflowNote","StaveNote","keys","duration","dur","addDotToAll","addAccidental","Accidental","lyric","lyricMod","getLyricModifier","addModifier","Annotation","setVerticalJustification","setFont","Double","Renderer","current","Backends","SVG","getContext","setBackgroundFillStyle","getBarsPerLine","SheetStave","backgroundColor","useRef","staves","setStaves","StaveContainer","StyledProgressionContainer","StyledProgression","ChordsProgression","onChordClick","selectedChord","PageTitle","SaveModal","onSave","iconColor","titleValue","setTitleValue","saveAndClose","SaveIcon","onSubmit","TextField","autoFocus","preventDefault","SaveMelodiesModal","melody","addedChords","Melodies","saveMelody","Checkbox","FormGroup","row","FormControlLabel","control","checked","inputProps","PlayStopButton","handlePlaying","isPlaying","StopIcon","instruments","voiceInstrument","MidiPlayer","playRef","timeout","convertNoteToMidiPitch","noteNameStr","isRest","C","D","E","F","G","A","B","convertPartNotesPartToMidiPitches","playPartChords","onEnd","notesPerBar","part","getNotesForChord","flat","playPart","getOctaveForGuitar","getPartLength","partToCalculate","N","newBpm","instrument","midipart","when","contextTime","bpmDur","playChordAt","playChord","playStrumUpNow","stopAll","cancelQueue","setBand256","setBand512","useMidiPlayer","setIsPlaying","midiPlayer","setMidiPlayer","playerRef","MPlayer","appElementName","Player","usePlayMelodyAndChords","onPlay","onStop","CssTextField","withStyles","padding","border","TextSplitter","setLyric","multiline","rowsMax","submit","vowels","signs","voiced","splitLines","source","split","splitWords","addSyllable","collection","syllable","indexSign","letters","some","letter","indexYoy","nextLetter","indexSonoric","_syllabifyWord","word","separator","vowelsMatches","match","skip","currentSyllable","currentSyllableCount","isWordEnd","len","lastIndex","nextVowel","nextWovelIndex","between","indexSlice","sufix","join","replace","syllabifyWord","word_","nlp","extend","compromiseSyllables","convertTextLinesToLyricEnglish","textLines","splited","line","text","terms","syllables","lines","words","syllablesCount","Infinity","convertTextLinesToLyricRussian","str","RegExp","temp","lastWord","removePronounseFromLine","syllabify","convertTextToSyllables","BarCreator","notesLengthMode","toneJsArr","createRandomBarByPattern","restProbability","resultBar","patternNote","chordPitch","getNotesForBar","durs","notesCount","newNote","createRandomNote","muteNotesBySyllablesCount","shortIdxes","shuffle","cloneDeep","createRandomBar","createOctave","randNoteIndex","LyricPartCreator","partOptions","squaresCountToAdd","barCreator","createPartByLyric","chordNotesCounts","getChordNotesCounts","getBarNotesByLyric","addLyricToNotes","newBar","getRandomBar","chordsForLine","chordNotesCount","ceilChordNotesCount","floorChordNotesCount","lineCounts","textLine","notesBar","barIdx","noteIdx","shift","MotiveCreator","getPart","initialPart","Error","getBarWithMovedNotes","getBarByMotive","getClosestNoteInChord","resultIdx","chordNote","abs","idxWithBiggestNote","splittedNote","splitNote","splice","moveNotesInBar","spliceStart","deleteCount","spliced","PatternCreator","PartCreator","squaresCount","middlePattern","motiveCreator","lyricPartCreator","getPattern","onInit","createNewRandomPart","PartsFabric","parts","generateMelody","loopCounts","partFabric","addPart","MelodiesPage","location","useLocation","chordsCreator","setChords","locationChords","setPart","getRandomCyclicChords","eightChords","Chords","newPart","function","TextSplitterWrapper","isLinesLong","round","chordsCountForSong","chordsForSong","Footer","href","data-icon","data-size","FacebookButton","Tabs","activeChild","setActiveChild","TabsButtons","TabButton","isActive","child","Modal","triggerComponent","setOpen","maxWidth","onBackdropClick","disableBackdropClick","disableEscapeKeyDown","GuitarStrings","Melody","melodyData","fetchMelodies","StyledMelody","GlobalStyles","DeleteIcon","useColorChords","colorChord","setColorChord","Tone","start","_","allChords","scheduleOnce","colorChordsOnPlay","stop","SHAPES","name","barres","fromString","fret","positionText","POSITIONS","Bb","Db","Eb","Gb","Ab","build","key","shape","position","string","struct","getMinPositionString","ChordBox","sel","params","canvas","numStrings","numFrets","fretSpacing","metrics","tuning","remove","strokeWidth","showTuning","defaultColor","bgColor","labelColor","fontFamily","fontStyle","labelWeight","param","addTo","size","circleRadius","barreRadius","barShiftX","bridgeStrokeWidth","msg","attrs","textAttrs","family","weight","stroke","textColor","font","move","newX","newY","fromX","fromY","rect","bridgeColor","drawText","drawLine","stringWidth","stringColor","fretWidth","fretColor","lightUp","lightBar","stringNum","shiftPosition","mute","fretNum","circle","radius","strokeColor","textYShift","stringFrom","stringTo","theFretNum","stringFromNum","stringToNum","xTo","yTo","VexChordsController","selectorPrefix","chordParams","chordCharts","drawChords","getChordsData","chart","findChordChartData","ChordCharts","chordsPrefix","ChordsDrawer","setChordsDrawer","Chord","isSelected","SavedChordsLine","onRemove","savedChords","openInEditor","SavedPage","setSavedChords","savedMelodies","setSavedMelodies","history","useHistory","fetchChords","melodies","openInMelodyEditor","pathname","chordsObject","chordsToAdd","replacingChord","addedChordsMode","mood","chordsLenght","chordsAdderStore","ChordsAdderProvider","singleToneChord","keyChord","newFilteredChords","newReplacedChords","ChordWithEditModal","onReplace","onDelete","aria-describedby","Popover","anchorOrigin","vertical","horizontal","transformOrigin","SaveChordsModal","saveSavedChords","CheckboxIcon","GuitarModeSwitcher","buttonsDisabled","ActionsContainer","BackspaceIcon","DeleteForeverIcon","AddedChordsNew","playingChord","AllChordsLines","TransitionGroup","arr","CSSTransition","classNames","AddMelody","ChordsTitledLine","TitleWrapper","minWidth","KeyMoodSelector","getMoodLabel","ChordsToAdd","lastChord","ChordEditorPage","MainRouter","Body","exact","from","path","createMuiTheme","palette","App","useSettings","ThemeProvider","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"+NAAe,MAA0B,0CCK1BA,cAAf,gNAG0CC,G,gGCR7BC,EACG,iBADHA,EAGJ,SAHIA,EAIG,iBAJHA,EAKC,eALDA,EAMJ,SANIA,EAOL,ICUKC,EAAQ,CACnBC,MAAO,CACLC,QAAS,yBAEXC,OAAQ,CACNC,OAAQ,qBACRC,WAAY,CACV,IAAO,UACP,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,WAETC,MAAO,UACPC,MAAO,OACPL,QAAS,UACTM,IAAK,CACH,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPC,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERC,KAAM,CACJ,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPJ,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERE,OAAQ,CACN,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPL,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERG,WAAY,CACV,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPN,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERI,OAAQ,CACN,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPP,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERK,KAAM,CACJ,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPR,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERM,UAAW,CACT,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPT,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERO,KAAM,CACJ,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPV,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERQ,KAAM,CACJ,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPX,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERS,MAAO,CACL,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPZ,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERU,WAAY,CACV,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPb,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERW,KAAM,CACJ,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPd,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERY,OAAQ,CACN,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACPf,KAAM,UACNC,KAAM,UACNC,KAAM,UACNC,KAAM,WAERa,MAAO,CACL,GAAM,UACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,UACP,IA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","file":"static/js/main.0f0b14f0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/HelveticaComp.0555bf1e.ttf\";","import { createGlobalStyle } from 'styled-components';\n\n// @ts-ignore\nimport HelveticaComp from './HelveticaComp.ttf';\n\nexport default createGlobalStyle`\n    @font-face {\n        font-family: 'HelveticaComp';\n        src: local('HelveticaComp') url(${HelveticaComp}) format('ttf');\n        font-weight: 300;\n        font-style: normal;\n    }\n`;\n","export const routes = {\n  chordsEditor: '/chords-editor',\n  chordsCreator: '/chords-creator',\n  saved: '/saved',\n  melodyEditor: '/melody-editor',\n  midiEditor: '/midi-editor',\n  about: '/about',\n  root: '/',\n};\n","export interface Color {\n  '50': string;\n  '100': string;\n  '200': string;\n  '300': string;\n  '400': string;\n  '500': string;\n  '600': string;\n  '700': string;\n  '800': string;\n  '900': string;\n  a100?: string;\n  a200?: string;\n  a400?: string;\n  a700?: string;\n}\n\nexport const theme = {\n  fonts: {\n    primary: 'Gill Sans, sans-serif',\n  },\n  colors: {\n    grey50: 'rgb(125, 125, 125)',\n    bluePurple: {\n      '500': '#5f0db8',\n      '50': '#eceff1',\n      '100': '#cfd8dc',\n      '200': '#9446eb',\n      '300': '#90a4ae',\n      '400': '#774aa8',\n      '600': '#546e7a',\n      '700': '#230087',\n      '800': '#37474f',\n      '900': '#263238',\n    },\n    white: '#ffffff',\n    black: '#000',\n    primary: '#3f51b5',\n    red: {\n      '50': '#ffebee',\n      '100': '#ffcdd2',\n      '200': '#ef9a9a',\n      '300': '#e57373',\n      '400': '#ef5350',\n      '500': '#f44336',\n      '600': '#e53935',\n      '700': '#d32f2f',\n      '800': '#c62828',\n      '900': '#b71c1c',\n      a100: '#ff8a80',\n      a200: '#ff5252',\n      a400: '#ff1744',\n      a700: '#d50000',\n    },\n    pink: {\n      '50': '#fce4ec',\n      '100': '#f8bbd0',\n      '200': '#f48fb1',\n      '300': '#f06292',\n      '400': '#ec407a',\n      '500': '#e91e63',\n      '600': '#d81b60',\n      '700': '#c2185b',\n      '800': '#ad1457',\n      '900': '#880e4f',\n      a100: '#ff80ab',\n      a200: '#ff4081',\n      a400: '#f50057',\n      a700: '#c51162',\n    },\n    purple: {\n      '50': '#f3e5f5',\n      '100': '#e1bee7',\n      '200': '#ce93d8',\n      '300': '#ba68c8',\n      '400': '#ab47bc',\n      '500': '#9c27b0',\n      '600': '#8e24aa',\n      '700': '#7b1fa2',\n      '800': '#6a1b9a',\n      '900': '#4a148c',\n      a100: '#ea80fc',\n      a200: '#e040fb',\n      a400: '#d500f9',\n      a700: '#aa00ff',\n    },\n    deeppurple: {\n      '50': '#ede7f6',\n      '100': '#d1c4e9',\n      '200': '#b39ddb',\n      '300': '#9575cd',\n      '400': '#7e57c2',\n      '500': '#673ab7',\n      '600': '#5e35b1',\n      '700': '#512da8',\n      '800': '#4527a0',\n      '900': '#311b92',\n      a100: '#b388ff',\n      a200: '#7c4dff',\n      a400: '#651fff',\n      a700: '#6200ea',\n    },\n    indigo: {\n      '50': '#e8eaf6',\n      '100': '#c5cae9',\n      '200': '#9fa8da',\n      '300': '#7986cb',\n      '400': '#5c6bc0',\n      '500': '#3f51b5',\n      '600': '#3949ab',\n      '700': '#303f9f',\n      '800': '#283593',\n      '900': '#1a237e',\n      a100: '#8c9eff',\n      a200: '#536dfe',\n      a400: '#3d5afe',\n      a700: '#304ffe',\n    },\n    blue: {\n      '50': '#e3f2fd',\n      '100': '#bbdefb',\n      '200': '#90caf9',\n      '300': '#64b5f6',\n      '400': '#42a5f5',\n      '500': '#2196f3',\n      '600': '#1e88e5',\n      '700': '#1976d2',\n      '800': '#1565c0',\n      '900': '#0d47a1',\n      a100: '#82b1ff',\n      a200: '#448aff',\n      a400: '#2979ff',\n      a700: '#2962ff',\n    },\n    lightblue: {\n      '50': '#e1f5fe',\n      '100': '#b3e5fc',\n      '200': '#81d4fa',\n      '300': '#4fc3f7',\n      '400': '#29b6f6',\n      '500': '#03a9f4',\n      '600': '#039be5',\n      '700': '#0288d1',\n      '800': '#0277bd',\n      '900': '#01579b',\n      a100: '#80d8ff',\n      a200: '#40c4ff',\n      a400: '#00b0ff',\n      a700: '#0091ea',\n    },\n    cyan: {\n      '50': '#e0f7fa',\n      '100': '#b2ebf2',\n      '200': '#80deea',\n      '300': '#4dd0e1',\n      '400': '#26c6da',\n      '500': '#00bcd4',\n      '600': '#00acc1',\n      '700': '#0097a7',\n      '800': '#00838f',\n      '900': '#006064',\n      a100: '#84ffff',\n      a200: '#18ffff',\n      a400: '#00e5ff',\n      a700: '#00b8d4',\n    },\n    teal: {\n      '50': '#e0f2f1',\n      '100': '#b2dfdb',\n      '200': '#80cbc4',\n      '300': '#4db6ac',\n      '400': '#26a69a',\n      '500': '#009688',\n      '600': '#00897b',\n      '700': '#00796b',\n      '800': '#00695c',\n      '900': '#004d40',\n      a100: '#a7ffeb',\n      a200: '#64ffda',\n      a400: '#1de9b6',\n      a700: '#00bfa5',\n    },\n    green: {\n      '50': '#e8f5e9',\n      '100': '#c8e6c9',\n      '200': '#a5d6a7',\n      '300': '#81c784',\n      '400': '#66bb6a',\n      '500': '#4caf50',\n      '600': '#43a047',\n      '700': '#388e3c',\n      '800': '#2e7d32',\n      '900': '#1b5e20',\n      a100: '#b9f6ca',\n      a200: '#69f0ae',\n      a400: '#00e676',\n      a700: '#00c853',\n    },\n    lightgreen: {\n      '50': '#f1f8e9',\n      '100': '#dcedc8',\n      '200': '#c5e1a5',\n      '300': '#aed581',\n      '400': '#9ccc65',\n      '500': '#8bc34a',\n      '600': '#7cb342',\n      '700': '#689f38',\n      '800': '#558b2f',\n      '900': '#33691e',\n      a100: '#ccff90',\n      a200: '#b2ff59',\n      a400: '#76ff03',\n      a700: '#64dd17',\n    },\n    lime: {\n      '50': '#f9fbe7',\n      '100': '#f0f4c3',\n      '200': '#e6ee9c',\n      '300': '#dce775',\n      '400': '#d4e157',\n      '500': '#cddc39',\n      '600': '#c0ca33',\n      '700': '#afb42b',\n      '800': '#9e9d24',\n      '900': '#827717',\n      a100: '#f4ff81',\n      a200: '#eeff41',\n      a400: '#c6ff00',\n      a700: '#aeea00',\n    },\n    yellow: {\n      '50': '#fffde7',\n      '100': '#fff9c4',\n      '200': '#fff59d',\n      '300': '#fff176',\n      '400': '#ffee58',\n      '500': '#ffeb3b',\n      '600': '#fdd835',\n      '700': '#fbc02d',\n      '800': '#f9a825',\n      '900': '#f57f17',\n      a100: '#ffff8d',\n      a200: '#ffff00',\n      a400: '#ffea00',\n      a700: '#ffd600',\n    },\n    amber: {\n      '50': '#fff8e1',\n      '100': '#ffecb3',\n      '200': '#ffe082',\n      '300': '#ffd54f',\n      '400': '#ffca28',\n      '500': '#ffc107',\n      '600': '#ffb300',\n      '700': '#ffa000',\n      '800': '#ff8f00',\n      '900': '#ff6f00',\n      a100: '#ffe57f',\n      a200: '#ffd740',\n      a400: '#ffc400',\n      a700: '#ffab00',\n    },\n    orange: {\n      '50': '#fff3e0',\n      '100': '#ffe0b2',\n      '200': '#ffcc80',\n      '300': '#ffb74d',\n      '400': '#ffa726',\n      '500': '#ff9800',\n      '600': '#fb8c00',\n      '700': '#f57c00',\n      '800': '#ef6c00',\n      '900': '#e65100',\n      a100: '#ffd180',\n      a200: '#ffab40',\n      a400: '#ff9100',\n      a700: '#ff6d00',\n    },\n    deeporange: {\n      '50': '#fbe9e7',\n      '100': '#ffccbc',\n      '200': '#ffab91',\n      '300': '#ff8a65',\n      '400': '#ff7043',\n      '500': '#ff5722',\n      '600': '#f4511e',\n      '700': '#e64a19',\n      '800': '#d84315',\n      '900': '#bf360c',\n      a100: '#ff9e80',\n      a200: '#ff6e40',\n      a400: '#ff3d00',\n      a700: '#dd2c00',\n    },\n    brown: {\n      '50': '#efebe9',\n      '100': '#d7ccc8',\n      '200': '#bcaaa4',\n      '300': '#a1887f',\n      '400': '#8d6e63',\n      '500': '#795548',\n      '600': '#6d4c41',\n      '700': '#5d4037',\n      '800': '#4e342e',\n      '900': '#3e2723',\n    },\n    grey: {\n      '50': '#fafafa',\n      '100': '#f5f5f5',\n      '200': '#eeeeee',\n      '300': '#e0e0e0',\n      '400': '#bdbdbd',\n      '500': '#9e9e9e',\n      '600': '#757575',\n      '700': '#616161',\n      '800': '#424242',\n      '900': '#212121',\n    },\n    bluegrey: {\n      '50': '#eceff1',\n      '100': '#cfd8dc',\n      '200': '#b0bec5',\n      '300': '#90a4ae',\n      '400': '#78909c',\n      '500': '#607d8b',\n      '600': '#546e7a',\n      '700': '#455a64',\n      '800': '#37474f',\n      '900': '#263238',\n    },\n  },\n\n  breakpoints: {\n    belowMobileS: `(max-width: 320px)`,\n    belowMobileM: `(max-width: 375px)`,\n    belowMobileL: `(max-width: 425px)`,\n    belowMobile: `(max-width: 600px)`,\n    belowTablet: `(max-width: 768px)`,\n    belowTabletM: `(max-width: 925px)`,\n    belowLaptopL: `(max-width: 1440px)`,\n  },\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\ninterface Props {\n  className?: string;\n  to: string;\n  children: any;\n  onClick?: () => void;\n}\n\nexport const AlioshaLink = styled(({ className, to, children, onClick }: Props) => {\n  return (\n    <Link onClick={!!onClick ? onClick : undefined} className={className} to={to}>\n      {children}\n    </Link>\n  );\n})`\n  text-decoration: none;\n  color: black;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { routes } from '../../pages/routes';\nimport { theme } from '../../utils/theme';\nimport { AlioshaLink } from '../global/AlioshaLink';\n\nexport const Logo = () => {\n  return (\n    <AlioshaLink to={routes.root}>\n      <Container>\n        <h1>Cyber</h1>\n        <Line />\n        <h1>Aliosha</h1>\n      </Container>\n    </AlioshaLink>\n  );\n};\n\nconst Container = styled.div`\n  h1 {\n    font-family: 'ArvoBold', sans-serif;\n    font-size: 30px;\n    color: ${theme.colors.bluePurple[500]};\n    margin: 0 5px;\n    text-align: center;\n\n    @media ${theme.breakpoints.belowTabletM} {\n      font-size: 20px;\n    }\n  }\n`;\n\nconst Line = styled.div`\n  height: 3px;\n  background-color: ${theme.colors.bluePurple[500]};\n`;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\nimport { routes } from '../../pages/routes';\nimport { AlioshaLink } from '../global/AlioshaLink';\nimport styled from 'styled-components';\n\nexport const Navigation = () => {\n  return (\n    <Container>\n      <AlioshaLink to={routes.chordsEditor}>\n        <Button>Chords</Button>\n      </AlioshaLink>\n      <AlioshaLink to={routes.melodyEditor}>\n        <Button>Melody</Button>\n      </AlioshaLink>\n      <AlioshaLink to={routes.saved}>\n        <Button>Saved</Button>\n      </AlioshaLink>\n      <AlioshaLink to={routes.about}>\n        <Button>About</Button>\n      </AlioshaLink>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  .MuiButton-root {\n    color: black;\n  }\n`;\n","import React from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport styled from 'styled-components';\nimport { AlioshaLink } from './AlioshaLink';\n\nexport interface MenuProps {\n  target: JSX.Element;\n  items: {\n    title: string;\n    onClick?: () => void;\n    link?: string;\n  }[];\n}\n\nexport function SimpleMenu({ items, target }: MenuProps) {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n  const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <Container>\n      <div\n        className=\"button\"\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        {target}\n      </div>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {items.map((item, idx) =>\n          item.link ? (\n            <AlioshaLink onClick={handleClose} key={`link-${idx}`} to={item.link}>\n              <MenuItem className=\"menu\">{item.title}</MenuItem>\n            </AlioshaLink>\n          ) : (\n            <MenuItem\n              key={`link-${idx}`}\n              className=\"menu\"\n              onClick={() => {\n                if (item.onClick) {\n                  item.onClick();\n                }\n                handleClose();\n              }}\n            >\n              {item.title}\n            </MenuItem>\n          ),\n        )}\n      </Menu>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  .MuiPaper-root,\n  .MuiMenu-paper,\n  .MuiPopover-paper {\n    background-color: grey;\n  }\n\n  .button {\n    border: 0;\n    box-shadow: unset;\n  }\n`;\n","export interface ChordModel {\r\n  0: Notes;\r\n  1: ChordType;\r\n  2: SharpNotes[];\r\n  3: SharpNotes[];\r\n}\r\nexport type SharpNotes = 'A' | 'A#' | 'B' | 'C' | 'C#' | 'D' | 'D#' | 'E' | 'F' | 'F#' | 'G' | 'G#';\r\n\r\nexport const allNotes = ['A', 'A#', 'B', 'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#'];\r\nexport type Notes =\r\n  | 'A'\r\n  | 'A#'\r\n  | 'Bb'\r\n  | 'B'\r\n  | 'C'\r\n  | 'C#'\r\n  | 'Db'\r\n  | 'D'\r\n  | 'D#'\r\n  | 'Eb'\r\n  | 'E'\r\n  | 'F'\r\n  | 'F#'\r\n  | 'Gb'\r\n  | 'G'\r\n  | 'G#'\r\n  | 'Ab';\r\n\r\nexport type ChordType = MajorChords | MinorChords | UnstableChords;\r\n\r\nexport enum MajorChords {\r\n  Major = '',\r\n  Maj7 = 'maj',\r\n  MajAdd9 = 'majAdd9',\r\n}\r\n\r\nexport enum MinorChords {\r\n  Minor = 'm',\r\n  M7 = 'm7',\r\n  Madd9 = 'mAdd9',\r\n}\r\n\r\nexport enum UnstableChords {\r\n  Dim7 = 'dim7',\r\n  Aug = 'aug',\r\n  D7b5 = '7b5',\r\n  D7 = '7',\r\n  Min7b5 = 'm7b5',\r\n  M9 = 'm9',\r\n}\r\n\r\nexport interface ChordRelease {\r\n  0: number;\r\n  1: MajorChords | MinorChords | UnstableChords;\r\n}\r\n\r\nexport interface Tonality {\r\n  0: ChordModel[0];\r\n  1: MajorChords.Major | MinorChords.Minor;\r\n}\r\n\r\nexport enum SolidNotes {\r\n  Double = 2,\r\n  Whole = 1,\r\n  Half = 0.5,\r\n  Quarter = 0.25,\r\n  Eight = 0.125,\r\n  Sixteen = 0.0625,\r\n}\r\n\r\nexport enum DotNotes {\r\n  Half = 0.75,\r\n  Quarter = 0.375,\r\n  Eight = 0.1875,\r\n}\r\n\r\nexport interface PartNote {\r\n  note: string;\r\n  dur: SolidNotes | DotNotes;\r\n  dot?: boolean;\r\n  rest?: boolean;\r\n  lyric?: string;\r\n}\r\n\r\nexport interface MidiNote {\r\n  note: number;\r\n  dur: SolidNotes | DotNotes;\r\n  dot?: boolean;\r\n}\r\n\r\nexport enum NotesLengthType {\r\n  Often = 'often',\r\n  Middle = 'middle',\r\n  Seldom = 'seldom',\r\n  VeryOften = 'very_often',\r\n  VerySeldom = 'very_seldom',\r\n  Whole = 'whole',\r\n  Half = 'half',\r\n  Quarter = 'quarter',\r\n  Eight = 'eight',\r\n  Sixteen = 'sixteen',\r\n  Lyric = 'lyric',\r\n}\r\n\r\nexport enum NotesPatterns {\r\n  None = 'none',\r\n  Riff = 'riff',\r\n  Motive = 'motive',\r\n}\r\n\r\nexport enum ChordsMode {\r\n  SingleTonality = 'single_tonality',\r\n  JazzChords = 'jazz',\r\n}\r\n\r\nexport const getChordsModeLabel = (mode: ChordsMode) => {\r\n  const labels = {\r\n    [ChordsMode.SingleTonality]: 'Single tonality',\r\n    [ChordsMode.JazzChords]: 'Jazz',\r\n  };\r\n\r\n  return labels[mode];\r\n};\r\n\r\nexport const getNotesTypeLabel = (type: NotesLengthType) => {\r\n  const labels = {\r\n    [NotesLengthType.Often]: 'Often',\r\n    [NotesLengthType.Middle]: 'Middle',\r\n    [NotesLengthType.VeryOften]: 'Very often',\r\n    [NotesLengthType.VerySeldom]: 'Very seldom',\r\n    [NotesLengthType.Whole]: 'Whole',\r\n    [NotesLengthType.Half]: 'Half',\r\n    [NotesLengthType.Quarter]: 'Quarter',\r\n    [NotesLengthType.Eight]: 'Eight',\r\n    [NotesLengthType.Sixteen]: 'Sixteen',\r\n    [NotesLengthType.Seldom]: 'Seldom',\r\n    [NotesLengthType.Lyric]: 'Lyric',\r\n  };\r\n\r\n  return labels[type];\r\n};\r\n\r\nexport const getNotesPatternLabel = (type: NotesPatterns) => {\r\n  const labels = {\r\n    [NotesPatterns.None]: 'None',\r\n    [NotesPatterns.Riff]: 'Riff',\r\n    [NotesPatterns.Motive]: 'Motive',\r\n  };\r\n\r\n  return labels[type];\r\n};\r\n","import styled, { css } from 'styled-components';\nimport { theme } from '../utils/theme';\n\nexport const borders = css`\n  border-top: 2px solid #dbdee1;\n  border-left: 2px solid #dbdee1;\n  border-right: 2px solid #2f3134;\n  border-bottom: 2px solid #2f3134;\n`;\n\n// export const MetalBlock = styled.div`\n//   background-color: #878c90;\n//   border-radius: 3px;\n//   ${borders}\n// `;\n\nexport const MetalBlock = styled.div`\n  background-color: ${theme.colors.white};\n  border-radius: 3px;\n  /* ${borders} */\n  margin: 5px;\n  -webkit-box-shadow: 0px 0px 5px 0px #7d6d8f;\n  box-shadow: 0px 0px 5px 0px #7d6d8f;\n`;\n\nexport const Mobile = styled.div<{ display?: string }>`\n  display: none;\n\n  @media ${theme.breakpoints.belowTabletM} {\n    display: ${({ display }) => (display ? display : 'block')};\n  }\n`;\n\nexport const Desktop = styled.div<{ display?: string }>`\n  display: ${({ display }) => (display ? display : 'block')};\n\n  @media ${theme.breakpoints.belowTabletM} {\n    display: none;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { theme } from \"../../utils/theme\";\n\ninterface Props {\n  type: \"radom\" | \"play\" | \"guitar\" | \"notes\" | \"material\";\n  className?: string;\n  fill?: string;\n  disabled?: boolean;\n  Icon?: any;\n}\n\nexport const Icon = styled(\n  ({ type, className, fill = theme.colors.black, disabled, Icon }: Props) => {\n    const getClassName = () => `${className} ${disabled ? \"disabled\" : \"\"}`;\n\n    if (Icon && type === \"material\") {\n      return (\n        <Icon\n          fontSize=\"large\"\n          className={className}\n          style={{ color: disabled ? \"rgba(179, 179, 179, 0.3)\" : fill }}\n        />\n      );\n    }\n    switch (type) {\n      case \"radom\":\n        return (\n          <svg\n            fill={fill}\n            className={getClassName()}\n            role=\"img\"\n            focusable=\"false\"\n            aria-hidden=\"true\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 14 14\"\n          >\n            <path d=\"M 5.459789,4.64957 Q 5.058009,5.26564 4.542379,6.4777 4.395059,6.17636 4.294609,5.9922 4.194169,5.80805 4.023409,5.56698 3.852649,5.32591 3.681889,5.18863 3.511129,5.05136 3.260009,4.95426 3.008899,4.85716 2.714259,4.85716 H 1.214255 q -0.09375,0 -0.154018,-0.0603 Q 0.999969,4.73666 0.999969,4.64287 V 3.35716 q 0,-0.0937 0.06027,-0.15402 0.06027,-0.0603 0.154018,-0.0603 h 1.500004 q 1.6741,0 2.74553,1.5067 z m 7.54018,5.35045 q 0,0.0937 -0.0603,0.15402 l -2.14285,2.14285 q -0.0603,0.0603 -0.15402,0.0603 -0.0871,0 -0.15067,-0.0636 -0.0636,-0.0636 -0.0636,-0.15067 v -1.28571 q -0.21428,0 -0.5692,0.003 -0.35491,0.003 -0.54241,0.007 -0.1875,0.003 -0.48884,-0.007 -0.30133,-0.0101 -0.47544,-0.0335 -0.17411,-0.0234 -0.42857,-0.0703 -0.25447,-0.0469 -0.42188,-0.12388 -0.16741,-0.077 -0.38839,-0.19085 -0.22098,-0.11384 -0.39509,-0.26786 -0.17411,-0.15401 -0.3683,-0.35825 -0.1942,-0.20425 -0.375,-0.46541 0.39509,-0.62276 0.91071,-1.82812 0.14732,0.30134 0.24777,0.48549 0.10044,0.18415 0.2712,0.42522 0.17076,0.24107 0.34152,0.37835 0.17076,0.13728 0.42188,0.23438 0.25111,0.0971 0.54576,0.0971 h 1.71428 V 7.85687 q 0,-0.0937 0.0603,-0.15402 0.0603,-0.0603 0.15402,-0.0603 0.0803,0 0.16071,0.067 l 2.13616,2.13616 q 0.0603,0.0603 0.0603,0.15402 z m 0,-6 q 0,0.0937 -0.0603,0.15401 l -2.14285,2.14286 q -0.0603,0.0603 -0.15402,0.0603 -0.0871,0 -0.15067,-0.0636 -0.0636,-0.0636 -0.0636,-0.15067 V 4.85721 h -1.71428 q -0.32143,0 -0.58259,0.10045 -0.26116,0.10044 -0.46206,0.30134 -0.20089,0.20089 -0.34152,0.41183 -0.14062,0.21093 -0.30133,0.51897 -0.21429,0.41518 -0.52233,1.14509 -0.19419,0.44196 -0.33147,0.7433 -0.13728,0.30134 -0.36161,0.70313 -0.22433,0.40178 -0.42857,0.66964 -0.20424,0.26786 -0.49553,0.5558 -0.2913,0.28795 -0.60268,0.45871 -0.31139,0.17076 -0.71317,0.28125 -0.40179,0.11049 -0.85714,0.11049 H 1.214245 q -0.09375,0 -0.154018,-0.0603 -0.060258,-0.0603 -0.060258,-0.15404 V 9.35716 q 0,-0.0937 0.06027,-0.15402 0.06027,-0.0603 0.154018,-0.0603 h 1.500004 q 0.32142,0 0.58258,-0.10044 0.26117,-0.10045 0.46206,-0.30134 0.20089,-0.20089 0.34152,-0.41183 0.14062,-0.21094 0.30134,-0.51898 0.21428,-0.41517 0.52232,-1.14508 0.19419,-0.44197 0.33147,-0.74331 0.13728,-0.30134 0.36161,-0.70312 0.22433,-0.40179 0.42857,-0.66965 0.20424,-0.26785 0.49553,-0.5558 0.2913,-0.28795 0.60268,-0.45871 0.31139,-0.17075 0.71317,-0.28124 0.40179,-0.1105 0.85715,-0.1105 h 1.71428 V 1.85713 q 0,-0.0937 0.0603,-0.15402 0.0603,-0.0603 0.15402,-0.0603 0.0803,0 0.16071,0.067 l 2.13616,2.13616 q 0.0603,0.0603 0.0603,0.15402 z\" />\n          </svg>\n        );\n\n      case \"play\":\n        return (\n          <svg\n            height=\"32px\"\n            id=\"Layer_1\"\n            version=\"1.1\"\n            viewBox=\"0 0 32 32\"\n            width=\"32px\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill={fill}\n            className={getClassName()}\n          >\n            <path d=\"M28.516,14L6,2.75C5.344,2.453,4.672,2,4,2C2.922,2,2,2.906,2,4v24c0,1.094,0.922,2,2,2c0.672,0,1.344-0.453,2-0.75  L28.516,18C29.063,17.734,30,17.188,30,16S29.063,14.266,28.516,14z M6,24.778V7.222L23.568,16L6,24.778z\" />\n          </svg>\n        );\n\n      case \"guitar\":\n        return (\n          <svg\n            className={className}\n            version=\"1.1\"\n            id=\"Capa_1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            x=\"0px\"\n            y=\"0px\"\n            width=\"30px\"\n            height=\"30px\"\n            viewBox=\"0 0 25.917 25.917\"\n          >\n            <g>\n              <path\n                fill={fill}\n                d=\"M9.547,20.221c0.118,0.119,0.118,0.31,0,0.428l-0.642,0.643c-0.118,0.117-0.311,0.117-0.428,0\n         L4.625,17.44c-0.119-0.119-0.119-0.311,0-0.429l0.642-0.642c0.118-0.119,0.31-0.119,0.428,0L9.547,20.221z M25.917,2.413v0.003\n         c0,0.256-0.098,0.511-0.293,0.706l-0.421,0.421l0.164,0.164c0.205,0.206,0.205,0.538,0,0.744c-0.102,0.102-0.237,0.153-0.372,0.153\n         s-0.269-0.05-0.372-0.153l-0.164-0.164l-0.256,0.256l0.164,0.164c0.205,0.206,0.205,0.538,0,0.744\n         c-0.102,0.102-0.237,0.153-0.372,0.153s-0.269-0.05-0.372-0.153l-0.164-0.164l-0.198,0.198c-0.259,0.259-0.622,0.329-0.952,0.245\n         l-4.357,4.357c1.146,1.31,2.575,3.602,1.088,5.774c-1.014,1.483-2.584,1.178-3.474,2.103c-1.001,1.042-0.2,3.903-2.817,6.52\n         c-0.985,0.985-2.11,1.433-3.301,1.433c-1.977,0-4.136-1.235-6.134-3.313c-3.332-3.203-4.498-6.82-1.881-9.436\n         C4.05,10.55,6.909,11.351,7.95,10.35c0.927-0.89,0.642-2.44,2.124-3.453c0.668-0.457,1.347-0.64,2.004-0.64\n         c1.479,0,2.849,0.921,3.752,1.71l4.358-4.358c-0.085-0.331-0.014-0.693,0.245-0.952l0.198-0.198l-0.164-0.164\n         c-0.205-0.206-0.205-0.538,0-0.744c0.205-0.205,0.539-0.205,0.744,0l0.164,0.164l0.256-0.256l-0.164-0.164\n         c-0.205-0.206-0.205-0.538,0-0.744c0.205-0.205,0.539-0.205,0.744,0l0.164,0.164l0.421-0.421c0.195-0.195,0.451-0.293,0.707-0.293\n         h0.003c0.256,0,0.511,0.098,0.705,0.293l1.414,1.414C25.819,1.902,25.917,2.157,25.917,2.413z M16.96,11.079l-3.359,3.359\n         c0.007,0.073,0.022,0.144,0.022,0.219c0,1.306-1.058,2.364-2.364,2.364s-2.364-1.058-2.364-2.364s1.058-2.364,2.364-2.364\n         c0.076,0,0.148,0.015,0.223,0.022l3.356-3.357c-0.777-0.662-1.799-1.302-2.76-1.302c-0.428,0-0.825,0.129-1.214,0.395\n         c-0.454,0.31-0.601,0.681-0.841,1.363c-0.209,0.595-0.47,1.336-1.104,1.944c-0.7,0.674-1.617,0.84-2.588,1.016\n         c-1.218,0.221-2.598,0.471-3.908,1.782c-0.697,0.699-1.032,1.465-1.023,2.346c0.015,1.51,1.039,3.319,2.884,5.091\n         c0.014,0.013,0.026,0.026,0.039,0.04c1.788,1.86,3.608,2.884,5.125,2.884c0.867,0,1.623-0.335,2.311-1.023\n         c1.31-1.309,1.56-2.691,1.782-3.91c0.176-0.971,0.342-1.888,1.016-2.589c0.614-0.639,1.364-0.895,1.966-1.1\n         c0.684-0.233,1.056-0.376,1.362-0.823C18.826,13.697,17.827,12.086,16.96,11.079z M21.652,3.689l2-2\n         c0.117-0.117,0.117-0.307,0-0.424s-0.307-0.117-0.424,0l-2,2c-0.117,0.117-0.117,0.307,0,0.424\n         c0.059,0.059,0.135,0.088,0.212,0.088C21.518,3.777,21.594,3.748,21.652,3.689z M24.652,2.265c-0.117-0.117-0.307-0.117-0.424,0\n         l-2,2c-0.117,0.117-0.117,0.307,0,0.424c0.059,0.059,0.135,0.088,0.212,0.088s0.153-0.029,0.212-0.088l2-2\n         C24.77,2.572,24.769,2.382,24.652,2.265z\"\n              />\n            </g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n          </svg>\n        );\n\n      case \"notes\":\n        return (\n          <svg\n            className={className}\n            fill={fill}\n            version=\"1.1\"\n            width=\"25px\"\n            height=\"25px\"\n            id=\"Capa_1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 477.867 477.867\"\n            enableBackground={\"new 0 0 477.867 477.867\"}\n          >\n            <g>\n              <g>\n                <path\n                  d=\"M472.184,4.347c-3.631-3.209-8.441-4.75-13.261-4.25l-307.2,34.133c-8.647,0.957-15.19,8.265-15.189,16.964V355.34\n             c-15.468-9.256-33.174-14.102-51.2-14.012C38.281,341.329,0,371.946,0,409.595s38.281,68.267,85.333,68.267\n             s85.333-30.601,85.333-68.267V151.889l273.067-30.413v199.68c-15.473-9.238-33.179-14.066-51.2-13.961\n             c-47.053,0-85.333,30.618-85.333,68.267c0,37.649,38.281,68.267,85.333,68.267s85.333-30.601,85.333-68.267v-358.4\n             C477.866,12.208,475.8,7.584,472.184,4.347z\"\n                />\n              </g>\n            </g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n            <g></g>\n          </svg>\n        );\n\n      default:\n        return <div>No Icon</div>;\n    }\n  }\n)`\n  &.disabled {\n    color: rgba(179, 179, 179, 0.3);\n    fill: rgba(198, 198, 198, 0.3);\n  }\n`;\n","import { ChordModel, PartNote } from './../dataset/all_chords_for_impro';\n\nexport enum StorageNames {\n  Chords = 'added_chords',\n  Melodies = 'saved_melodies',\n  Settings = 'settings',\n}\n\ninterface SerialazedData {\n  data: string;\n  id: string;\n  title: string;\n}\n\nexport interface SavedChords {\n  data: ChordModel[];\n  id: string;\n  title?: string;\n}\n\nexport interface SavedMelodies {\n  data: { melody: PartNote[][]; chords: ChordModel[] };\n  id: string;\n  title?: string;\n}\n\nexport const saveItem = (item: any, storage: StorageNames, title: string) => {\n  const previousItems = localStorage.getItem(storage);\n  const currentItems = {\n    id: `${Math.random().toString()}`,\n    data: JSON.stringify(item),\n    title: `${title} - ${new Date().toLocaleDateString()}`,\n  };\n\n  if (previousItems) {\n    const updatedItems = JSON.parse(previousItems);\n\n    updatedItems.push(currentItems);\n\n    localStorage.setItem(storage, JSON.stringify(updatedItems));\n  } else {\n    localStorage.setItem(storage, JSON.stringify([currentItems]));\n  }\n};\n\nexport const clearStorage = (storage: StorageNames) => {\n  localStorage.removeItem(storage);\n};\n\nexport const removeItemById = (id: string, storage: StorageNames) => {\n  const saved = localStorage.getItem(storage);\n\n  if (saved) {\n    const items = JSON.parse(saved);\n\n    const filteredItems = items?.filter((item: { id: string }) => item.id !== id);\n\n    localStorage.setItem(storage, JSON.stringify(filteredItems));\n  }\n};\n\nexport const getStorage = <T>(storage: StorageNames): T[] => {\n  const saved = localStorage.getItem(storage);\n  if (saved) {\n    const items = JSON.parse(saved);\n\n    return items.map((progression: SerialazedData) => ({\n      id: progression.id,\n      data: progression.data ? JSON.parse(progression.data) : [],\n      title: progression.title,\n    }));\n  } else return [];\n};\n","import { ChordsMode } from './../dataset/all_chords_for_impro';\nimport { NotesLengthType, NotesPatterns } from '../dataset/all_chords_for_impro';\nimport { StorageNames } from './storagesController';\n\nexport interface Settings {\n  bpm: number;\n  notesLength: NotesLengthType;\n  notesPattern: NotesPatterns;\n  playAccompanimentWithMelody: boolean;\n  chordsGuitarMode: boolean;\n  chordsToGenerateCount: number;\n  notesCountToPlayForChord: number;\n  chordsMode: ChordsMode;\n}\n\nconst initialSettings: Settings = {\n  bpm: 130,\n  notesLength: NotesLengthType.Middle,\n  notesPattern: NotesPatterns.None,\n  playAccompanimentWithMelody: true,\n  chordsGuitarMode: false,\n  chordsToGenerateCount: 8,\n  notesCountToPlayForChord: 2,\n  chordsMode: ChordsMode.JazzChords,\n};\n\nexport const getSettings = (): Settings => {\n  return !!localStorage?.getItem(StorageNames.Settings)\n    ? {\n        ...initialSettings,\n        ...JSON.parse(localStorage.getItem(StorageNames.Settings)!),\n      }\n    : initialSettings;\n};\n\nexport const saveSettings = (settings: Partial<Settings>) => {\n  const oldSettings = getSettings();\n\n  localStorage.setItem(StorageNames.Settings, JSON.stringify({ ...oldSettings, ...settings }));\n};\n\nexport const clearSettings = () => {\n  localStorage.removeItem(StorageNames.Settings);\n  localStorage.setItem(StorageNames.Settings, JSON.stringify(initialSettings));\n};\n","import React, { createContext, useReducer } from 'react';\nimport { getSettings, saveSettings, Settings } from '../localStorageUtils/settingsStorage';\n\ntype State = Settings;\n\ninterface Action {\n  type:\n    | 'SET_BPM'\n    | 'SET_NOTES_LENGTH'\n    | 'SET_NOTES_PATTERN'\n    | 'PLAY_ACCOMPANIMENT'\n    | 'SET_CHORDS_GUITAR_MODE'\n    | 'SET_SETTINGS'\n    | 'SET_CHORDS_TO_GENERATE_COUNT';\n\n  payload?: any;\n}\n\nconst initialState: State = getSettings();\n\ninterface Context {\n  state: State;\n  dispatch: (action: Action) => void;\n}\n\nconst settingsStore = createContext<Context>({ state: initialState, dispatch: () => {} });\nconst { Provider } = settingsStore;\n\nconst SettingsProvider = ({ children }: any) => {\n  const [state, dispatch] = useReducer((state: State, action: Action) => {\n    switch (action.type) {\n      case 'SET_NOTES_LENGTH':\n        saveSettings({ notesLength: action.payload });\n        return {\n          ...state,\n          notesLength: action.payload,\n        };\n\n      case 'SET_BPM':\n        saveSettings({ bpm: action.payload });\n        return {\n          ...state,\n          bpm: action.payload,\n        };\n\n      case 'SET_NOTES_PATTERN':\n        saveSettings({ notesPattern: action.payload });\n        return {\n          ...state,\n          notesPattern: action.payload,\n        };\n\n      case 'PLAY_ACCOMPANIMENT':\n        saveSettings({ playAccompanimentWithMelody: action.payload });\n        return {\n          ...state,\n          playAccompanimentWithMelody: action.payload,\n        };\n\n      case 'SET_CHORDS_GUITAR_MODE':\n        saveSettings({ chordsGuitarMode: action.payload });\n        return {\n          ...state,\n          chordsGuitarMode: action.payload,\n        };\n\n      case 'SET_CHORDS_TO_GENERATE_COUNT':\n        saveSettings({ chordsToGenerateCount: action.payload });\n        return {\n          ...state,\n          chordsToGenerateCount: action.payload,\n        };\n\n      case 'SET_SETTINGS':\n        saveSettings({\n          ...state,\n          ...action.payload,\n        });\n\n        return {\n          ...state,\n          ...action.payload,\n        };\n      default:\n        return state;\n    }\n  }, initialState);\n\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\n};\n\nexport { SettingsProvider, settingsStore };\n","import { FormControl, Input, InputLabel, MenuItem, Select } from '@material-ui/core';\nimport React, { useContext } from 'react';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport { Button as MatButton } from '@material-ui/core';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport {\n  ChordsMode,\n  getChordsModeLabel,\n  getNotesPatternLabel,\n  getNotesTypeLabel,\n  NotesLengthType,\n  NotesPatterns,\n} from '../../dataset/all_chords_for_impro';\nimport { settingsStore } from '../../context/SettingsProvider';\n\ninterface Props {\n  isOpen: boolean;\n  setIsOpen: (bool: boolean) => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      '& label.Mui-focused': {\n        color: 'white',\n      },\n      '&.Mui-focused fieldset': {\n        borderColor: 'white',\n      },\n      '& .MuiInput-underline:after': {\n        borderBottomColor: 'white',\n      },\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      width: '100%',\n    },\n    icon: {\n      marginLeft: '2rem',\n    },\n  })\n);\n\nconst notesLengthTypes = Object.values(NotesLengthType);\n\nconst notesPatterns = Object.values(NotesPatterns);\n\nconst chordModes = Object.values(ChordsMode);\n\nconst bpmToTempoName = {\n  60: 'Adagio',\n  75: 'Andante',\n  90: 'Moderato',\n  110: 'Animato',\n  130: 'Allegro',\n  160: 'Vivo',\n  190: 'Presto',\n  220: 'Prestissimo',\n};\n\nexport const SettingsModal = ({ isOpen, setIsOpen }: Props) => {\n  const classes = useStyles();\n\n  const {\n    state: {\n      bpm,\n      notesLength,\n      notesPattern,\n      chordsToGenerateCount,\n      notesCountToPlayForChord,\n      chordsMode,\n    },\n    dispatch,\n  } = useContext(settingsStore);\n\n  const setBpm = (value: string) => {\n    dispatch({\n      type: 'SET_BPM',\n      payload: +value,\n    });\n  };\n\n  const setNotesLength = (value: NotesLengthType) => {\n    dispatch({\n      type: 'SET_NOTES_LENGTH',\n      payload: value,\n    });\n  };\n\n  const setNotesPattern = (value: NotesPatterns) => {\n    dispatch({\n      type: 'SET_NOTES_PATTERN',\n      payload: value,\n    });\n  };\n\n  const setChordsToGenerateCount = (value: number) => {\n    dispatch({\n      type: 'SET_CHORDS_TO_GENERATE_COUNT',\n      payload: value,\n    });\n  };\n\n  const setNotesToPlayForChordCount = (value: number) => {\n    dispatch({\n      type: 'SET_SETTINGS',\n      payload: { notesCountToPlayForChord: value },\n    });\n  };\n\n  const setChordsMode = (value: ChordsMode) => {\n    dispatch({\n      type: 'SET_SETTINGS',\n      payload: { chordsMode: value },\n    });\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const saveAndClose = () => {\n    handleClose();\n  };\n\n  return (\n    <Dialog open={isOpen} onClose={handleClose}>\n      <DialogTitle>Settings</DialogTitle>\n      <DialogContent>\n        <form className={classes.container}>\n          <FormControl className={classes.formControl}>\n            <InputLabel htmlFor='tempo-label'>Tempo</InputLabel>\n            <Select\n              labelId='tempo-label'\n              id='tempo'\n              value={bpm}\n              onChange={(e: any) => setBpm(e.target.value)}\n              input={<Input id='tempo-label' />}\n            >\n              {Object.entries(bpmToTempoName).map(([bpm, label]) => (\n                <MenuItem key={label} value={bpm}>\n                  {`${label} - ${bpm} bpm`}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n          <FormControl className={classes.formControl}>\n            <InputLabel htmlFor='demo-dialog-melody-type'>Melody notes length</InputLabel>\n            <Select\n              labelId='demo-dialog-select-label'\n              id='demo-dialog-select'\n              value={notesLength}\n              onChange={(e) => setNotesLength(e.target.value as NotesLengthType)}\n              input={<Input id='demo-dialog-melody-type' />}\n            >\n              {notesLengthTypes.map((type) => (\n                <MenuItem key={type} value={type}>\n                  {getNotesTypeLabel(type)}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n          <FormControl className={classes.formControl}>\n            <InputLabel htmlFor='demo-dialog-notes-pattern'>Melody rythme pattern</InputLabel>\n            <Select\n              labelId='demo-dialog-select-label'\n              id='demo-dialog-select'\n              value={notesPattern}\n              onChange={(e) => setNotesPattern(e.target.value as NotesPatterns)}\n              input={<Input id='demo-dialog-notes-pattern' />}\n            >\n              {notesPatterns.map((pattern) => (\n                <MenuItem key={pattern} value={pattern}>\n                  {getNotesPatternLabel(pattern)}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n          <FormControl className={classes.formControl}>\n            <InputLabel htmlFor='demo-dialog-chords-count'>Chords to generate count</InputLabel>\n            <Select\n              labelId='demo-dialog-chords-count'\n              id='chords-count'\n              value={+chordsToGenerateCount}\n              onChange={(e) => setChordsToGenerateCount(e.target.value as number)}\n              input={<Input id='demo-dialog-chords-count' />}\n            >\n              {[4, 6, 8, 12, 16].map((count) => (\n                <MenuItem key={count} value={+count}>\n                  {count}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n          <FormControl className={classes.formControl}>\n            <InputLabel htmlFor='demo-dialog-chords-notes-play-count'>\n              Notes count to play for chord\n            </InputLabel>\n            <Select\n              labelId='demo-dialog-chords-count'\n              id='chords-notes-play-count'\n              value={+notesCountToPlayForChord}\n              onChange={(e) => setNotesToPlayForChordCount(e.target.value as number)}\n              input={<Input id='demo-dialog-chords-notes-play-count' />}\n            >\n              {[1, 2, 4, 8].map((count) => (\n                <MenuItem key={count} value={+count}>\n                  {count}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n          <FormControl className={classes.formControl}>\n            <InputLabel htmlFor='chords-mode'>Chords mode</InputLabel>\n            <Select\n              labelId='demo-dialog-chords-mode'\n              id='label-chords-mode'\n              value={chordsMode}\n              onChange={(e) => setChordsMode(e.target.value as ChordsMode)}\n              input={<Input id='chords-mode' />}\n            >\n              {chordModes.map((mode) => (\n                <MenuItem key={mode} value={mode}>\n                  {getChordsModeLabel(mode)}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </form>\n      </DialogContent>\n      <DialogActions>\n        <MatButton onClick={handleClose} color='inherit'>\n          Cancel\n        </MatButton>\n        <MatButton onClick={() => saveAndClose()} color='inherit'>\n          Ok\n        </MatButton>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import { useState } from 'react';\nimport { IconButton } from '@material-ui/core';\nimport styled from 'styled-components';\n\nimport { Icon } from '../global/Icon';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\nimport { SettingsModal } from './SettingsModal';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      '& label.Mui-focused': {\n        color: 'white',\n      },\n      '&.Mui-focused fieldset': {\n        borderColor: 'white',\n      },\n      '& .MuiInput-underline:after': {\n        borderBottomColor: 'white',\n      },\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      width: '100%',\n    },\n    icon: {\n      marginLeft: '2rem',\n    },\n  })\n);\n\nexport const Settings = () => {\n  const classes = useStyles();\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <Container>\n      <IconButton\n        onClick={() => setIsOpen(true)}\n        className={classes.icon}\n        edge='start'\n        aria-label='menu'\n      >\n        <Icon type='material' Icon={SettingsIcon} className='settings-icon' />\n      </IconButton>\n      <SettingsModal isOpen={isOpen} setIsOpen={setIsOpen} />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  .settings-icon {\n    fill: white;\n  }\n`;\n","import React, { useState } from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport styled from 'styled-components';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport { Logo } from './Logo';\r\nimport { Navigation } from './Navigation';\r\nimport { SimpleMenu } from '../global/SimpleMenu';\r\nimport { routes } from '../../pages/routes';\r\nimport { Desktop, Mobile } from '../../styled/global';\r\nimport { Settings } from '../Settings';\r\nimport { SettingsModal } from '../Settings/SettingsModal';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n      marginLeft: theme.spacing(2),\r\n    },\r\n    title: {\r\n      flexGrow: 1,\r\n    },\r\n    'MuiSvgIcon-root': {\r\n      width: '2rem',\r\n      height: '2rem',\r\n    },\r\n  }),\r\n);\r\n\r\nexport default function Header() {\r\n  const classes = useStyles();\r\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\r\n  const items = [\r\n    {\r\n      title: 'Chords',\r\n      link: routes.chordsEditor,\r\n    },\r\n    {\r\n      title: 'Melody',\r\n      link: routes.melodyEditor,\r\n    },\r\n    {\r\n      title: 'Saved',\r\n      link: routes.saved,\r\n    },\r\n    {\r\n      title: 'Settings',\r\n      onClick: () => setIsSettingsOpen(true),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Container>\r\n      <Left>\r\n        <Logo />\r\n      </Left>\r\n      <Desktop>\r\n        <Right>\r\n          <Navigation />\r\n          <Settings />\r\n        </Right>\r\n      </Desktop>\r\n      <Mobile>\r\n        <SimpleMenu\r\n          items={items}\r\n          target={\r\n            <IconButton\r\n              edge=\"start\"\r\n              className={`${classes.menuButton} settings-icon`}\r\n              color=\"default\"\r\n              aria-label=\"menu\"\r\n            >\r\n              <MenuIcon className={classes['MuiSvgIcon-root']} />\r\n            </IconButton>\r\n          }\r\n        />\r\n      </Mobile>\r\n      <SettingsModal isOpen={isSettingsOpen} setIsOpen={setIsSettingsOpen} />\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 20px;\r\n  .settings-icon {\r\n    fill: black;\r\n    color: black;\r\n  }\r\n`;\r\n\r\nconst Left = styled.div``;\r\n\r\nconst Right = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n","import React from 'react';\n\ninterface Props {}\n\nexport const AboutPage = (props: Props) => {\n  return (\n    <div>\n      <p>AboutPage</p>\n      <p>In development</p>\n    </div>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useLongPress } from '../../hooks/useLongPress';\nimport { Color, theme } from '../../utils/theme';\n\ninterface Props {\n  color?: Color;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n  onLongPress?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  children: any;\n  type?: 'primary' | 'big';\n  id?: string;\n  className?: string;\n  disabled?: boolean;\n  ref?: any;\n}\n\nexport function Button({\n  color = theme.colors.bluePurple,\n  onClick = () => {},\n  onLongPress = () => {},\n  children,\n  type = 'primary',\n  id,\n  className,\n  disabled = false,\n  ref = null,\n}: Props) {\n  const Component = getButtonByType(type);\n\n  const longPressEvent = useLongPress(onLongPress, 500);\n\n  return (\n    <Component\n      ref={ref}\n      disabled={disabled}\n      className={className}\n      id={id}\n      {...longPressEvent}\n      onClick={onClick}\n      fontColor={color}\n    >\n      {children}\n    </Component>\n  );\n}\n\ninterface StyledProps {\n  fontColor: Color;\n}\n\nconst PrimaryButton = styled.button`\n  padding: 10px;\n  margin: 10px;\n  background-color: ${({ fontColor }: StyledProps) => fontColor[500]};\n  border: 0;\n  border-radius: 8px;\n\n  /* border-radius: 7px; */\n  min-width: 100px;\n  color: ${theme.colors.grey[50]};\n  font-family: ${theme.fonts.primary};\n  font-size: 20px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  outline: none;\n\n  @media ${theme.breakpoints.belowTablet} {\n    font-size: 13px;\n    min-width: 60px;\n    margin: 5px;\n    padding: 10px 5px;\n  }\n\n  &:hover {\n    cursor: pointer;\n    background-color: ${({ fontColor }: StyledProps) => fontColor[700]};\n  }\n\n  &:active {\n    background-color: ${({ fontColor }: StyledProps) => fontColor[700]};\n    border: 0;\n  }\n\n  &:disabled {\n    background-color: ${({ fontColor }: StyledProps) => fontColor[200]};\n    &:hover {\n      cursor: unset;\n    }\n  }\n`;\n\nconst BigButton = styled(PrimaryButton)`\n  padding: 20px;\n  margin: 0;\n  font-size: 25px;\n  font-weight: 500;\n`;\n\nfunction getButtonByType(type: Props['type']) {\n  switch (type) {\n    case 'primary':\n      return PrimaryButton;\n\n    case 'big':\n      return BigButton;\n\n    default:\n      return PrimaryButton;\n  }\n}\n","import React from 'react';\nimport { useState, useEffect } from 'react';\n\nexport function useLongPress(\n  callback: (e: React.MouseEvent<HTMLButtonElement>) => void = () => {},\n  ms = 300,\n) {\n  const [startLongPress, setStartLongPress] = useState(false);\n  const [event, setEvent] = useState<any | null>(null);\n\n  useEffect(() => {\n    let timerId: NodeJS.Timeout;\n    if (startLongPress) {\n      timerId = setTimeout(() => callback(event), ms);\n    } else {\n      clearTimeout(timerId!);\n    }\n\n    return () => {\n      clearTimeout(timerId);\n    };\n  }, [callback, ms, startLongPress, event]);\n\n  return {\n    onMouseDown: (e: React.MouseEvent<HTMLButtonElement>) => {\n      e.persist();\n      setEvent(e);\n      setStartLongPress(true);\n    },\n    onMouseUp: () => setStartLongPress(false),\n    onMouseLeave: () => {\n      setEvent(null);\n      setStartLongPress(false);\n    },\n    onTouchStart: (e: React.TouchEvent<HTMLButtonElement>) => {\n      e.persist();\n      setEvent(e);\n      setStartLongPress(true);\n    },\n    onTouchEnd: () => {\n      setEvent(null);\n      setStartLongPress(false);\n    },\n  };\n}\n","import { Typography } from '@material-ui/core';\nimport React from 'react';\nimport styled, { css } from 'styled-components';\nimport { theme } from '../../utils/theme';\n\ninterface Props {\n  backgroundImage: string;\n  summary: string;\n  title: string;\n  actionComponent: JSX.Element;\n  className?: string;\n  rightImage: string;\n  reversed?: boolean;\n}\n\nexport const HeroSection = styled(\n  ({\n    className,\n    backgroundImage,\n    summary,\n    title,\n    actionComponent,\n    rightImage,\n    reversed,\n  }: Props) => {\n    return (\n      <Container className={className}>\n        <ImageBackground backgroundImage={backgroundImage} />\n        <Content reversed={reversed}>\n          <Left>\n            <Title>\n              <Typography align=\"center\" style={{ fontWeight: 600 }} variant=\"h4\">\n                {title}\n              </Typography>\n            </Title>\n            <Summary>\n              <Typography variant=\"h6\">{summary}</Typography>\n            </Summary>\n            <Actions>{actionComponent}</Actions>\n          </Left>\n          <Right>\n            <RightImage src={rightImage} />\n          </Right>\n        </Content>\n      </Container>\n    );\n  },\n)``;\n\nconst ImageBackground = styled.div<{ backgroundImage: string }>`\n  background-image: ${({ backgroundImage }) => css`url(${backgroundImage})`};\n  background-size: cover;\n  background-color: #cccccc;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n  filter: brightness(50%);\n`;\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst Content = styled.div<{ reversed?: boolean }>`\n  padding: 40px 40px;\n  display: flex;\n  flex-direction: ${({ reversed }) => (reversed ? 'row-reverse' : 'row')};\n`;\n\nconst Left = styled.div`\n  flex-basis: 50%;\n`;\n\nconst Right = styled.div`\n  flex-basis: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Summary = styled.div`\n  margin: 30px 0;\n  color: ${theme.colors.white};\n  max-width: 60%;\n`;\n\nconst Title = styled.div`\n  margin: 30px 0;\n  color: ${theme.colors.white};\n`;\n\nconst Actions = styled.div`\n  margin: 30px 0;\n`;\n\nconst RightImage = styled.img`\n  object-fit: cover;\n`;\n","import React from 'react';\n\n// @ts-ignore\nimport styled from 'styled-components';\nimport { AlioshaLink } from '../components/global/AlioshaLink';\nimport { Button } from '../components/global/Button';\nimport { HeroSection } from '../components/global/HeroSection';\nimport { routes } from './routes';\n\nexport function MainPage() {\n  const Link = ({ to }: { to: string }) => (\n    <AlioshaLink to={to}>\n      <Button type=\"big\">GO!</Button>\n    </AlioshaLink>\n  );\n  return (\n    <Container>\n      <HeroSection\n        reversed\n        backgroundImage=\"/images/hero2.jpg\"\n        summary={\n          'Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam facilis sapiente quibusdam eum magnam ab voluptatum officiis nemo obcaecati, quos sunt odio nisi maiores cumque, reprehenderit voluptatibus repellat aperiam. Laboriosam.'\n        }\n        title=\"Chords version 5 - play stop\"\n        rightImage=\"https://picsum.photos/500/300\"\n        actionComponent={<Link to={routes.chordsEditor} />}\n      />\n      <HeroSection\n        backgroundImage=\"/images/hero1.jpg\"\n        summary={\n          'Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam facilis sapiente quibusdam eum magnam ab voluptatum officiis nemo obcaecati, quos sunt odio nisi maiores cumque, reprehenderit voluptatibus repellat aperiam. Laboriosam.'\n        }\n        title=\"Melody\"\n        rightImage=\"https://picsum.photos/500/300\"\n        actionComponent={<Link to={routes.melodyEditor} />}\n      />\n      <HeroSection\n        reversed\n        backgroundImage=\"/images/hero3.jpg\"\n        summary={\n          'Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam facilis sapiente quibusdam eum magnam ab voluptatum officiis nemo obcaecati, quos sunt odio nisi maiores cumque, reprehenderit voluptatibus repellat aperiam. Laboriosam.'\n        }\n        title=\"MIDI\"\n        rightImage=\"https://picsum.photos/500/300\"\n        actionComponent={<Link to={routes.midiEditor} />}\n      />\n    </Container>\n  );\n}\n\nconst Container = styled.div``;\n","import { ChordModel, MajorChords, MinorChords, UnstableChords } from './all_chords_for_impro';\n\nexport default [\n  [\n    ['A', MinorChords.Minor, ['A', 'C', 'E'], ['B', 'D', 'E', 'F', 'G']],\n    ['A', MinorChords.M7, ['A', 'C', 'E', 'G'], ['B', 'D', 'E', 'F', 'G']],\n    ['A', UnstableChords.M9, ['A', 'C', 'E', 'G', 'B'], ['B', 'D', 'E', 'F', 'G']],\n    ['A', UnstableChords.Min7b5, ['A', 'C', 'D#', 'G'], ['B', 'D#', 'D', 'F', 'G']],\n    ['A', MinorChords.Madd9, ['A', 'C', 'E', 'G', 'B'], ['B', 'E', 'D', 'F', 'G']],\n    ['A', MajorChords.Major, ['A', 'C#', 'E'], ['B', 'E', 'D', 'F#', 'G#']],\n    ['A', UnstableChords.D7, ['A', 'C#', 'E', 'G'], ['B', 'E', 'D', 'F#', 'G']],\n    ['A', UnstableChords.D7b5, ['A', 'C#', 'D#', 'G'], ['B', 'E', 'D', 'F#', 'G']],\n    ['A', MajorChords.Maj7, ['A', 'C#', 'E', 'G#'], ['B', 'E', 'D', 'F#', 'G#']],\n    ['A', MajorChords.MajAdd9, ['A', 'C#', 'E', 'G#', 'B'], ['B', 'E', 'D', 'F#', 'G#']],\n    ['A', UnstableChords.Dim7, ['A', 'C', 'D#', 'F#'], ['A#', 'C', 'D#', 'D', 'F#', 'G']],\n    ['A', UnstableChords.Aug, ['A', 'C#', 'F'], ['A', 'C#', 'F']],\n  ],\n  [\n    ['A#', MinorChords.Minor, ['A#', 'C#', 'F'], ['C', 'D#', 'F', 'F#', 'G#']],\n    ['A#', MinorChords.M7, ['A#', 'C#', 'F', 'G#'], ['C', 'D#', 'F', 'F#', 'G#']],\n    ['A#', UnstableChords.M9, ['A#', 'C#', 'F', 'G#', 'C'], ['C', 'D#', 'F', 'F#', 'G#']],\n    ['A#', UnstableChords.Min7b5, ['A#', 'C#', 'E', 'G#'], ['C', 'E', 'D#', 'F#', 'G#']],\n    ['A#', MinorChords.Madd9, ['A#', 'C#', 'F', 'G#', 'C'], ['C', 'F', 'D#', 'F#', 'G#']],\n    ['A#', MajorChords.Major, ['A#', 'D', 'F'], ['C', 'F', 'D#', 'G', 'A']],\n    ['A#', UnstableChords.D7, ['A#', 'D', 'F', 'G#'], ['C', 'F', 'D#', 'G', 'G#']],\n    ['A#', UnstableChords.D7b5, ['A#', 'D', 'E', 'G#'], ['C', 'F', 'D#', 'G', 'G#']],\n    ['A#', MajorChords.Maj7, ['A#', 'D', 'F', 'A'], ['C', 'F', 'D#', 'G', 'A']],\n    ['A#', MajorChords.MajAdd9, ['A#', 'D', 'F', 'A', 'C'], ['C', 'F', 'D#', 'G', 'A']],\n    ['A#', UnstableChords.Dim7, ['A#', 'C#', 'E', 'G'], ['B', 'C#', 'E', 'D#', 'G', 'G#']],\n    ['A#', UnstableChords.Aug, ['A#', 'D', 'F#'], ['A#', 'D', 'F#']],\n  ],\n  [\n    ['B', MinorChords.Minor, ['B', 'D', 'F#'], ['C#', 'E', 'F#', 'G', 'A']],\n    ['B', MinorChords.M7, ['B', 'D', 'F#', 'A'], ['C#', 'E', 'F#', 'G', 'A']],\n    ['B', UnstableChords.M9, ['B', 'D', 'F#', 'A', 'C#'], ['C#', 'E', 'F#', 'G', 'A']],\n    ['B', UnstableChords.Min7b5, ['B', 'D', 'F', 'A'], ['C#', 'F', 'E', 'G', 'A']],\n    ['B', MinorChords.Madd9, ['B', 'D', 'F#', 'A', 'C#'], ['C#', 'F#', 'E', 'G', 'A']],\n    ['B', MajorChords.Major, ['B', 'D#', 'F#'], ['C#', 'F#', 'E', 'G#', 'A#']],\n    ['B', UnstableChords.D7, ['B', 'D#', 'F#', 'A'], ['C#', 'F#', 'E', 'G#', 'A']],\n    ['B', UnstableChords.D7b5, ['B', 'D#', 'F', 'A'], ['C#', 'F#', 'E', 'G#', 'A']],\n    ['B', MajorChords.Maj7, ['B', 'D#', 'F#', 'A#'], ['C#', 'F#', 'E', 'G#', 'A#']],\n    ['B', MajorChords.MajAdd9, ['B', 'D#', 'F#', 'A#', 'C#'], ['C#', 'F#', 'E', 'G#', 'A#']],\n    ['B', UnstableChords.Dim7, ['B', 'D', 'F', 'G#'], ['C', 'D', 'F', 'E', 'G#', 'A']],\n    ['B', UnstableChords.Aug, ['B', 'D#', 'G'], ['B', 'D#', 'G']],\n  ],\n  [\n    ['C', MinorChords.Minor, ['C', 'D#', 'G'], ['D', 'F', 'G', 'G#', 'A#']],\n    ['C', MinorChords.M7, ['C', 'D#', 'G', 'A#'], ['D', 'F', 'G', 'G#', 'A#']],\n    ['C', UnstableChords.M9, ['C', 'D#', 'G', 'A#', 'D'], ['D', 'F', 'G', 'G#', 'A#']],\n    ['C', UnstableChords.Min7b5, ['C', 'D#', 'F#', 'A#'], ['D', 'F#', 'F', 'G#', 'A#']],\n    ['C', MinorChords.Madd9, ['C', 'D#', 'G', 'A#', 'D'], ['D', 'G', 'F', 'G#', 'A#']],\n    ['C', MajorChords.Major, ['C', 'E', 'G'], ['D', 'G', 'F', 'A', 'B']],\n    ['C', UnstableChords.D7, ['C', 'E', 'G', 'A#'], ['D', 'G', 'F', 'A', 'A#']],\n    ['C', UnstableChords.D7b5, ['C', 'E', 'F#', 'A#'], ['D', 'G', 'F', 'A', 'A#']],\n    ['C', MajorChords.Maj7, ['C', 'E', 'G', 'B'], ['D', 'G', 'F', 'A', 'B']],\n    ['C', MajorChords.MajAdd9, ['C', 'E', 'G', 'B', 'D'], ['D', 'G', 'F', 'A', 'B']],\n    ['C', UnstableChords.Dim7, ['C', 'D#', 'F#', 'A'], ['C#', 'D#', 'F#', 'F', 'A', 'A#']],\n    ['C', UnstableChords.Aug, ['C', 'E', 'G#'], ['C', 'E', 'G#']],\n  ],\n  [\n    ['C#', MinorChords.Minor, ['C#', 'E', 'G#'], ['D#', 'F#', 'G#', 'A', 'B']],\n    ['C#', MinorChords.M7, ['C#', 'E', 'G#', 'B'], ['D#', 'F#', 'G#', 'A', 'B']],\n    ['C#', UnstableChords.M9, ['C#', 'E', 'G#', 'B', 'D#'], ['D#', 'F#', 'G#', 'A', 'B']],\n    ['C#', UnstableChords.Min7b5, ['C#', 'E', 'G', 'B'], ['D#', 'G', 'F#', 'A', 'B']],\n    ['C#', MinorChords.Madd9, ['C#', 'E', 'G#', 'B', 'D#'], ['D#', 'G#', 'F#', 'A', 'B']],\n    ['C#', MajorChords.Major, ['C#', 'F', 'G#'], ['D#', 'G#', 'F#', 'A#', 'C']],\n    ['C#', UnstableChords.D7, ['C#', 'F', 'G#', 'B'], ['D#', 'G#', 'F#', 'A#', 'B']],\n    ['C#', UnstableChords.D7b5, ['C#', 'F', 'G', 'B'], ['D#', 'G#', 'F#', 'A#', 'B']],\n    ['C#', MajorChords.Maj7, ['C#', 'F', 'G#', 'C'], ['D#', 'G#', 'F#', 'A#', 'C']],\n    ['C#', MajorChords.MajAdd9, ['C#', 'F', 'G#', 'C', 'D#'], ['D#', 'G#', 'F#', 'A#', 'C']],\n    ['C#', UnstableChords.Dim7, ['C#', 'E', 'G', 'A#'], ['D', 'E', 'G', 'F#', 'A#', 'B']],\n    ['C#', UnstableChords.Aug, ['C#', 'F', 'A'], ['C#', 'F', 'A']],\n  ],\n  [\n    ['D', MinorChords.Minor, ['D', 'F', 'A'], ['E', 'G', 'A', 'A#', 'C']],\n    ['D', MinorChords.M7, ['D', 'F', 'A', 'C'], ['E', 'G', 'A', 'A#', 'C']],\n    ['D', UnstableChords.M9, ['D', 'F', 'A', 'C', 'E'], ['E', 'G', 'A', 'A#', 'C']],\n    ['D', UnstableChords.Min7b5, ['D', 'F', 'G#', 'C'], ['E', 'G#', 'G', 'A#', 'C']],\n    ['D', MinorChords.Madd9, ['D', 'F', 'A', 'C', 'E'], ['E', 'A', 'G', 'A#', 'C']],\n    ['D', MajorChords.Major, ['D', 'F#', 'A'], ['E', 'A', 'G', 'B', 'C#']],\n    ['D', UnstableChords.D7, ['D', 'F#', 'A', 'C'], ['E', 'A', 'G', 'B', 'C']],\n    ['D', UnstableChords.D7b5, ['D', 'F#', 'G#', 'C'], ['E', 'A', 'G', 'B', 'C']],\n    ['D', MajorChords.Maj7, ['D', 'F#', 'A', 'C#'], ['E', 'A', 'G', 'B', 'C#']],\n    ['D', MajorChords.MajAdd9, ['D', 'F#', 'A', 'C#', 'E'], ['E', 'A', 'G', 'B', 'C#']],\n    ['D', UnstableChords.Dim7, ['D', 'F', 'G#', 'B'], ['D#', 'F', 'G#', 'G', 'B', 'C']],\n    ['D', UnstableChords.Aug, ['D', 'F#', 'A#'], ['D', 'F#', 'A#']],\n  ],\n  [\n    ['D#', MinorChords.Minor, ['D#', 'F#', 'A#'], ['F', 'G#', 'A#', 'B', 'C#']],\n    ['D#', MinorChords.M7, ['D#', 'F#', 'A#', 'C#'], ['F', 'G#', 'A#', 'B', 'C#']],\n    ['D#', UnstableChords.M9, ['D#', 'F#', 'A#', 'C#', 'F'], ['F', 'G#', 'A#', 'B', 'C#']],\n    ['D#', UnstableChords.Min7b5, ['D#', 'F#', 'A', 'C#'], ['F', 'A', 'G#', 'B', 'C#']],\n    ['D#', MinorChords.Madd9, ['D#', 'F#', 'A#', 'C#', 'F'], ['F', 'A#', 'G#', 'B', 'C#']],\n    ['D#', MajorChords.Major, ['D#', 'G', 'A#'], ['F', 'A#', 'G#', 'C', 'D']],\n    ['D#', UnstableChords.D7, ['D#', 'G', 'A#', 'C#'], ['F', 'A#', 'G#', 'C', 'C#']],\n    ['D#', UnstableChords.D7b5, ['D#', 'G', 'A', 'C#'], ['F', 'A#', 'G#', 'C', 'C#']],\n    ['D#', MajorChords.Maj7, ['D#', 'G', 'A#', 'D'], ['F', 'A#', 'G#', 'C', 'D']],\n    ['D#', MajorChords.MajAdd9, ['D#', 'G', 'A#', 'D', 'F'], ['F', 'A#', 'G#', 'C', 'D']],\n    ['D#', UnstableChords.Dim7, ['D#', 'F#', 'A', 'C'], ['E', 'F#', 'A', 'G#', 'C', 'C#']],\n    ['D#', UnstableChords.Aug, ['D#', 'G', 'B'], ['D#', 'G', 'B']],\n  ],\n  [\n    ['E', MinorChords.Minor, ['E', 'G', 'B'], ['F#', 'A', 'B', 'C', 'D']],\n    ['E', MinorChords.M7, ['E', 'G', 'B', 'D'], ['F#', 'A', 'B', 'C', 'D']],\n    ['E', UnstableChords.M9, ['E', 'G', 'B', 'D', 'F#'], ['F#', 'A', 'B', 'C', 'D']],\n    ['E', UnstableChords.Min7b5, ['E', 'G', 'A#', 'D'], ['F#', 'A#', 'A', 'C', 'D']],\n    ['E', MinorChords.Madd9, ['E', 'G', 'B', 'D', 'F#'], ['F#', 'B', 'A', 'C', 'D']],\n    ['E', MajorChords.Major, ['E', 'G#', 'B'], ['F#', 'B', 'A', 'C#', 'D#']],\n    ['E', UnstableChords.D7, ['E', 'G#', 'B', 'D'], ['F#', 'B', 'A', 'C#', 'D']],\n    ['E', UnstableChords.D7b5, ['E', 'G#', 'A#', 'D'], ['F#', 'B', 'A', 'C#', 'D']],\n    ['E', MajorChords.Maj7, ['E', 'G#', 'B', 'D#'], ['F#', 'B', 'A', 'C#', 'D#']],\n    ['E', MajorChords.MajAdd9, ['E', 'G#', 'B', 'D#', 'F#'], ['F#', 'B', 'A', 'C#', 'D#']],\n    ['E', UnstableChords.Dim7, ['E', 'G', 'A#', 'C#'], ['F', 'G', 'A#', 'A', 'C#', 'D']],\n    ['E', UnstableChords.Aug, ['E', 'G#', 'C'], ['E', 'G#', 'C']],\n  ],\n  [\n    ['F', MinorChords.Minor, ['F', 'G#', 'C'], ['G', 'A#', 'C', 'C#', 'D#']],\n    ['F', MinorChords.M7, ['F', 'G#', 'C', 'D#'], ['G', 'A#', 'C', 'C#', 'D#']],\n    ['F', UnstableChords.M9, ['F', 'G#', 'C', 'D#', 'G'], ['G', 'A#', 'C', 'C#', 'D#']],\n    ['F', UnstableChords.Min7b5, ['F', 'G#', 'B', 'D#'], ['G', 'B', 'A#', 'C#', 'D#']],\n    ['F', MinorChords.Madd9, ['F', 'G#', 'C', 'D#', 'G'], ['G', 'C', 'A#', 'C#', 'D#']],\n    ['F', MajorChords.Major, ['F', 'A', 'C'], ['G', 'C', 'A#', 'D', 'E']],\n    ['F', UnstableChords.D7, ['F', 'A', 'C', 'D#'], ['G', 'C', 'A#', 'D', 'D#']],\n    ['F', UnstableChords.D7b5, ['F', 'A', 'B', 'D#'], ['G', 'C', 'A#', 'D', 'D#']],\n    ['F', MajorChords.Maj7, ['F', 'A', 'C', 'E'], ['G', 'C', 'A#', 'D', 'E']],\n    ['F', MajorChords.MajAdd9, ['F', 'A', 'C', 'E', 'G'], ['G', 'C', 'A#', 'D', 'E']],\n    ['F', UnstableChords.Dim7, ['F', 'G#', 'B', 'D'], ['F#', 'G#', 'B', 'A#', 'D', 'D#']],\n    ['F', UnstableChords.Aug, ['F', 'A', 'C#'], ['F', 'A', 'C#']],\n  ],\n  [\n    ['F#', MinorChords.Minor, ['F#', 'A', 'C#'], ['G#', 'B', 'C#', 'D', 'E']],\n    ['F#', MinorChords.M7, ['F#', 'A', 'C#', 'E'], ['G#', 'B', 'C#', 'D', 'E']],\n    ['F#', UnstableChords.M9, ['F#', 'A', 'C#', 'E', 'G#'], ['G#', 'B', 'C#', 'D', 'E']],\n    ['F#', UnstableChords.Min7b5, ['F#', 'A', 'C', 'E'], ['G#', 'C', 'B', 'D', 'E']],\n    ['F#', MinorChords.Madd9, ['F#', 'A', 'C#', 'E', 'G#'], ['G#', 'C#', 'B', 'D', 'E']],\n    ['F#', MajorChords.Major, ['F#', 'A#', 'C#'], ['G#', 'C#', 'B', 'D#', 'F']],\n    ['F#', UnstableChords.D7, ['F#', 'A#', 'C#', 'E'], ['G#', 'C#', 'B', 'D#', 'E']],\n    ['F#', UnstableChords.D7b5, ['F#', 'A#', 'C', 'E'], ['G#', 'C#', 'B', 'D#', 'E']],\n    ['F#', MajorChords.Maj7, ['F#', 'A#', 'C#', 'F'], ['G#', 'C#', 'B', 'D#', 'F']],\n    ['F#', MajorChords.MajAdd9, ['F#', 'A#', 'C#', 'F', 'G#'], ['G#', 'C#', 'B', 'D#', 'F']],\n    ['F#', UnstableChords.Dim7, ['F#', 'A', 'C', 'D#'], ['G', 'A', 'C', 'B', 'D#', 'E']],\n    ['F#', UnstableChords.Aug, ['F#', 'A#', 'D'], ['F#', 'A#', 'D']],\n  ],\n  [\n    ['G', MinorChords.Minor, ['G', 'A#', 'D'], ['A', 'C', 'D', 'D#', 'F']],\n    ['G', MinorChords.M7, ['G', 'A#', 'D', 'F'], ['A', 'C', 'D', 'D#', 'F']],\n    ['G', UnstableChords.M9, ['G', 'A#', 'D', 'F', 'A'], ['A', 'C', 'D', 'D#', 'F']],\n    ['G', UnstableChords.Min7b5, ['G', 'A#', 'C#', 'F'], ['A', 'C#', 'C', 'D#', 'F']],\n    ['G', MinorChords.Madd9, ['G', 'A#', 'D', 'F', 'A'], ['A', 'D', 'C', 'D#', 'F']],\n    ['G', MajorChords.Major, ['G', 'B', 'D'], ['A', 'D', 'C', 'E', 'F#']],\n    ['G', UnstableChords.D7, ['G', 'B', 'D', 'F'], ['A', 'D', 'C', 'E', 'F']],\n    ['G', UnstableChords.D7b5, ['G', 'B', 'C#', 'F'], ['A', 'D', 'C', 'E', 'F']],\n    ['G', MajorChords.Maj7, ['G', 'B', 'D', 'F#'], ['A', 'D', 'C', 'E', 'F#']],\n    ['G', MajorChords.MajAdd9, ['G', 'B', 'D', 'F#', 'A'], ['A', 'D', 'C', 'E', 'F#']],\n    ['G', UnstableChords.Dim7, ['G', 'A#', 'C#', 'E'], ['G#', 'A#', 'C#', 'C', 'E', 'F']],\n    ['G', UnstableChords.Aug, ['G', 'B', 'D#'], ['G', 'B', 'D#']],\n  ],\n  [\n    ['G#', MinorChords.Minor, ['G#', 'B', 'D#'], ['A#', 'C#', 'D#', 'E', 'F#']],\n    ['G#', MinorChords.M7, ['G#', 'B', 'D#', 'F#'], ['A#', 'C#', 'D#', 'E', 'F#']],\n    ['G#', UnstableChords.M9, ['G#', 'B', 'D#', 'F#', 'A#'], ['A#', 'C#', 'D#', 'E', 'F#']],\n    ['G#', UnstableChords.Min7b5, ['G#', 'B', 'D', 'F#'], ['A#', 'D', 'C#', 'E', 'F#']],\n    ['G#', MinorChords.Madd9, ['G#', 'B', 'D#', 'F#', 'A#'], ['A#', 'D#', 'C#', 'E', 'F#']],\n    ['G#', MajorChords.Major, ['G#', 'C', 'D#'], ['A#', 'D#', 'C#', 'F', 'G']],\n    ['G#', UnstableChords.D7, ['G#', 'C', 'D#', 'F#'], ['A#', 'D#', 'C#', 'F', 'F#']],\n    ['G#', UnstableChords.D7b5, ['G#', 'C', 'D', 'F#'], ['A#', 'D#', 'C#', 'F', 'F#']],\n    ['G#', MajorChords.Maj7, ['G#', 'C', 'D#', 'G'], ['A#', 'D#', 'C#', 'F', 'G']],\n    ['G#', MajorChords.MajAdd9, ['G#', 'C', 'D#', 'G', 'A#'], ['A#', 'D#', 'C#', 'F', 'G']],\n    ['G#', UnstableChords.Dim7, ['G#', 'B', 'D', 'F'], ['A', 'B', 'D', 'C#', 'F', 'F#']],\n    ['G#', UnstableChords.Aug, ['G#', 'C', 'E'], ['G#', 'C', 'E']],\n  ],\n] as ChordModel[][];\n","const NOTE_MODES = {\r\n  dorian: [\"C\", \"D\", \"Eb\", \"F\", \"G\", \"A\", \"Bb\"],\r\n  frigyan: [\"C\", \"Db\", \"Eb\", \"F\", \"G\", \"Ab\", \"Bb\"],\r\n  balkanMinor: [\"C\", \"D\", \"Eb\", \"F#\", \"G\", \"A\", \"Bb\"],\r\n  naturalMajor: [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"],\r\n  naturalMinor: [\"C\", \"D\", \"Eb\", \"F\", \"G\", \"Ab\", \"Bb\"]\r\n};\r\n\r\nconst DURATIONS = [\"1\", \"2\", \"4\", \"8\", \"16\"];\r\n\r\nconst TONALITY_SCALES = [\r\n  [\"Am/C\", [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\"]],\r\n  [\"G#Abm/B\", [\"G#Ab\", \"A#Bb\", \"B\", \"C#Db\", \"D#Eb\", \"E\", \"F#Gb\"]],\r\n  [\"Bm/D\", [\"B\", \"C#Db\", \"D\", \"E\", \"F#Gb\", \"G\", \"A\"]],\r\n  [\"A#Bbm/C#Db\", [\"A#Bb\", \"C\", \"С#Db\", \"D#Eb\", \"F\", \"F#Gb\", \"G#Ab\"]],\r\n  [\"Cm/D#Eb\", [\"C\", \"D\", \"D#Eb\", \"F\", \"G\", \"G#Ab\", \"A#Bb\"]],\r\n  [\"C#Dbm/E\", [\"C#Db\", \"D#Eb\", \"E\", \"F#Gb\", \"G#AB\", \"A\", \"B\"]],\r\n  [\"Dm/F\", [\"D\", \"E\", \"F\", \"G\", \"A\", \"A#Bb\", \"C\"]],\r\n  [\"Em/G\", [\"E\", \"F#Gb\", \"G\", \"A\", \"B\", \"C\", \"D\"]],\r\n  [\"D#Ebm/F#Gb\", [\"D#Eb\", \"F\", \"F#Gb\", \"G#Ab\", \"A#Bb\", \"B\", \"C#Db\"]],\r\n  [\"Fm/G#Ab\", [\"F\", \"G\", \"G#Ab\", \"A#Bb\", \"C\", \"C#Db\", \"D#Eb\"]],\r\n  [\"F#Gbm/A\", [\"F#Gb\", \"G#AB\", \"A\", \"B\", \"C#Db\", \"D\", \"E\"]],\r\n  [\"Gm/A#Bb\", [\"G\", \"A\", \"A#Bb\", \"C\", \"D\", \"D#Eb\", \"F\"]],\r\n  [\"G#m/B\", [\"G#AB\", \"A#Bb\", \"B\", \"C#Db\", \"D#Eb\", \"E\", \"F#Gb\"]]\r\n];\r\n\r\nconst NOTES_MAP = [\r\n  \"A\",\r\n  \"A#Bb\",\r\n  \"B\",\r\n  \"C\",\r\n  \"C#Db\",\r\n  \"D\",\r\n  \"D#Eb\",\r\n  \"E\",\r\n  \"F\",\r\n  \"F#Gb\",\r\n  \"G\",\r\n  \"G#Ab\"\r\n];\r\n\r\nconst NOTES_MAP_SOLO = [\r\n  \"A\",\r\n  \"A#\",\r\n  \"B\",\r\n  \"C\",\r\n  \"C#\",\r\n  \"D\",\r\n  \"D#\",\r\n  \"E\",\r\n  \"F\",\r\n  \"F#\",\r\n  \"G\",\r\n  \"G#\"\r\n];\r\n\r\nexport { TONALITY_SCALES, NOTES_MAP, DURATIONS, NOTE_MODES, NOTES_MAP_SOLO };\r\n","import { SolidNotes, DotNotes } from './../dataset/all_chords_for_impro';\r\nimport { NOTES_MAP_SOLO } from '../dataset/dataset';\r\nimport { ChordModel, ChordType, NotesLengthType } from '../dataset/all_chords_for_impro';\r\n\r\nimport chordsForImpro from '../dataset/all_chords';\r\n\r\nfunction randomIntegerRange(min: number, max: number) {\r\n  return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nexport const sortChordsByType = (types: ChordType[], chords: ChordModel[]) => {\r\n  return chords.filter((chord) => types.includes(chord[1]));\r\n};\r\n\r\nconst chordStringToFullChord = (chordName: string) => {\r\n  const chordKeyMood = convertChordStringToArr(chordName);\r\n  return findNotes(chordKeyMood[0], 0, chordKeyMood[1]);\r\n};\r\n\r\nconst isChordsEqual = (chord1: ChordModel, chord2: ChordModel) => {\r\n  return chord1[0] === chord2[0] && chord1[1] === chord2[1];\r\n};\r\n\r\nfunction chordNamesToFullArr(chordNames: string[]) {\r\n  const chordsArrs = chordNames.map((chordString) => convertChordStringToArr(chordString));\r\n  const fullChordsArr = chordsArrs.map((chordsArr) => findNotes(chordsArr[0], 0, chordsArr[1]));\r\n  return fullChordsArr;\r\n}\r\n\r\nfunction findNotes(tone: string, step: number, type: ChordModel[1]) {\r\n  const keyChords: ChordModel[] = chordsForImpro.find(\r\n    (tonica) => tonica[0][0] === transposeNote(tone, step, NOTES_MAP_SOLO)\r\n  )!;\r\n\r\n  return keyChords.find((chord: ChordModel) => chord[1] === type)!;\r\n}\r\n\r\nfunction convertChordStringToArr(chord: string) {\r\n  let tone;\r\n  let chordFunction;\r\n  if (chord[1] === '#') {\r\n    tone = chord.slice(0, 2);\r\n    chordFunction = chord.slice(2);\r\n  } else {\r\n    tone = chord.slice(0, 1);\r\n    chordFunction = chord.slice(1);\r\n  }\r\n\r\n  return [tone, chordFunction] as { 0: ChordModel[0]; 1: ChordModel[1] };\r\n}\r\n\r\nconst convertChordToString = (chord: ChordModel) => {\r\n  return `${chord[0]}${chord[1]}`;\r\n};\r\n\r\nconst shortNotes = [\r\n  SolidNotes.Quarter,\r\n  SolidNotes.Quarter,\r\n  DotNotes.Eight,\r\n  SolidNotes.Eight,\r\n  SolidNotes.Eight,\r\n  SolidNotes.Sixteen,\r\n];\r\nconst longNotes = [DotNotes.Half, SolidNotes.Half, SolidNotes.Half];\r\n\r\nconst getTermsFromArrToSum = (\r\n  array: number[],\r\n  target: number,\r\n  partial: number[],\r\n  count?: number\r\n): number[] | undefined => {\r\n  array = array.sort((a, b) => a - b);\r\n  const sum = partial.reduce((acc, cur) => acc + cur, 0);\r\n  const rand = array[Math.floor(Math.random() * array.length)];\r\n  const result = [...partial, rand];\r\n\r\n  if (count) {\r\n    if (sum + rand === target && result.length >= count) {\r\n      return result;\r\n    }\r\n    if (sum + rand === target && result.length < count) {\r\n      return getTermsFromArrToSum(array, target, partial.slice(0, partial.length - 2), count);\r\n    }\r\n  } else if (sum + rand === target) {\r\n    return result;\r\n  }\r\n\r\n  if (sum + rand > target) {\r\n    return getTermsFromArrToSum(array.slice(0, array.indexOf(rand)), target, partial, count);\r\n  }\r\n\r\n  if (sum + rand < target) {\r\n    return getTermsFromArrToSum(array, target, result, count);\r\n  }\r\n};\r\nconst getTermsFromArrToSumSimple = (\r\n  array: number[],\r\n  target: number,\r\n  partial: number[]\r\n): number[] | undefined => {\r\n  array = array.sort((a, b) => a - b);\r\n  const sum = partial.reduce((acc, cur) => acc + cur, 0);\r\n  const rand = array[Math.floor(Math.random() * array.length)];\r\n  const result = [...partial, rand];\r\n\r\n  if (sum + rand === target) {\r\n    return result;\r\n  }\r\n\r\n  if (array.length === 0) {\r\n    return getTermsFromArrToSumSimple(\r\n      getDursByNotesLengthType(NotesLengthType.Middle),\r\n      target,\r\n      partial.slice(0, partial.length - 1)\r\n    );\r\n  }\r\n\r\n  if (sum + rand > target) {\r\n    return getTermsFromArrToSumSimple(array.slice(0, array.indexOf(rand)), target, partial);\r\n  }\r\n\r\n  if (sum + rand < target) {\r\n    return getTermsFromArrToSumSimple(array, target, result);\r\n  }\r\n  return result;\r\n};\r\n\r\nconst isInChordsArray = (chordsArr: ChordModel[], chord: ChordModel) => {\r\n  for (let index = 0; index < chordsArr.length; index++) {\r\n    const chordElement = chordsArr[index];\r\n    if (chordElement[0] === chord[0] && chordElement[1] === chord[1]) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst getDursByNotesLengthType = (notesLengthType: NotesLengthType) => {\r\n  switch (notesLengthType) {\r\n    case NotesLengthType.Often:\r\n      return [2, 4, 8, 8, 8, 16];\r\n    case NotesLengthType.Middle:\r\n      return [\r\n        DotNotes.Half,\r\n        SolidNotes.Half,\r\n        SolidNotes.Half,\r\n        SolidNotes.Half,\r\n        DotNotes.Quarter,\r\n        SolidNotes.Quarter,\r\n        SolidNotes.Quarter,\r\n        SolidNotes.Quarter,\r\n        // DotNotes.Eight,\r\n        SolidNotes.Eight,\r\n        SolidNotes.Eight,\r\n        SolidNotes.Eight,\r\n        // SolidNotes.Sixteen,\r\n      ];\r\n    case NotesLengthType.Seldom:\r\n      return [1, 1, 2, 2, 2, 4];\r\n    case NotesLengthType.VeryOften:\r\n      return [8, 16];\r\n    case NotesLengthType.VerySeldom:\r\n      return [1, 2];\r\n    case NotesLengthType.Whole:\r\n      return [1];\r\n    case NotesLengthType.Half:\r\n      return [2];\r\n    case NotesLengthType.Quarter:\r\n      return [4];\r\n    case NotesLengthType.Eight:\r\n      return [8];\r\n    case NotesLengthType.Sixteen:\r\n      return [16];\r\n\r\n    case NotesLengthType.Lyric:\r\n      return [\r\n        DotNotes.Half,\r\n        SolidNotes.Half,\r\n        SolidNotes.Half,\r\n        DotNotes.Quarter,\r\n        SolidNotes.Quarter,\r\n        SolidNotes.Quarter,\r\n        DotNotes.Eight,\r\n        SolidNotes.Eight,\r\n        SolidNotes.Eight,\r\n        SolidNotes.Sixteen,\r\n      ];\r\n\r\n    default:\r\n      return [8];\r\n  }\r\n};\r\n\r\nfunction createDurMeasure(notesLengthType: NotesLengthType, sum = 1) {\r\n  let result = getTermsFromArrToSumSimple(getDursByNotesLengthType(notesLengthType), sum, []);\r\n  return result;\r\n}\r\n\r\nfunction createDurMeasureByCount(notesLengthType: NotesLengthType, count: number) {\r\n  let result = getTermsFromArrToSum(getDursByNotesLengthType(notesLengthType), 1, [], count);\r\n  return result;\r\n}\r\n\r\nfunction transposeNote(note: string, step: number, notesMap: string[]) {\r\n  let indexOfNote = notesMap.indexOf(note);\r\n  if (step < 0) {\r\n    step = notesMap.length - step;\r\n  }\r\n  return notesMap[(indexOfNote + step) % notesMap.length];\r\n}\r\n\r\nexport {\r\n  transposeNote,\r\n  randomIntegerRange,\r\n  createDurMeasure,\r\n  createDurMeasureByCount,\r\n  convertChordStringToArr,\r\n  findNotes,\r\n  chordNamesToFullArr,\r\n  convertChordToString,\r\n  chordStringToFullChord,\r\n  isInChordsArray,\r\n  isChordsEqual,\r\n};\r\n","import { intersectionWith, uniqWith } from 'lodash';\r\nimport {\r\n  ChordModel,\r\n  ChordRelease,\r\n  MajorChords,\r\n  MinorChords,\r\n  UnstableChords,\r\n} from '../dataset/all_chords_for_impro';\r\nimport { convertChordToString, findNotes, isChordsEqual } from '../utils';\r\n\r\nexport const getReleasesByType = (\r\n  step: number,\r\n  type: MajorChords.Major | MinorChords.Minor\r\n): ChordRelease[] => {\r\n  switch (type) {\r\n    case MajorChords.Major:\r\n      return Object.values(MajorChords).map((type) => [step, type]);\r\n\r\n    case MinorChords.Minor:\r\n      return Object.values(MinorChords).map((type) => [step, type]);\r\n\r\n    default:\r\n      return Object.values(MinorChords).map((type) => [step, type]);\r\n  }\r\n};\r\n\r\nexport const getAllReleaserable = (target: ChordModel) => {\r\n  const results = getReleaserablesByChordType(target[1]).map((release) =>\r\n    findNotes(target[0], release[0], release[1])\r\n  );\r\n\r\n  return results;\r\n};\r\n\r\nexport const getAllReleaserablesForTonality = (toneChord: ChordModel) => {\r\n  const releases = getChordsReleasesForTonality(toneChord);\r\n\r\n  return releases.map((release) => findNotes(toneChord[0], release[0], release[1]));\r\n};\r\n\r\nexport const getAllReleases = (target: ChordModel) => {\r\n  const results = getReleasesByChordType(target[1]).map((release) =>\r\n    findNotes(target[0], release[0], release[1])\r\n  );\r\n  return results;\r\n};\r\n\r\nexport const getAllReleasesForReplace = (chord: ChordModel) => {};\r\n\r\nexport const searchItemsForReplace = (previousChord: ChordModel, nextChord: ChordModel) => {\r\n  const previous = getAllReleases(previousChord);\r\n\r\n  const next = getAllReleaserable(nextChord);\r\n\r\n  var common = intersectionWith(previous, next, (a, b) => a[0] === b[0] && a[1] === b[1]);\r\n  return common;\r\n};\r\n\r\nexport const getReleasesByChordType = (type: ChordModel[1]): ChordRelease[] => {\r\n  switch (type) {\r\n    case UnstableChords.D7:\r\n      return [\r\n        [5, MinorChords.M7],\r\n        [5, MinorChords.Minor],\r\n        [5, MajorChords.Major],\r\n        [5, MajorChords.Maj7],\r\n        [2, MinorChords.Minor],\r\n        [2, MinorChords.M7],\r\n      ];\r\n\r\n    case UnstableChords.D7b5:\r\n      return [\r\n        [5, MinorChords.M7],\r\n        [5, MinorChords.Minor],\r\n        [5, MajorChords.Major],\r\n        [5, MajorChords.Maj7],\r\n        [2, MinorChords.Minor],\r\n        [2, MinorChords.M7],\r\n        [11, MinorChords.M7],\r\n        [11, MajorChords.Maj7],\r\n      ];\r\n\r\n    case UnstableChords.Aug:\r\n      return [\r\n        [0, MajorChords.Major],\r\n        [1, MinorChords.Minor],\r\n        [8, MajorChords.Major],\r\n        [8, UnstableChords.D7],\r\n        [5, MinorChords.Minor],\r\n        [5, MajorChords.Major],\r\n        [9, MinorChords.Minor],\r\n      ];\r\n\r\n    case UnstableChords.Dim7:\r\n      return [\r\n        [1, MajorChords.Maj7],\r\n        [3, UnstableChords.Dim7],\r\n        [4, MinorChords.M7],\r\n        [7, MajorChords.Maj7],\r\n        [10, MinorChords.Minor],\r\n      ];\r\n\r\n    case MinorChords.Minor:\r\n    case MinorChords.M7:\r\n    case 'm9':\r\n    case MinorChords.Madd9:\r\n      return [\r\n        [2, UnstableChords.D7],\r\n        [3, MajorChords.Maj7],\r\n        [5, MinorChords.M7],\r\n        [7, UnstableChords.D7],\r\n        [7, MinorChords.M7],\r\n        [8, MajorChords.Maj7],\r\n        [10, MajorChords.Major],\r\n        [11, UnstableChords.Aug],\r\n      ];\r\n\r\n    case UnstableChords.Min7b5:\r\n      return [\r\n        [0, UnstableChords.Dim7],\r\n        [10, MinorChords.Minor],\r\n        [10, MinorChords.M7],\r\n        [2, UnstableChords.D7],\r\n        [5, UnstableChords.D7],\r\n        [9, UnstableChords.Dim7],\r\n      ];\r\n\r\n    case MajorChords.Maj7:\r\n    case MajorChords.Major:\r\n    case MajorChords.MajAdd9:\r\n      return [\r\n        [0, UnstableChords.Aug],\r\n        [2, MinorChords.Minor],\r\n        [2, UnstableChords.D7],\r\n        [4, MinorChords.M7],\r\n        [5, MajorChords.Maj7],\r\n        [5, UnstableChords.Dim7],\r\n        [7, UnstableChords.D7],\r\n        [9, MinorChords.M7],\r\n        [11, UnstableChords.Min7b5],\r\n      ];\r\n\r\n    default:\r\n      console.log('Return releases for major chord, because chord type is unknown: ', type);\r\n\r\n      return [\r\n        [0, UnstableChords.Aug],\r\n        [2, MinorChords.Minor],\r\n        [2, UnstableChords.D7],\r\n        [4, MinorChords.M7],\r\n        [5, MajorChords.Maj7],\r\n        [5, UnstableChords.Dim7],\r\n        [7, UnstableChords.D7],\r\n        [9, MinorChords.M7],\r\n        [11, UnstableChords.Min7b5],\r\n      ];\r\n  }\r\n};\r\n\r\nexport const getReleaserablesByChordType = (type: ChordModel[1]): ChordRelease[] => {\r\n  switch (type) {\r\n    case UnstableChords.D7:\r\n      return [\r\n        [5, MinorChords.Minor],\r\n        [5, MajorChords.Major],\r\n        [5, MajorChords.Maj7],\r\n        [5, MinorChords.Madd9],\r\n        [5, MajorChords.MajAdd9],\r\n        [1, UnstableChords.Dim7],\r\n      ];\r\n\r\n    case UnstableChords.D7b5:\r\n      return [\r\n        [1, MinorChords.M7],\r\n        [1, UnstableChords.Dim7],\r\n        [7, UnstableChords.D7],\r\n        [7, UnstableChords.Dim7],\r\n      ];\r\n\r\n    case UnstableChords.Aug:\r\n      return [\r\n        [0, MajorChords.Major],\r\n        [0, MajorChords.Maj7],\r\n        [1, MinorChords.Minor],\r\n        [1, MinorChords.M7],\r\n        [5, MinorChords.Minor],\r\n        [5, MinorChords.M7],\r\n        [8, MajorChords.Major],\r\n        [8, MajorChords.Maj7],\r\n      ];\r\n\r\n    case UnstableChords.Dim7:\r\n      return [\r\n        [3, UnstableChords.Dim7],\r\n        [11, UnstableChords.D7b5],\r\n        [10, MinorChords.Minor],\r\n        [10, MinorChords.M7],\r\n        [10, MajorChords.Major],\r\n        [10, MajorChords.Maj7],\r\n        [7, MajorChords.Maj7],\r\n        [7, MinorChords.Minor],\r\n        [7, MajorChords.Major],\r\n        [7, MinorChords.Madd9],\r\n        [7, MajorChords.MajAdd9],\r\n      ];\r\n\r\n    case MinorChords.Minor:\r\n    case MinorChords.M7:\r\n    case UnstableChords.M9:\r\n    case MinorChords.Madd9:\r\n      return [\r\n        [1, UnstableChords.D7b5],\r\n        [2, UnstableChords.Dim7],\r\n        [7, MinorChords.Minor],\r\n        [7, MinorChords.M7],\r\n        [7, UnstableChords.D7],\r\n        [9, UnstableChords.Min7b5],\r\n        [11, UnstableChords.Dim7],\r\n        [11, UnstableChords.Aug],\r\n      ];\r\n\r\n    case UnstableChords.Min7b5:\r\n      return [\r\n        [10, MinorChords.Minor],\r\n        [10, MinorChords.M7],\r\n        [10, MinorChords.Madd9],\r\n        [1, MajorChords.Major],\r\n        [1, MajorChords.Maj7],\r\n        [1, MajorChords.MajAdd9],\r\n        [11, MajorChords.Major],\r\n        [11, MajorChords.Maj7],\r\n        [11, MajorChords.MajAdd9],\r\n      ];\r\n\r\n    case MajorChords.Maj7:\r\n    case MajorChords.Major:\r\n    case MajorChords.MajAdd9:\r\n      return [\r\n        [1, UnstableChords.Min7b5],\r\n        [7, MajorChords.Major],\r\n        [7, UnstableChords.D7],\r\n        [11, UnstableChords.Dim7],\r\n        [2, UnstableChords.Dim7],\r\n        [1, UnstableChords.D7b5],\r\n      ];\r\n\r\n    default:\r\n      console.log('Return releases for major chord, because chord type is unknown: ', type);\r\n\r\n      return [\r\n        [1, UnstableChords.Min7b5],\r\n        [7, MajorChords.Major],\r\n        [7, UnstableChords.D7],\r\n        [11, UnstableChords.Dim7],\r\n        [2, UnstableChords.Dim7],\r\n        [1, UnstableChords.D7b5],\r\n      ];\r\n  }\r\n};\r\n\r\nexport const getChordsForChords = (chords: ChordModel[], count = -2): any => {\r\n  const arr = chords.slice(count).map((chord) => detectTonalitiesByChord(chord));\r\n\r\n  const toneChords = intersectionWith(arr[0], arr[1], isChordsEqual);\r\n  if (toneChords.length > 1) {\r\n    return getChordsForChords(chords, --count);\r\n  }\r\n\r\n  const resultChords = toneChords.map((chord) => {\r\n    const releases = getChordsReleasesForTonality(chord);\r\n    return releases.map((release) => findNotes(chord[0], release[0], release[1]));\r\n  });\r\n\r\n  const uniqueChords = uniqWith(resultChords.flat(), isChordsEqual);\r\n  return uniqueChords;\r\n};\r\n\r\nconst detectTonalitiesByChord = (chord: ChordModel): ChordModel[] => {\r\n  let releases: ChordRelease[] = [];\r\n  if (Object.values(MajorChords).includes(chord[1] as any)) {\r\n    releases = [\r\n      [0, MajorChords.Major],\r\n      [5, MajorChords.Major],\r\n      [7, MajorChords.Major],\r\n      [9, MinorChords.Minor],\r\n      [2, MinorChords.Minor],\r\n      [4, MinorChords.Minor],\r\n    ];\r\n  } else if (Object.values(MinorChords).includes(chord[1] as any)) {\r\n    releases = [\r\n      [3, MajorChords.Major],\r\n      [8, MajorChords.Major],\r\n      [10, MajorChords.Major],\r\n      [0, MinorChords.Minor],\r\n      [5, MinorChords.Minor],\r\n      [7, MinorChords.Minor],\r\n    ];\r\n  } else if (chord[1] === UnstableChords.D7 || chord[1] === UnstableChords.D7b5) {\r\n    releases = [\r\n      [5, MajorChords.Major],\r\n      [5, MinorChords.Minor],\r\n    ];\r\n  } else if (chord[1] === UnstableChords.Dim7) {\r\n    releases = [\r\n      [1, MajorChords.Major],\r\n      [10, MinorChords.Minor],\r\n      [7, MinorChords.Minor],\r\n      [7, MajorChords.Major],\r\n    ];\r\n  } else if (chord[1] === UnstableChords.Aug) {\r\n    releases = [\r\n      [0, MajorChords.Major],\r\n      [1, MinorChords.Minor],\r\n    ];\r\n  }\r\n\r\n  return releases.map((release) => findNotes(chord[0], release[0], release[1]));\r\n};\r\n\r\nconst getChordsReleasesForTonality = (chord: ChordModel): ChordRelease[] => {\r\n  switch (chord[1]) {\r\n    case MinorChords.Minor:\r\n    case MinorChords.M7:\r\n    case UnstableChords.M9:\r\n    case MinorChords.Madd9:\r\n      return [\r\n        [0, MinorChords.Minor],\r\n        [0, MinorChords.M7],\r\n        [0, MinorChords.Madd9],\r\n        [2, UnstableChords.Min7b5],\r\n        [2, UnstableChords.Dim7],\r\n        ...getReleasesByType(3, MajorChords.Major),\r\n        ...getReleasesByType(5, MinorChords.Minor),\r\n        [7, UnstableChords.D7],\r\n        [7, UnstableChords.D7b5],\r\n        ...getReleasesByType(8, MajorChords.Major),\r\n        ...getReleasesByType(10, MajorChords.Major),\r\n        [10, UnstableChords.D7],\r\n        [11, UnstableChords.Dim7],\r\n      ];\r\n\r\n    case MajorChords.Major:\r\n    case MajorChords.Maj7:\r\n    case MajorChords.MajAdd9:\r\n      return [\r\n        [0, MajorChords.Major],\r\n        [0, MajorChords.Maj7],\r\n        [0, MajorChords.MajAdd9],\r\n        [2, UnstableChords.Dim7],\r\n        ...getReleasesByType(2, MinorChords.Minor),\r\n        ...getReleasesByType(4, MinorChords.Minor),\r\n        ...getReleasesByType(5, MajorChords.Major),\r\n        [7, UnstableChords.D7],\r\n        [7, MajorChords.Major],\r\n        [7, UnstableChords.D7b5],\r\n        ...getReleasesByType(9, MinorChords.Minor),\r\n        [11, UnstableChords.Min7b5],\r\n        [11, UnstableChords.Dim7],\r\n      ];\r\n\r\n    default:\r\n      console.log('Return releases for major chord, because chord type is unknown: ', chord);\r\n\r\n      return [];\r\n  }\r\n};\r\n","import { ChordModel } from '../dataset/all_chords_for_impro';\r\nimport ALL_CHORDS_FOR_IMPROVISE from '../dataset/all_chords';\r\nimport { isInChordsArray, randomIntegerRange } from '../utils';\r\nimport {\r\n  getAllReleaserablesForTonality,\r\n  getAllReleaserable,\r\n  getAllReleases,\r\n} from './releaserUtils';\r\n\r\nexport default class MidiChordsCreator {\r\n  chords: ChordModel[];\r\n  constructor() {\r\n    this.chords = [];\r\n  }\r\n\r\n  generateChords(all_chords: ChordModel[][], count: number, startChord?: ChordModel) {\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n      const releases = getAllReleases(result[i - 1]);\r\n\r\n      const releaseChord = releases[randomIntegerRange(0, releases?.length)];\r\n      if (releaseChord) {\r\n        result.push(releaseChord);\r\n      } else {\r\n        let randChord;\r\n        if (startChord) {\r\n          randChord = startChord;\r\n        } else {\r\n          const randTone = all_chords[randomIntegerRange(0, all_chords.length)];\r\n          randChord = randTone[randomIntegerRange(0, randTone.length)];\r\n        }\r\n        result.push(randChord);\r\n      }\r\n    }\r\n    return result.slice(0, count);\r\n  }\r\n\r\n  generateRandomCyclicChords = (\r\n    all_chords: ChordModel[][],\r\n    count: number,\r\n    startChord?: ChordModel,\r\n    partial: ChordModel[] = []\r\n  ): ChordModel[] | undefined => {\r\n    if (!startChord && !(typeof all_chords[0][0] === 'string')) {\r\n      const randTone = all_chords[randomIntegerRange(0, all_chords.length)];\r\n      const chordsOk = [0, 1, 2, 4, 5, 8, 9];\r\n      let randChord = randTone[chordsOk[randomIntegerRange(0, chordsOk.length)]];\r\n      startChord = randChord;\r\n    }\r\n\r\n    const releasersForStartChord = getAllReleaserable(startChord!);\r\n    let result = [...partial];\r\n\r\n    if (!result.length) {\r\n      result.push(startChord!);\r\n    }\r\n\r\n    if (partial.length === count) {\r\n      return partial;\r\n    }\r\n\r\n    const releases = getAllReleases(result[result.length - 1]);\r\n    const releaseChord = releases[randomIntegerRange(0, releases?.length)];\r\n\r\n    if (releaseChord) {\r\n      const test = this.generateRandomCyclicChords(all_chords, count, startChord, [\r\n        ...result,\r\n        releaseChord,\r\n      ]);\r\n\r\n      if (\r\n        test &&\r\n        test.length === count &&\r\n        isInChordsArray(releasersForStartChord, test[test?.length - 1])\r\n      ) {\r\n        return test;\r\n      } else if (result.length > 1) {\r\n        return this.generateRandomCyclicChords(\r\n          all_chords,\r\n          count,\r\n          startChord,\r\n          result.slice(0, result.length - 3)\r\n        );\r\n      } else {\r\n        return this.generateRandomCyclicChords(all_chords, count, startChord, [startChord!]);\r\n      }\r\n    } else {\r\n      result.pop();\r\n      return this.generateRandomCyclicChords(all_chords, count, startChord, [...result]);\r\n    }\r\n  };\r\n\r\n  getRandomChords(count: number, startChord?: ChordModel) {\r\n    const chords = this.generateChords(ALL_CHORDS_FOR_IMPROVISE, count, startChord);\r\n    return chords;\r\n  }\r\n\r\n  getRandomCyclicChords(count: number, startChord?: ChordModel) {\r\n    const chords = this.generateRandomCyclicChords(ALL_CHORDS_FOR_IMPROVISE, count, startChord);\r\n    return chords;\r\n  }\r\n\r\n  // getNewCyclicChordsForTonality(count: number, startChord: ChordModel) {\r\n  //   const allChords = getAllReleaserablesForTonality(startChord);\r\n\r\n  //   const chords = this.generateCyclicChords(allChords, count, startChord);\r\n  //   return chords;\r\n  // }\r\n\r\n  getChords() {\r\n    return this.chords;\r\n  }\r\n}\r\n","import { theme } from './../utils/theme';\nexport const isMobile = () => {\n  if (!window || !window.matchMedia) {\n  }\n\n  const mediaQueryList = window.matchMedia(theme.breakpoints.belowMobile);\n\n  if (mediaQueryList.matches) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const isTablet = () => {\n  if (!window || !window.matchMedia) {\n  }\n\n  const lessTabletQueryList = window.matchMedia(theme.breakpoints.belowTabletM);\n  const aboveMobileQueryList = window.matchMedia(`(min-width: 601px)`);\n\n  if (lessTabletQueryList.matches && aboveMobileQueryList.matches) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const isSmallLaptop = () => {\n  if (!window || !window.matchMedia) {\n  }\n\n  const lessTabletQueryList = window.matchMedia(theme.breakpoints.belowLaptopL);\n  const aboveMobileQueryList = window.matchMedia(`(min-width: 926px)`);\n\n  if (lessTabletQueryList.matches && aboveMobileQueryList.matches) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const getDevice = () => {\n  if (isMobile()) {\n    return 'mobile';\n  }\n\n  if (isTablet()) {\n    return 'tablet';\n  }\n\n  if (isSmallLaptop()) {\n    return 'smallLaptop';\n  }\n\n  return 'desktop';\n};\n","import { DotNotes } from './../dataset/all_chords_for_impro';\nimport { getDevice } from '../styled/utils';\nimport { PartNote, ChordModel, SolidNotes } from '../dataset/all_chords_for_impro';\nimport Vex from 'vexflow';\nimport { convertChordToString } from '../utils';\nconst VF = Vex.Flow;\n\nconst getBarsPerLine = (): 4 | 3 | 2 | 1 => {\n  const device = getDevice();\n\n  switch (device) {\n    case 'desktop':\n      return 4;\n\n    case 'smallLaptop':\n      return 3;\n\n    case 'tablet':\n      return 2;\n\n    case 'mobile':\n      return 1;\n\n    default:\n      return 4;\n  }\n};\n\nexport class VexFlowController {\n  ref: any;\n  renderer: Vex.Flow.Renderer;\n  barsPerLine = 4;\n  lineHeight = 150;\n  lineWidth = 300;\n  context: Vex.IRenderContext;\n\n  constructor(ref: any) {\n    this.ref = ref;\n    this.renderer = new VF.Renderer(this.ref?.current!, VF.Renderer.Backends.SVG);\n    this.context = this.renderer.getContext();\n    this.context.setFont('Arial', 10).setBackgroundFillStyle('#eed');\n    this.barsPerLine = getBarsPerLine();\n  }\n\n  drawAll = (notes: PartNote[][], chords?: ChordModel[]) => {\n    this.drawStaveLines(notes, chords);\n  };\n\n  clear = () => {\n    this.context.clear();\n  };\n\n  drawStaveLines = (bars: PartNote[][], chords?: ChordModel[]) => {\n    if (bars.length) {\n      this.context.clear();\n    }\n    const barsVexflow = bars.map((bar, idx) => {\n      const vexflowBar = this.convertToVexflow(bar);\n      if (chords) {\n        return this.addChordName(vexflowBar, chords[idx]);\n      } else return vexflowBar;\n    });\n    const staveLines = Math.ceil(barsVexflow.length / this.barsPerLine);\n\n    this.renderer.resize(this.lineWidth * this.barsPerLine, staveLines * this.lineHeight);\n\n    for (let staveLineNumber = 0; staveLineNumber < staveLines; staveLineNumber++) {\n      barsVexflow\n        .slice(\n          staveLineNumber * this.barsPerLine,\n          staveLineNumber * this.barsPerLine + this.barsPerLine\n        )\n        .forEach((bar, barNumber) => this.drawStaveLineBar(bar, barNumber, staveLineNumber));\n    }\n  };\n\n  drawStaveLineBar = (bar: Vex.Flow.StaveNote[], barNumber: number, staveLineNumber: number) => {\n    const stave = new Vex.Flow.Stave(\n      barNumber * this.lineWidth,\n      staveLineNumber * this.lineHeight,\n      this.lineWidth\n    );\n\n    if (barNumber === 0) {\n      stave.addClef('treble').setContext(this.context).draw();\n      Vex.Flow.Formatter.FormatAndDraw(this.context, stave, bar, true);\n    } else {\n      Vex.Flow.Formatter.FormatAndDraw(this.context, stave, bar, true);\n      stave.setContext(this.context).draw();\n    }\n  };\n\n  convertToVexflow = (notes: PartNote[]) => {\n    return notes.map((partNote, idx) => {\n      const noteWithDur = this.getVexflowDuration(partNote);\n      const dot = noteWithDur.dot;\n      const rest = partNote.rest;\n      const octave = partNote.note[partNote.note.length - 1];\n\n      const accidental = partNote.note.slice(0, -1).length > 1;\n\n      const vexflowNote = new Vex.Flow.StaveNote({\n        keys: [rest ? 'B/4' : `${partNote.note[0]}/${octave}`],\n        duration: rest ? noteWithDur.dur + 'r' : noteWithDur.dur,\n      });\n\n      if (dot) {\n        vexflowNote.addDotToAll();\n      }\n\n      if (accidental) {\n        !rest && vexflowNote.addAccidental(0, new Vex.Flow.Accidental('#'));\n      }\n\n      if (partNote.lyric) {\n        const lyricMod = this.getLyricModifier(partNote.lyric);\n        vexflowNote.addModifier(0, lyricMod);\n      }\n\n      return vexflowNote;\n    });\n  };\n\n  addChordName = (notes: Vex.Flow.StaveNote[], chord: ChordModel) => {\n    return notes.map((note, idx) => {\n      if (idx === 0) {\n        note.addModifier(\n          0,\n          new VF.Annotation(convertChordToString(chord))\n            .setVerticalJustification(1)\n            .setFont('Sans-serif', 16, '600')\n        );\n      }\n\n      return note;\n    });\n  };\n\n  getLyricModifier = (lyric: string) => {\n    const lyricMod = new VF.Annotation(lyric)\n      .setVerticalJustification(3)\n      .setFont('Sans-serif', 11, '400');\n\n    return lyricMod;\n  };\n\n  getVexflowDuration = (partNote: PartNote) => {\n    switch (partNote.dur) {\n      case SolidNotes.Double:\n        return { ...partNote, dur: '1' };\n      case SolidNotes.Whole:\n        return { ...partNote, dur: '1' };\n      case SolidNotes.Half:\n        return { ...partNote, dur: '2' };\n      case SolidNotes.Quarter:\n        return { ...partNote, dur: '4' };\n      case SolidNotes.Eight:\n        return { ...partNote, dur: '8' };\n      case SolidNotes.Sixteen:\n        return { ...partNote, dur: '16' };\n      case DotNotes.Eight:\n        return { ...partNote, dur: '8', dot: true };\n      case DotNotes.Half:\n        return { ...partNote, dur: '2', dot: true };\n      case DotNotes.Quarter:\n        return { ...partNote, dur: '4', dot: true };\n      default:\n        return partNote.dur;\n    }\n  };\n}\n","import { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { ChordModel, PartNote } from '../../dataset/all_chords_for_impro';\nimport { VexFlowController } from '../../musicViews/VexFlowController';\n\ninterface Props {\n  bars: PartNote[][];\n  chords?: ChordModel[];\n  backgroundColor?: string;\n}\n\nexport const SheetStave = ({ bars, chords, backgroundColor }: Props) => {\n  const ref = useRef(null);\n  const [staves, setStaves] = useState<VexFlowController | null>(null);\n\n  useEffect(() => {\n    if (staves && bars.length > 0) {\n      staves.drawAll(bars, chords);\n    } else {\n      staves?.clear();\n    }\n  }, [bars, chords, staves]);\n\n  useEffect(() => {\n    if (ref.current && !staves) {\n      setStaves(new VexFlowController(ref));\n    }\n  }, [staves]);\n\n  return (\n    <Container>\n      <StaveContainer backgroundColor={backgroundColor}>\n        <div className={bars.length > 0 ? 'stave' : ''} ref={ref} id='vf'></div>\n      </StaveContainer>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  margin: 0;\n`;\n\nconst StaveContainer = styled.div<{ backgroundColor?: string }>`\n  display: flex;\n  justify-content: center;\n\n  .stave {\n    background-color: ${({ backgroundColor }) => (backgroundColor ? backgroundColor : 'unset')};\n    padding: 20px;\n\n    overflow-x: auto;\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n    -ms-overflow-style: none; /* IE and Edge */\n    scrollbar-width: none; /* Firefox */\n  }\n`;\n","import styled from 'styled-components';\nimport { theme } from '../utils/theme';\n\nexport const StyledProgressionContainer = styled.div``;\n\nexport const StyledProgression = styled.div`\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  .list {\n    display: grid;\n    grid-template-columns: 105px 105px 105px 105px;\n\n    @media ${theme.breakpoints.belowTablet} {\n      grid-template-columns: 70px 70px 70px 70px;\n    }\n  }\n\n  .item-enter {\n    opacity: 0;\n    transform: translateY(100%);\n  }\n  .item-enter-active {\n    opacity: 1;\n    transform: translateY(0%);\n    transition: transform 100ms ease-in, opacity 200ms ease-in;\n  }\n  .item-exit {\n    opacity: 1;\n    transform: translateY(0%);\n  }\n  .item-exit-active {\n    opacity: 0;\n    transform: translateY(100%);\n    transition: transform 100ms ease-in, opacity 200ms ease-in;\n  }\n`;\n","import { Typography } from '@material-ui/core';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { ChordModel } from '../../dataset/all_chords_for_impro';\nimport { convertChordToString } from '../../utils';\nimport { StyledProgressionContainer, StyledProgression } from '../../styled/Chords';\nimport { Button } from './Button';\nimport { theme } from '../../utils/theme';\n\ninterface Props {\n  chords: ChordModel[];\n  title?: string | JSX.Element;\n  action?: any;\n  onChordClick?: (chord: ChordModel) => void;\n  selectedChord?: number;\n}\n\nexport const ChordsProgression = ({\n  chords,\n  title,\n  action,\n  onChordClick,\n  selectedChord,\n}: Props) => {\n  return (\n    <StyledProgressionContainer>\n      <Header>\n        {!!title && typeof title === 'string' && (\n          <Typography className='title' variant='h6'>\n            {title}\n          </Typography>\n        )}\n        {!!title && typeof title !== 'string' && title}\n        {!!action && action}\n      </Header>\n\n      <StyledProgression>\n        <div className='list'>\n          {chords.map((chord, idx) => (\n            <Button\n              onClick={onChordClick ? () => onChordClick(chord) : undefined}\n              key={idx}\n              className='chord'\n              color={idx === selectedChord ? theme.colors.blue : undefined}\n            >\n              {convertChordToString(chord)}\n            </Button>\n          ))}\n        </div>\n      </StyledProgression>\n    </StyledProgressionContainer>\n  );\n};\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n","import { Typography } from '@material-ui/core';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { theme } from '../../utils/theme';\n\nexport const PageTitle = styled(({ title, className }: { title: string; className?: string }) => (\n  <Typography className={className} variant=\"h5\">\n    {title}\n  </Typography>\n))`\n  color: ${theme.colors.black};\n  text-align: center;\n`;\n","import { FormControl, IconButton, TextField } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport Dialog from '@material-ui/core/Dialog';\nimport { Button as MatButton } from '@material-ui/core';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Icon } from '../global/Icon';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { theme } from '../../utils/theme';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\ninterface Props {\n  onSave: (title: string) => void;\n  title: string;\n  disabled?: boolean;\n  iconColor?: string;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      '& label.Mui-focused': {\n        color: 'white',\n      },\n      '&.Mui-focused fieldset': {\n        borderColor: 'white',\n      },\n      '& .MuiInput-underline:after': {\n        borderBottomColor: 'white',\n      },\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      width: '100%',\n    },\n  })\n);\n\nexport const SaveModal = ({ onSave, disabled, title, iconColor = theme.colors.black }: Props) => {\n  const classes = useStyles();\n  const [isOpen, setIsOpen] = useState(false);\n  const [titleValue, setTitleValue] = useState('');\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const saveAndClose = () => {\n    onSave(titleValue);\n    handleClose();\n  };\n\n  return (\n    <Container>\n      <IconButton\n        disabled={disabled}\n        onClick={() => setIsOpen(true)}\n        className='icon'\n        edge='start'\n        aria-label='menu'\n      >\n        <Icon\n          type='material'\n          Icon={SaveIcon}\n          disabled={disabled}\n          fill={iconColor}\n          className='icon'\n        />\n      </IconButton>\n      <Dialog open={isOpen} onClose={handleClose}>\n        <DialogTitle>{title}</DialogTitle>\n        <DialogContent>\n          <form className={classes.container} onSubmit={() => saveAndClose()}>\n            <FormControl className={classes.formControl}>\n              <TextField\n                id='standard-basic'\n                autoFocus\n                label='Title'\n                value={titleValue}\n                onChange={(e) => setTitleValue(e.target.value)}\n              />\n            </FormControl>\n          </form>\n        </DialogContent>\n        <DialogActions>\n          <MatButton onClick={handleClose} color='inherit'>\n            Cancel\n          </MatButton>\n          <MatButton\n            type='submit'\n            onClick={(e) => {\n              e.preventDefault();\n              saveAndClose();\n            }}\n            color='inherit'\n          >\n            Ok\n          </MatButton>\n        </DialogActions>\n      </Dialog>\n    </Container>\n  );\n};\n\nconst Container = styled.div``;\n","import React from \"react\";\nimport { SaveModal } from \"../../components/global/SaveModal\";\nimport { ChordModel, PartNote } from \"../../dataset/all_chords_for_impro\";\nimport { saveMelody } from \"../../localStorageUtils/melodiesStorage\";\nimport { theme } from \"../../utils/theme\";\n\nexport const SaveMelodiesModal = ({\n  melody,\n  chords,\n}: {\n  melody: PartNote[][];\n  chords: ChordModel[];\n}) => {\n  const saveAndClose = (title: string) => {\n    saveMelody(melody, chords, title);\n  };\n\n  return (\n    <SaveModal\n      title=\"Set name of the new hit\"\n      onSave={saveAndClose}\n      disabled={!melody?.length}\n      iconColor={theme.colors.black}\n    />\n  );\n};\n","import { ChordModel, PartNote } from './../dataset/all_chords_for_impro';\nimport {\n  clearStorage,\n  getStorage,\n  removeItemById,\n  SavedMelodies,\n  saveItem,\n  StorageNames,\n} from './storagesController';\n\nexport const saveMelody = (addedChords: PartNote[][], chords: ChordModel[], title: string) => {\n  saveItem({ melody: addedChords, chords: chords }, StorageNames.Melodies, title);\n};\n\nexport const clearMelody = () => {\n  clearStorage(StorageNames.Melodies);\n};\n\nexport const removeMelodyById = (id: string) => {\n  removeItemById(id, StorageNames.Melodies);\n};\n\nexport const getSavedMelodies = (): SavedMelodies[] => {\n  return getStorage<SavedMelodies>(StorageNames.Melodies);\n};\n","import React from 'react';\nimport MUCheckbox from '@material-ui/core/Checkbox';\nimport { FormControlLabel, FormGroup, makeStyles } from '@material-ui/core';\nimport { theme } from '../../utils/theme';\n\ninterface Props {\n  onChange: (value: boolean) => void;\n  value: boolean;\n  className?: string;\n  label: string | JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {},\n  icon: {},\n  'MuiSvgIcon-root': {\n    fill: theme.colors.primary,\n  },\n});\n\nexport const Checkbox = ({ onChange, value, className, label }: Props) => {\n  const classes = useStyles();\n  return (\n    <FormGroup row>\n      <FormControlLabel\n        // style={{ color: theme.colors.white }}\n        control={\n          <MUCheckbox\n            style={{ color: theme.colors.black }}\n            className={classes.root + ' ' + className}\n            checked={value}\n            onChange={(e, checked) => onChange(checked)}\n            color=\"primary\"\n            inputProps={{ 'aria-label': 'checkbox with default color' }}\n          />\n        }\n        label={label}\n      />\n    </FormGroup>\n  );\n};\n","import { IconButton } from '@material-ui/core';\nimport React from 'react';\nimport { theme } from '../../utils/theme';\nimport { Icon } from './Icon';\nimport StopIcon from '@material-ui/icons/Stop';\n\ninterface Props {\n  handlePlaying: () => void;\n  isPlaying: boolean;\n  iconColor?: string;\n}\n\nexport const PlayStopButton = ({\n  handlePlaying,\n  isPlaying,\n  iconColor = theme.colors.black,\n}: Props) => {\n  return (\n    <IconButton onClick={handlePlaying} className=\"icon\">\n      {isPlaying ? (\n        <Icon type=\"material\" fill={iconColor} Icon={StopIcon} className=\"play-icon\" />\n      ) : (\n        <Icon type=\"play\" fill={iconColor} className=\"play-icon\" />\n      )}\n    </IconButton>\n  );\n};\n","import { ChordModel, MidiNote, PartNote } from '../dataset/all_chords_for_impro';\n\ninterface Note {\n  note: 'C' | 'C#' | 'D' | 'D#' | 'E' | 'F' | 'F#' | 'G' | 'G#' | 'A' | 'A#' | 'B';\n}\n\nexport const instruments = [4];\nconst voiceInstrument = instruments[0];\nexport class MidiPlayer {\n  playRef: any;\n  bpm: number = 80;\n  timeout: NodeJS.Timeout | null;\n\n  constructor(playRef: any, bpm: number) {\n    this.playRef = playRef;\n    this.bpm = bpm;\n\n    if (this.playRef.current) {\n      this.playRef.current?.setBand256(-5);\n      this.playRef.current?.setBand512(-5);\n    }\n  }\n\n  convertNoteToMidiPitch = (noteNameStr: string, isRest?: boolean) => {\n    if (typeof noteNameStr === 'number') {\n      return noteNameStr;\n    }\n    if (isRest) {\n      return -100;\n    }\n    const notesDictionary = {\n      C: 0,\n      'C#': 1,\n      D: 2,\n      'D#': 3,\n      E: 4,\n      F: 5,\n      'F#': 6,\n      G: 7,\n      'G#': 8,\n      A: 9,\n      'A#': 10,\n      B: 11,\n    };\n\n    const note = notesDictionary[noteNameStr.slice(0, noteNameStr.length - 1) as Note['note']];\n    const octave = +noteNameStr[noteNameStr.length - 1];\n    const c = 24;\n    const result = c + (octave - 1) * 12 + note;\n    return result;\n  };\n\n  convertPartNotesPartToMidiPitches = (notes: PartNote[]): MidiNote[] => {\n    return notes.map((note) => {\n      const midiNote = {\n        note: this.convertNoteToMidiPitch(note.note, note.rest),\n        dur: note.dur,\n      };\n\n      return midiNote;\n    });\n  };\n\n  playPartChords = (chords: ChordModel[], onEnd?: () => void, notesPerBar: number = 4) => {\n    const part = chords.map((chord) => this.getNotesForChord(chord, notesPerBar)).flat();\n\n    this.playPart(part, onEnd, undefined, 4);\n  };\n\n  getNotesForChord = (chord: ChordModel, notesPerBar: number = 4): PartNote[] => {\n    let notes: string[] = [];\n    if (chord[2].length === 3) {\n      notes = [...chord[2], chord[2][1], ...chord[2], chord[2][1]].slice(0, notesPerBar);\n    }\n\n    if (chord[2].length === 4) {\n      notes = [...chord[2], ...chord[2]].slice(0, notesPerBar);\n    }\n\n    if (chord[2].length === 5) {\n      notes = [\n        chord[2][0],\n        chord[2][1],\n        chord[2][3],\n        chord[2][4],\n        chord[2][0],\n        chord[2][1],\n        chord[2][3],\n        chord[2][4],\n      ].slice(0, notesPerBar);\n    }\n\n    return notes.map((note, index) => ({\n      note: getOctaveForGuitar(note, index),\n      dur: (1 / notesPerBar) as PartNote['dur'],\n    }));\n  };\n\n  getPartLength = (part?: PartNote[] | null, chords?: ChordModel[]): number => {\n    let length = 0;\n    let partToCalculate;\n\n    if (part) {\n      partToCalculate = part;\n    }\n\n    if (chords) {\n      partToCalculate = chords.map((chord) => this.getNotesForChord(chord, 4)).flat();\n    }\n\n    var bpm = this.bpm;\n    var N = (4 * 60) / bpm;\n\n    if (!partToCalculate) {\n      return 0;\n    }\n\n    for (let note of partToCalculate) {\n      const bpmDur = N * note.dur;\n      length += bpmDur;\n    }\n\n    return length;\n  };\n\n  playPart = (\n    part: PartNote[],\n    onEnd?: () => void,\n    newBpm?: number,\n    instrument = voiceInstrument\n  ) => {\n    var bpm = newBpm || this.bpm;\n    var N = (4 * 60) / bpm;\n    let length = 0;\n\n    const midipart = this.convertPartNotesPartToMidiPitches(part);\n    let when = this.playRef.current?.contextTime();\n    for (let note of midipart) {\n      const bpmDur = N * note.dur;\n      this.playRef.current?.playChordAt(when, instrument, [note.note], bpmDur);\n      // this.playRef.current?.playChordAt(when, 4, [note.note], bpmDur);\n      when += bpmDur;\n      length += bpmDur;\n    }\n\n    if (onEnd) {\n      this.timeout = setTimeout(onEnd, length * 1000);\n    }\n  };\n\n  playChord = (chord: ChordModel, time = 0) => {\n    const notes = chord[2].map((note, index) =>\n      this.convertNoteToMidiPitch(getOctaveForGuitar(note, index))\n    );\n\n    this.playRef.current?.playStrumUpNow(4, notes, 1);\n  };\n\n  stopAll = () => {\n    this.playRef?.current?.cancelQueue();\n\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = null;\n    }\n  };\n}\n\nconst getOctaveForGuitar = (note: string, index: number) => {\n  switch (index) {\n    case 0:\n      return note + '2';\n\n    case 1:\n    case 2:\n      return note + '3';\n\n    case 3:\n    case 4:\n    case 5:\n      return note + '4';\n\n    default:\n      return note + '3';\n  }\n};\n","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport { instruments, MidiPlayer } from './MidiPlayer';\n// @ts-ignore\nimport MIDISounds from 'midi-sounds-react';\nimport styled from 'styled-components';\nimport { settingsStore } from '../context/SettingsProvider';\n\nexport const useMidiPlayer = (setIsPlaying?: (bool: boolean) => void) => {\n  const {\n    state: { bpm },\n  } = useContext(settingsStore);\n\n  const [midiPlayer, setMidiPlayer] = useState<MidiPlayer | null>(null);\n\n  const playerRef = useRef(null);\n\n  const MPlayer = (\n    <Container>\n      <MIDISounds ref={playerRef} appElementName=\"root\" instruments={instruments} />\n    </Container>\n  );\n\n  useEffect(() => {\n    if (midiPlayer) {\n      setIsPlaying && setIsPlaying(false);\n      midiPlayer.stopAll();\n    }\n    setMidiPlayer(new MidiPlayer(playerRef, bpm));\n  }, [bpm]);\n\n  return { Player: midiPlayer, MPlayer };\n};\n\nconst Container = styled.div`\n  .MIDISounds {\n    display: none;\n  }\n`;\n","import React, { useContext, useState } from \"react\";\n\nimport { ChordModel, PartNote } from \"../dataset/all_chords_for_impro\";\nimport { useMidiPlayer } from \"../utils/useMidiPlayer\";\n\nimport { settingsStore } from \"../context/SettingsProvider\";\n\ninterface Props {\n  part?: PartNote[][];\n  chords?: ChordModel[];\n  onPlay?: (chords?: ChordModel[], part?: PartNote[][]) => void;\n  onStop?: (chords?: ChordModel[], part?: PartNote[][]) => void;\n}\n\nexport const usePlayMelodyAndChords = ({\n  part,\n  chords,\n  onPlay,\n  onStop,\n}: Props) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const { Player, MPlayer } = useMidiPlayer(setIsPlaying);\n\n  const {\n    state: { playAccompanimentWithMelody, notesCountToPlayForChord },\n  } = useContext(settingsStore);\n\n  const playPart = (chords?: ChordModel[], part?: PartNote[][]) => {\n    setIsPlaying(true);\n\n    if ((chords && part && playAccompanimentWithMelody) || (chords && !part)) {\n      Player?.playPartChords(\n        chords,\n        () => setIsPlaying(false),\n        notesCountToPlayForChord\n      );\n    }\n    if (part) {\n      Player?.playPart(part.flat(), () => setIsPlaying(false));\n    }\n  };\n\n  const stopAll = () => {\n    setIsPlaying(false);\n    Player?.stopAll();\n  };\n\n  const handlePlaying = () => {\n    if (!isPlaying) {\n      playPart(chords, part);\n\n      if (onPlay) {\n        onPlay(chords, part);\n      }\n    } else {\n      stopAll();\n\n      if (onStop) {\n        onStop(chords, part);\n      }\n    }\n  };\n\n  return {\n    handlePlaying,\n    MPlayer,\n    isPlaying,\n    Player,\n    playPart,\n    stopAll,\n  };\n};\n","import React, { useState } from 'react';\nimport { TextField, withStyles } from '@material-ui/core';\nimport styled from 'styled-components';\nimport { Button } from '../global/Button';\nimport { theme } from '../../utils/theme';\n\nconst CssTextField = withStyles({\n  root: {\n    padding: '0 10px',\n    '& label.Mui-focused': {\n      color: theme.colors.bluePurple[700],\n    },\n    '& label': {\n      color: theme.colors.grey[500],\n      padding: '0 10px',\n    },\n    '& .MuiInput-underline:after': {\n      borderBottomColor: 'green',\n    },\n    '& .MuiFormControl-root .MuiFormLabel-root': {\n      border: '1px solid red',\n    },\n    '& .MuiOutlinedInput-root': {\n      color: theme.colors.black,\n      '&::placeholder': {\n        color: theme.colors.bluePurple[500],\n      },\n      '& fieldset': {\n        borderColor: theme.colors.bluePurple[500],\n      },\n      '&:hover fieldset': {\n        borderColor: theme.colors.bluePurple[200],\n      },\n      '&.Mui-focused fieldset': {\n        borderColor: theme.colors.bluePurple[700],\n      },\n    },\n  },\n})(TextField);\n\ninterface Props {\n  onSubmit: (text: string) => void;\n}\n\nexport const TextSplitter = ({ onSubmit }: Props) => {\n  const [lyric, setLyric] = useState(\n    // 'Two roads diverged in a yellow wood,\\nAnd sorry I could not travel both\\nAnd be one traveler, long I stood\\nAnd looked down one as far as I could',\n    'Падымi мяне па-над зямлею\\nПадымi мяне ў сьветлы абшар\\nПадымi мяне над мiтусьнею\\nПадымi мяне паветраны шар.'\n  );\n\n  const submit = (lyric: string) => {\n    if (lyric) {\n      onSubmit(lyric);\n    }\n  };\n\n  const onChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n  ) => {\n    e.preventDefault();\n    setLyric(e.target.value);\n  };\n\n  return (\n    <Container>\n      <CssTextField\n        id='outlined-multiline-flexible'\n        label='Lyric (English, Russian or Belarussian)'\n        multiline\n        rowsMax={4}\n        value={lyric}\n        onChange={onChange}\n        variant='outlined'\n        className='lyric-input'\n      />\n      <Button onClick={() => submit(lyric)}>Ok</Button>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  @media ${theme.breakpoints.belowMobile} {\n    width: 100%;\n  }\n\n  .lyric-input {\n    min-width: 400px;\n\n    &.MuiOutlinedInput-root {\n      fieldset {\n        border-color: ${theme.colors.bluePurple[500]};\n      }\n      &:hover fieldset {\n        border-color: 'yellow';\n      }\n      &.Mui-focused fieldset {\n        border-color: 'green';\n      }\n    }\n\n    @media ${theme.breakpoints.belowMobile} {\n      min-width: unset;\n      width: 100%;\n    }\n  }\n`;\n","const vowels = /[аеёиоуыэюяіi]/gi;\nconst deaf = 'длкпстфхцчшщўДЛКПСТФХЦЧШЩЎ';\nconst signs = ['ь', 'ъ', 'Ь', 'Ъ', \"'\"];\nconst voiced = ['м', 'р', 'л', 'н', 'М', 'Р', 'Л', 'Н'];\n\nconst splitLines = (source) => {\n  return source.split('\\n');\n};\n\nconst splitWords = (source) => {\n  return source.split(' ');\n};\n\nconst addSyllable = (collection, syllable) => {\n  collection.push(syllable);\n};\n\nconst indexSign = (letters) => {\n  let index = -1;\n  signs.some((letter) => {\n    index = letters.indexOf(letter);\n    return index !== -1;\n  });\n  return index;\n};\n\nconst indexYoy = (letters, nextLetter) => {\n  const index = letters.indexOf('й');\n\n  if (index !== -1) {\n    return index;\n  }\n  return -1;\n};\n\nconst indexSonoric = (letters) => {\n  let index = -1;\n\n  voiced.some((letter) => {\n    index = letters.indexOf(letter);\n    return index !== -1;\n  });\n\n  if (index !== -1) {\n    const nextLetter = letters[index + 1];\n    if (deaf.indexOf(nextLetter) === -1) {\n      return -1;\n    }\n  }\n\n  return index;\n};\n\nconst _syllabifyWord = (word, { separator = '·' } = {}) => {\n  const collection = [];\n\n  const vowelsMatches = word.match(vowels);\n\n  if (!vowelsMatches) {\n    return word;\n  }\n\n  const letters = word.match(/[a-яёіiў]/gi);\n\n  let skip = 0;\n  let currentSyllable = '';\n  let currentSyllableCount = 0;\n  let isWordEnd = false;\n  let isLastSyllable = false;\n\n  const len = letters.length;\n\n  letters.forEach((letter, index) => {\n    if (skip) {\n      return skip--;\n    }\n\n    currentSyllable += letter;\n\n    isWordEnd = index + 1 === len;\n    isLastSyllable = vowelsMatches.length - collection.length === 1;\n\n    if (isLastSyllable) {\n      return isWordEnd ? addSyllable(collection, currentSyllable) : null;\n    }\n\n    if (vowels.test(letter)) {\n      vowels.lastIndex = 0;\n      currentSyllableCount++;\n\n      const nextVowel = vowelsMatches[currentSyllableCount];\n      const nextWovelIndex = letters.indexOf(nextVowel, index + 1);\n      const between = letters.slice(index + 1, nextWovelIndex);\n\n      let indexSlice = -1;\n\n      indexSlice = indexSign(between);\n\n      if (indexSlice === -1) {\n        indexSlice = indexYoy(between);\n      }\n\n      if (indexSlice === -1) {\n        indexSlice = indexSonoric(between);\n      }\n\n      if (indexSlice !== -1) {\n        const sufix = between.slice(0, indexSlice + 1);\n        currentSyllable += sufix.join('');\n        skip = sufix.length;\n      }\n\n      addSyllable(collection, currentSyllable);\n      currentSyllable = '';\n    }\n  });\n\n  return word.replace(/[а-яёіiў]+/i, collection.join(separator));\n};\n\nconst syllabifyWord = (word, { separator = '·' } = {}) => {\n  return word\n    .split('-')\n    .map((word_) => _syllabifyWord(word_, { separator }))\n    .join('-');\n};\n\nexport const syllabify = (source, { separator = '·' } = {}) => {\n  const lines = splitLines(source);\n  const modifyLines = lines.map((line) => {\n    const words = splitWords(line);\n    const syllabifyedWords = words\n      .map((word) => syllabifyWord(word, { separator }))\n      .map((word) => word.split('·'));\n    return syllabifyedWords;\n  });\n  return modifyLines.flat();\n};\n","import nlp from 'compromise';\nimport compromiseSyllables from 'compromise-syllables';\n\n// @ts-ignore\nimport { syllabify } from './syllabifyRuFork';\n\nexport type Word = string[];\nexport interface LyricLine {\n  words: Word[];\n  syllablesCount: number;\n}\nexport interface Lyric {\n  lines: LyricLine[];\n  syllablesCount: number;\n}\n\nnlp.extend(compromiseSyllables);\n\nexport const splitTextLineToSyllables = (text: string) => {\n  let json = (nlp(text).terms() as any).syllables();\n  const syllables = json.map((word: any) => word.syllables);\n  return syllables;\n};\n\nexport const convertTextLinesToLyricEnglish = (textLines: string) => {\n  const lines = textLines.split('\\n');\n  const splited = lines.map((line) => splitTextLineToSyllables(line)) as string[][][];\n  const lyric: Lyric = {\n    lines: splited.map((line) => {\n      const lyricLine: LyricLine = {\n        words: line,\n        syllablesCount: line.flat(Infinity).length,\n      };\n      return lyricLine;\n    }),\n    syllablesCount: splited.flat(Infinity).length,\n  };\n\n  return lyric;\n};\n\nconst removePronounseFromLine = (line: string[][]) => {\n  const vowels = new RegExp(/[аеёиоуыэюяіi]/gi);\n\n  const result: string[][] = [];\n\n  let temp: string[] | null = null;\n\n  line.forEach((word) => {\n    if (word.length === 1 && !vowels.test(word[0]) && !!result[result.length - 2]) {\n      const lastWord = result.length - 1;\n      result[lastWord][result[lastWord].length - 1] += ` ${word[0]}`;\n    } else if (word.length === 1 && !vowels.test(word[0]) && !result[result.length - 2]) {\n      temp = word;\n    } else {\n      result.push(word);\n\n      if (temp) {\n        result[result.length - 1][0] = `${temp[0]} ${result[result.length - 1][0]}`;\n        temp = null;\n      }\n    }\n  });\n\n  return result;\n};\n\nexport const convertTextLinesToLyricRussian = (textLines: string) => {\n  const lines: string[][][] = textLines.split('\\n').map((str) => {\n    const line: string[][] = syllabify(\n      str.split('–').join('').split('-').join('').split(' ').filter(Boolean).join(' ')\n    );\n\n    return removePronounseFromLine(line);\n  });\n\n  const lyric: Lyric = {\n    lines: lines\n      .filter((line) => !!line.length)\n      .map((line) => ({\n        words: line,\n        syllablesCount: line.flat(Infinity).length,\n      })),\n    syllablesCount: lines.flat(Infinity).length,\n  };\n\n  return lyric;\n};\n\nexport const isTextRussian = (text: string) => {\n  const reg = new RegExp(/[йцукенгшщзхъёфывапролджэячсмитьбюЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮ]/);\n\n  if (reg.test(text)) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const convertTextToSyllables = (textLines: string) => {\n  if (isTextRussian(textLines)) {\n    return convertTextLinesToLyricRussian(textLines);\n  } else {\n    return convertTextLinesToLyricEnglish(textLines);\n  }\n};\n","import { PartOptions } from './PartCreator';\r\nimport { NotesLengthType, ChordModel, PartNote, Notes } from './../dataset/all_chords_for_impro';\r\nimport { DURATIONS } from '../dataset/dataset';\r\nimport { randomIntegerRange, createDurMeasure, createDurMeasureByCount } from '../utils';\r\nimport { Pattern } from './PatternCreator';\r\nimport { cloneDeep, shuffle } from 'lodash';\r\n\r\nexport default class BarCreator {\r\n  type: PartOptions['type'];\r\n  notesLengthMode: NotesLengthType;\r\n  toneJsArr: PartNote[] | null | undefined;\r\n  constructor(notesLengthMode: NotesLengthType, type: PartOptions['type']) {\r\n    this.type = type;\r\n    this.notesLengthMode = notesLengthMode;\r\n    this.toneJsArr = [];\r\n  }\r\n\r\n  getRandomBar(\r\n    chord: ChordModel,\r\n    idx: number,\r\n    pattern: Pattern[] | null,\r\n    restProbability: number,\r\n    notesCount?: number\r\n  ) {\r\n    this.toneJsArr = this.createRandomBar(chord, pattern, restProbability, notesCount);\r\n    this.createOctave(idx);\r\n    return this.toneJsArr;\r\n  }\r\n\r\n  createRandomBarByPattern = (\r\n    chord: ChordModel,\r\n    pattern: Pattern[] | null,\r\n    restProbability: number\r\n  ) => {\r\n    let resultBar: PartNote[] = [];\r\n\r\n    if (pattern) {\r\n      pattern.map((patternNote) => {\r\n        resultBar.push({\r\n          note: Math.random() > restProbability ? chord[2][patternNote.chordPitch] : '',\r\n          dur: patternNote.dur as PartNote['dur'],\r\n        });\r\n      });\r\n\r\n      return resultBar;\r\n    }\r\n  };\r\n\r\n  createRandomBar(\r\n    chord: ChordModel,\r\n    pattern: Pattern[] | null,\r\n    restProbability: number,\r\n    notesCount?: number\r\n  ) {\r\n    if (pattern) {\r\n      return this.createRandomBarByPattern(chord, pattern, restProbability);\r\n    }\r\n\r\n    let durs: number[] | undefined = [];\r\n    if (notesCount) {\r\n      durs = createDurMeasureByCount(this.notesLengthMode, notesCount);\r\n    } else {\r\n      durs = createDurMeasure(this.notesLengthMode);\r\n    }\r\n\r\n    return this.getNotesForBar(durs, chord, notesCount, restProbability);\r\n  }\r\n\r\n  getNotesForBar = (\r\n    durs: number[] | undefined,\r\n    chord: ChordModel,\r\n    notesCount?: number,\r\n    restProbability?: number\r\n  ) => {\r\n    if (!durs) return null;\r\n    let resultBar: PartNote[] = [];\r\n\r\n    for (let index = 0; index < durs.length; index++) {\r\n      const newNote = this.createRandomNote(\r\n        chord[2],\r\n        durs[index] as PartNote['dur'],\r\n        null,\r\n        restProbability\r\n      );\r\n      resultBar.push(newNote);\r\n    }\r\n\r\n    if (notesCount) {\r\n      return this.muteNotesBySyllablesCount(resultBar, notesCount);\r\n    } else {\r\n      return resultBar;\r\n    }\r\n  };\r\n\r\n  muteNotesBySyllablesCount = (notes: PartNote[], count: number) => {\r\n    const shortIdxes: number[] = notes.map((note, idx) => idx);\r\n\r\n    const shuffledShortsIdxes = shuffle(shortIdxes);\r\n    const result = cloneDeep(notes);\r\n    let i = 0;\r\n    while (result.filter((note) => !note.rest).length > count) {\r\n      result[shortIdxes[i]].rest = true;\r\n      i++;\r\n    }\r\n    return result;\r\n  };\r\n\r\n  createOctave(idx: number) {\r\n    if (this.type === 'soprano') {\r\n      this.toneJsArr = this.toneJsArr?.map((note) => {\r\n        if (!note.note) {\r\n          return note;\r\n        }\r\n\r\n        note.note = note.note + '4';\r\n        return note;\r\n      });\r\n    }\r\n    if (this.type === 'bass') {\r\n      this.toneJsArr = this.toneJsArr?.map((note) => {\r\n        if (!note.note) {\r\n          return note;\r\n        }\r\n        note.note = note.note + (idx % 6 === 0 ? '1' : '2');\r\n        return note;\r\n      });\r\n    }\r\n    if (this.type === 'tenor') {\r\n      this.toneJsArr = this.toneJsArr?.map((note) => {\r\n        if (!note.note) {\r\n          return note;\r\n        }\r\n\r\n        note.note = note.note + (idx % 6 === 0 ? '2' : '3');\r\n        return note;\r\n      });\r\n    }\r\n  }\r\n\r\n  createRandomNote(\r\n    notes: Notes[],\r\n    dur: PartNote['dur'],\r\n    note: Notes | null,\r\n    restProbability?: number\r\n  ) {\r\n    const randNoteIndex = randomIntegerRange(0, notes.length);\r\n    const randNote = {\r\n      note: Math.random() > (restProbability || 0) ? (note ? note : notes[randNoteIndex]) : '',\r\n      dur: dur || 1 / +DURATIONS[randomIntegerRange(1, DURATIONS.length)],\r\n    };\r\n    return randNote;\r\n  }\r\n}\r\n","import { PartOptions } from './PartCreator';\nimport { Pattern } from './PatternCreator';\nimport { Lyric } from '../utils/text/textUtils';\nimport { PartNote, ChordModel, NotesPatterns } from './../dataset/all_chords_for_impro';\nimport BarCreator from './BarCreator';\n\nexport class LyricPartCreator {\n  notes: PartNote[][];\n  squaresCountToAdd: number = 1;\n  chords: ChordModel[];\n  barCreator: BarCreator;\n  pattern: Pattern[];\n\n  constructor(chords: ChordModel[], partOptions: PartOptions) {\n    this.chords = chords;\n    this.barCreator = new BarCreator(partOptions.notesLength, partOptions.type);\n  }\n\n  createPartByLyric = (lyric: Lyric, restProbability: number = 0) => {\n    this.notes = [];\n    const chordNotesCounts = this.getChordNotesCounts(lyric);\n    let notes: PartNote[][] = this.getBarNotesByLyric(chordNotesCounts, restProbability);\n    this.notes = this.addLyricToNotes(notes, lyric);\n    return this.notes;\n  };\n\n  getBarNotesByLyric = (chordNotesCounts: number[], restProbability: number = 0) => {\n    let notes: PartNote[][] = [];\n\n    for (let index = 0; index < this.squaresCountToAdd; index++) {\n      this.chords.forEach((chord, i) => {\n        const newBar = this.barCreator.getRandomBar(\n          chord,\n          i,\n          this.pattern,\n          restProbability,\n          chordNotesCounts[i]\n        );\n\n        if (newBar) {\n          notes = [...notes, newBar];\n        }\n      });\n    }\n\n    return notes;\n  };\n\n  getChordNotesCounts = (lyric: Lyric) => {\n    const chordsForLine = Math.floor(this.chords.length / lyric.lines.length);\n    const sumArr = (a: number[]) => a.reduce((acc, cur) => acc + cur, 0);\n\n    const chordNotesCounts = lyric.lines\n      .map((line) => {\n        let count = line.syllablesCount;\n\n        const chordNotesCount = count / chordsForLine;\n        const ceilChordNotesCount = Math.ceil(count / chordsForLine);\n        const floorChordNotesCount = Math.floor(count / chordsForLine);\n\n        const lineCounts: number[] = [];\n        let i = 0;\n        while (sumArr(lineCounts) + chordNotesCount < count) {\n          lineCounts.push(i % 2 === 0 ? floorChordNotesCount : ceilChordNotesCount);\n          i++;\n        }\n\n        return lineCounts;\n      }, [] as number[])\n      .flat();\n\n    return chordNotesCounts;\n  };\n\n  addLyricToNotes = (notes: PartNote[][], lyric: Lyric) => {\n    const textLine = lyric.lines.map((line) => line.words.flat(Infinity)).flat() as string[];\n\n    const result = notes.map((notesBar, barIdx) => {\n      return notesBar.map((note, noteIdx) => {\n        if (!note.rest) {\n          note.lyric = textLine.shift();\n        }\n        return note;\n      });\n    });\n\n    return result;\n  };\n}\n","import { PartOptions } from './PartCreator';\nimport { cloneDeep, map } from 'lodash';\nimport { createDurMeasure, randomIntegerRange } from '../utils';\nimport {\n  PartNote,\n  ChordModel,\n  SharpNotes,\n  allNotes,\n  NotesLengthType,\n} from './../dataset/all_chords_for_impro';\nimport BarCreator from './BarCreator';\n\ninterface MotiveCreatorProps {}\n\nexport class MotiveCreator {\n  barCreator: BarCreator;\n  partOptions: PartOptions;\n\n  constructor(partOptions: PartOptions) {\n    this.partOptions = partOptions;\n    this.barCreator = new BarCreator(partOptions.notesLength, partOptions.type);\n  }\n\n  getPart = (chords: ChordModel[]) => {\n    const initialPart = this.barCreator.getRandomBar(\n      chords[0],\n      0,\n      null,\n      this.partOptions.restProbability\n    );\n\n    if (!initialPart) {\n      throw new Error(`Error on creating initial part for MotiveCreator: chord: ${chords[0]}`);\n    }\n\n    return chords.map(\n      (chord, i) => this.getBarWithMovedNotes(initialPart, chord)\n      // (i + 3) % 4 === 0 || (i + 4) % 4 === 0\n      //   ? this.getBarWithMovedNotes(initialPart, chord)\n      //   : this.getBarByMotive(initialPart, chord)\n    );\n  };\n\n  getBarByMotive = (initialPart: PartNote[], chord: ChordModel) => {\n    const notes: PartNote[] = cloneDeep(initialPart);\n\n    return notes.map((note) => {\n      note.note =\n        this.getClosestNoteInChord(note.note.slice(0, -1) as SharpNotes, chord) +\n        note.note[note.note.length - 1];\n      return note;\n    });\n  };\n\n  getClosestNoteInChord = (note: SharpNotes, chord: ChordModel) => {\n    const noteIdx = allNotes.indexOf(note);\n\n    const resultIdx = chord[2].map((chordNote) => {\n      const idx = allNotes.indexOf(chordNote);\n      let diff = Math.abs(idx - noteIdx);\n      let resultIdx = diff;\n\n      if (resultIdx >= 6) {\n        const newIdx = Math.min(idx, noteIdx) + allNotes.length;\n        resultIdx = newIdx - Math.max(idx, noteIdx);\n      }\n\n      return resultIdx;\n    });\n\n    const min = resultIdx.reduce((acc, cur) => (acc < cur ? acc : cur));\n    const resultNote = chord[2][resultIdx.indexOf(min)];\n\n    return resultNote;\n  };\n\n  getBarWithMovedNotes = (initialPart: PartNote[], chord: ChordModel) => {\n    const newBar = this.getBarByMotive(initialPart, chord);\n\n    const idxWithBiggestNote = newBar.reduce(\n      (acc, cur, idx) => (initialPart[acc].dur < cur.dur ? idx : acc),\n      0\n    );\n\n    if (Math.random() > 0.3) {\n      const splittedNote = this.splitNote([newBar[idxWithBiggestNote]], chord);\n      newBar.splice(idxWithBiggestNote, 1, ...(splittedNote || []));\n\n      return newBar;\n    } else {\n      return this.moveNotesInBar(newBar, chord);\n    }\n  };\n\n  moveNotesInBar = (initialPart: PartNote[], chord: ChordModel) => {\n    const newBar = this.getBarByMotive(initialPart, chord);\n    const durs = newBar.map((bar) => bar.dur);\n    const spliceStart = randomIntegerRange(0, durs.length);\n    const deleteCount = randomIntegerRange(1, durs.length - spliceStart);\n\n    const spliced = durs.splice(spliceStart, deleteCount);\n\n    durs.splice(randomIntegerRange(0, durs.length), 0, ...spliced);\n\n    return newBar.map((note, idx) => {\n      note.dur = durs[idx];\n      return note;\n    });\n  };\n\n  splitNote = (notes: PartNote[], chord: ChordModel) => {\n    const durs = createDurMeasure(\n      NotesLengthType.Middle,\n      notes.reduce((acc, cur) => acc + cur.dur, 0)\n    );\n\n    const newNotes: PartNote[] | undefined = durs?.map((dur) => ({\n      dur,\n      note: chord[2][randomIntegerRange(0, chord[2].length)] + '4',\n    }));\n\n    return newNotes;\n  };\n}\n","import { NotesLengthType } from '../dataset/all_chords_for_impro';\r\nimport { randomIntegerRange, createDurMeasure } from '../utils';\r\nimport { PartOptions } from './PartCreator';\r\n\r\nexport interface Pattern {\r\n  chordPitch: number;\r\n  dur: number;\r\n}\r\nexport default class PatternCreator {\r\n  getPattern(notesLengthType: NotesLengthType, type: PartOptions['type']) {\r\n    const durs = createDurMeasure(notesLengthType);\r\n    const result: Pattern[] = [];\r\n\r\n    durs?.forEach((dur, idx) => {\r\n      if (idx === 0 && type === 'bass') {\r\n        result.push({\r\n          chordPitch: 0,\r\n          dur: dur,\r\n        });\r\n      } else if (type === 'bass' && idx === 1 && durs[0] < 0.25) {\r\n        result.push({\r\n          chordPitch: 0,\r\n          dur: dur,\r\n        });\r\n      } else {\r\n        result.push({\r\n          chordPitch: randomIntegerRange(0, 3),\r\n          dur: dur,\r\n        });\r\n      }\r\n    });\r\n\r\n    return result;\r\n  }\r\n}\r\n","import { LyricPartCreator } from './LyricPartCreator';\r\nimport { MotiveCreator } from './MotiveCreator';\r\nimport { ChordModel, PartNote } from './../dataset/all_chords_for_impro';\r\nimport PatternCreator, { Pattern } from './PatternCreator';\r\nimport BarCreator from './BarCreator';\r\nimport { NotesLengthType, NotesPatterns } from '../dataset/all_chords_for_impro';\r\nimport { Lyric } from '../utils/text/textUtils';\r\n\r\nexport interface PartOptions {\r\n  type: 'soprano' | 'tenor' | 'bass';\r\n  notesLength: NotesLengthType;\r\n  function: 'accompaniment';\r\n  pattern: NotesPatterns;\r\n  restProbability: number;\r\n  lyric?: Lyric;\r\n}\r\nexport default class PartCreator {\r\n  pattern: Pattern[] | null;\r\n  middlePattern: Pattern[];\r\n  chords: ChordModel[];\r\n  barCreator: BarCreator;\r\n  motiveCreator: MotiveCreator;\r\n  lyricPartCreator: LyricPartCreator;\r\n  squaresCountToAdd: number;\r\n  notes: PartNote[][];\r\n  lyric?: Lyric;\r\n\r\n  constructor(chords: ChordModel[], squaresCount: number, partOptions: PartOptions) {\r\n    this.pattern =\r\n      partOptions.pattern === 'riff'\r\n        ? new PatternCreator().getPattern(partOptions.notesLength, partOptions.type)\r\n        : null;\r\n    this.middlePattern = new PatternCreator().getPattern(partOptions.notesLength, partOptions.type);\r\n    this.chords = chords;\r\n    this.barCreator = new BarCreator(partOptions.notesLength, partOptions.type);\r\n    this.motiveCreator = new MotiveCreator(partOptions);\r\n    this.lyricPartCreator = new LyricPartCreator(chords, partOptions);\r\n    this.squaresCountToAdd = squaresCount;\r\n    this.notes = [];\r\n    this.lyric = partOptions.lyric;\r\n    this.onInit(partOptions);\r\n  }\r\n\r\n  onInit(partOptions: PartOptions) {\r\n    if (this.lyric) {\r\n      this.notes = this.lyricPartCreator.createPartByLyric(this.lyric);\r\n    } else if (partOptions.pattern === NotesPatterns.Motive) {\r\n      this.notes = this.motiveCreator.getPart(this.chords);\r\n    } else {\r\n      this.createNewRandomPart(partOptions.restProbability);\r\n    }\r\n  }\r\n\r\n  createNewRandomPart(restProbability: number) {\r\n    this.notes = [];\r\n    for (let index = 0; index < this.squaresCountToAdd; index++) {\r\n      this.chords.forEach((chord, i) => {\r\n        const newBar = this.barCreator.getRandomBar(\r\n          chord,\r\n          i,\r\n          (i + 1) % 4 === 0 ? this.middlePattern : this.pattern,\r\n          restProbability\r\n        );\r\n\r\n        if (newBar) {\r\n          this.notes = [...this.notes, newBar];\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n","import { ChordModel } from './../dataset/all_chords_for_impro';\r\nimport PartCreator, { PartOptions } from './PartCreator';\r\n\r\nexport default class PartsFabric {\r\n  chords: ChordModel[];\r\n  parts: any[];\r\n  squaresCount: number;\r\n  constructor(chords: ChordModel[], squaresCount: number) {\r\n    this.chords = chords;\r\n    this.parts = [];\r\n    this.squaresCount = squaresCount;\r\n  }\r\n\r\n  addPart(partOptions: PartOptions) {\r\n    const part = new PartCreator(this.chords, this.squaresCount, partOptions).notes;\r\n    this.parts.push(part);\r\n    return part;\r\n  }\r\n\r\n  getParts() {\r\n    return this.parts;\r\n  }\r\n}\r\n","import { ChordModel } from './../dataset/all_chords_for_impro';\nimport { PartOptions } from './PartCreator';\nimport PartsFabric from './PartsFabric';\n\nexport const generateMelody = (chords: ChordModel[], partOptions: PartOptions, loopCounts = 1) => {\n  const partFabric = new PartsFabric(chords, loopCounts);\n\n  const melody = partFabric.addPart(partOptions);\n  return melody;\n};\n","import React, { useContext, useEffect, useState } from 'react';\n\nimport styled from 'styled-components';\nimport { theme } from '../../utils/theme';\n\nimport { ChordModel, NotesLengthType, PartNote } from '../../dataset/all_chords_for_impro';\nimport MidiChordsCreator from '../../musicBrain/MidiChordsCreator';\nimport { SheetStave } from './SheetStave';\nimport { useLocation } from 'react-router-dom';\nimport { ChordsProgression } from '../../components/global/ChordsProgression';\n\nimport { Button } from '../../components/global/Button';\nimport { PageTitle } from '../../components/global/PageTitle';\nimport { SaveMelodiesModal } from './SaveMelodiesModal';\nimport { Checkbox } from '../../components/global/Checkbox';\nimport { MetalBlock } from '../../styled/global';\n\nimport { PlayStopButton } from '../../components/global/PlayStopButton';\nimport { usePlayMelodyAndChords } from '../../hooks/usePlayMelodyAndChords';\nimport { TextSplitter } from '../../components/Text/TextSplitter';\nimport { convertTextToSyllables, Lyric } from '../../utils/text/textUtils';\nimport { generateMelody } from '../../musicBrain/melodyUtils';\nimport { settingsStore } from '../../context/SettingsProvider';\nimport { MotiveCreator } from '../../musicBrain/MotiveCreator';\n\nexport const MelodiesPage = () => {\n  const location = useLocation();\n  const chordsCreator = new MidiChordsCreator();\n  const [chords, setChords] = useState<ChordModel[]>([]);\n  const {\n    state: { notesLength, notesPattern, playAccompanimentWithMelody, chordsToGenerateCount },\n    dispatch,\n  } = useContext(settingsStore);\n\n  const locationChords = (location.state as { chords: ChordModel[] } | undefined)?.chords;\n\n  const [part, setPart] = useState<PartNote[][]>([]);\n  const [lyric, setLyric] = useState<Lyric | null>(null);\n\n  const { handlePlaying, MPlayer, isPlaying, Player } = usePlayMelodyAndChords({\n    chords,\n    part,\n  });\n\n  const generateChords = () => {\n    const chords: ChordModel[] | undefined = chordsCreator.getRandomCyclicChords(\n      chordsToGenerateCount\n    );\n\n    if (chords) {\n      let eightChords: ChordModel[] = [];\n      while (eightChords.length < 8) {\n        eightChords = [...eightChords, ...chords];\n      }\n\n      setChords(eightChords);\n      setPart([]);\n    }\n  };\n\n  const getMelody = () => {\n    const newPart = generateMelody(chords, {\n      type: 'soprano',\n      notesLength: notesLength,\n      function: 'accompaniment',\n      pattern: notesPattern,\n      restProbability: 0,\n    });\n\n    setPart(newPart);\n  };\n\n  const onPlayAccompanimentChange = (value: boolean) => {\n    dispatch({\n      type: 'PLAY_ACCOMPANIMENT',\n      payload: value,\n    });\n  };\n\n  useEffect(() => {\n    if (locationChords) {\n      setChords(locationChords);\n    } else {\n      generateChords();\n    }\n  }, [location]);\n\n  const onLyricAdd = (text: string) => {\n    const lyric = convertTextToSyllables(text);\n    const isLinesLong = Math.round(lyric.syllablesCount / lyric.lines.length) > 4;\n\n    setLyric(lyric);\n\n    const chordsCountForSong = lyric.lines.length * (isLinesLong ? 4 : 2);\n\n    let chordsForSong: ChordModel[] = [];\n    while (chordsForSong.length < chordsCountForSong) {\n      chordsForSong = [...chordsForSong, ...chords!];\n    }\n\n    chordsForSong = chordsForSong.slice(0, chordsCountForSong);\n\n    if (chordsForSong) {\n      setChords(chordsForSong);\n\n      const newPart = generateMelody(chordsForSong, {\n        type: 'soprano',\n        notesLength: NotesLengthType.Middle,\n        function: 'accompaniment',\n        pattern: notesPattern,\n        restProbability: 0,\n        lyric,\n      });\n\n      setPart(newPart);\n    }\n  };\n\n  return (\n    <>\n      <PageTitle title='Melodies Editor' />\n      <Container>\n        <MetalBlock>\n          <Header>\n            {chords.length > 0 && (\n              <Chords>\n                <ChordsProgression chords={chords} onChordClick={Player?.playChord} />\n              </Chords>\n            )}\n            <Actions>\n              <div className='buttons'>\n                {part.length > 0 && (\n                  <PlayStopButton handlePlaying={handlePlaying} isPlaying={isPlaying} />\n                )}\n                <SaveMelodiesModal melody={part} chords={chords} />\n                <Checkbox\n                  label='Play accompaniment'\n                  value={playAccompanimentWithMelody}\n                  onChange={onPlayAccompanimentChange}\n                />\n              </div>\n              <div>\n                <Button disabled={isPlaying} onClick={getMelody}>\n                  Generate melody\n                </Button>\n                <Button disabled={isPlaying} onClick={generateChords}>\n                  Generate chords\n                </Button>\n              </div>\n            </Actions>\n            <TextSplitterWrapper>\n              <TextSplitter onSubmit={onLyricAdd} />\n            </TextSplitterWrapper>\n          </Header>\n        </MetalBlock>\n\n        <SheetStave chords={chords} bars={part} />\n        {MPlayer}\n      </Container>\n    </>\n  );\n};\n\nconst Container = styled.div`\n  background-color: ${theme.colors.white};\n`;\n\nconst Chords = styled.div`\n  display: flex;\n`;\n\nconst Actions = styled.div`\n  .buttons {\n    padding: 0 10px;\n  }\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  > div {\n    display: flex;\n  }\n`;\nconst TextSplitterWrapper = styled.div`\n  @media ${theme.breakpoints.belowMobile} {\n    margin-top: 20px;\n    width: 100%;\n  }\n`;\n\nconst Header = styled.div`\n  padding: 20px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n\n  @media ${theme.breakpoints.belowTabletM} {\n    flex-direction: column;\n    > div {\n      flex-basis: 100%;\n    }\n  }\n`;\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { theme } from '../../utils/theme';\r\nimport GitHubButton from 'react-github-btn';\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <Container>\r\n      <GitHubButton\r\n        href=\"https://github.com/PyatroMarchanka/CyberAliosha-Parter-React\"\r\n        data-icon=\"octicon-star\"\r\n        data-size=\"large\"\r\n        aria-label=\"Star PyatroMarchanka/CyberAliosha-Parter-React on GitHub\"\r\n      >\r\n        Star\r\n      </GitHubButton>\r\n      <GitHubButton\r\n        href=\"https://github.com/PyatroMarchanka\"\r\n        data-size=\"large\"\r\n        aria-label=\"Follow @PyatroMarchanka on GitHub\"\r\n      >\r\n        Follow @PyatroMarchanka\r\n      </GitHubButton>\r\n      <FacebookButton href=\"https://www.facebook.com/piatro.marchanka\">FaceBook</FacebookButton>\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  padding: 10px;\r\n  color: ${theme.colors.white};\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n\r\n  > * {\r\n    margin-right: 10px;\r\n  }\r\n`;\r\n\r\nconst FacebookButton = styled.a`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 4px;\r\n  color: #24292e;\r\n  background-color: #eff3f6;\r\n  padding: 3px 10px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  line-height: 20px;\r\n  border-radius: 0.25em;\r\n  border: 1px solid;\r\n\r\n  border-color: rgba(68, 72, 77, 0.25);\r\n  background-image: linear-gradient(180deg, #f0f3f6, #e6ebf1 90%);\r\n\r\n  &:hover {\r\n    background-color: #e6ebf1;\r\n    background-position: -0.5em;\r\n    border-color: #9fa4a9;\r\n    border-color: rgba(27, 31, 35, 0.35);\r\n    background-image: -moz-linear-gradient(top, #f0f3f6, #e6ebf1 90%);\r\n    background-image: linear-gradient(180deg, #f0f3f6, #e6ebf1 90%);\r\n  }\r\n`;\r\n","import React, { useState } from 'react';\nimport { Switch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { theme } from '../../utils/theme';\n\ninterface Props {\n  items: {\n    label: string;\n  }[];\n  children: React.ReactChild[];\n}\n\nexport const Tabs = ({ items, children }: Props) => {\n  const [activeChild, setActiveChild] = useState(0);\n\n  return (\n    <Container>\n      <TabsButtons>\n        {items.map((item, i) => {\n          return (\n            <TabButton\n              isActive={i === activeChild}\n              title={item.label}\n              onClick={() => setActiveChild(i)}\n            />\n          );\n        })}\n      </TabsButtons>\n      <Switch>{children.find((child, i) => i === activeChild)}</Switch>\n    </Container>\n  );\n};\n\nconst Container = styled.div``;\n\nconst TabsButtons = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  > button {\n    flex: 1;\n  }\n  /* border-left: 2px solid #2f3134;\n  border-right: 2px solid #2f3134; */\n`;\n\nconst TabButton = styled(({ className, title, onClick, isActive }) => (\n  <button onClick={onClick} className={`${className} ${isActive ? ' active' : ''}`}>\n    {title}\n  </button>\n))`\n  border: 0;\n  min-width: 50px;\n  font-size: 20px;\n  padding: 10px;\n  box-shadow: none;\n  background-color: unset;\n  outline: none;\n  border-radius: 8px;\n  margin: 0 5px;\n\n  color: ${theme.colors.black};\n  text-transform: uppercase;\n\n  transition: background-color 0.2s;\n\n  &.active {\n    background-color: ${theme.colors.bluePurple[500]};\n    color: ${theme.colors.white};\n    // background-color: ${theme.colors.bluePurple[500]};\n  }\n\n  &:hover {\n    cursor: pointer;\n    background-color: ${theme.colors.bluePurple[200]};\n    color: ${theme.colors.white};\n    text-decoration: none;\n  }\n`;\n","import React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport styled from 'styled-components';\nimport { CSSProperties } from '@material-ui/core/styles/withStyles';\n\ninterface Props {\n  title: string;\n  triggerComponent: JSX.Element;\n  children: any;\n  className?: string;\n  style?: CSSProperties;\n}\n\nexport default function Modal({ triggerComponent, children, title, className, style }: Props) {\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <Container>\n      <div onClick={handleClickOpen}>{triggerComponent}</div>\n\n      <Dialog\n        maxWidth='xl'\n        style={style || {}}\n        className={className}\n        onBackdropClick={handleClose}\n        disableBackdropClick\n        disableEscapeKeyDown\n        open={open}\n        onClose={handleClose}\n      >\n        <DialogTitle>{title}</DialogTitle>\n        <DialogContent>{children}</DialogContent>\n      </Dialog>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: inline-block;\n  .modal {\n    &::-webkit-scrollbar {\n      display: none;\n    }\n    -ms-overflow-style: none; /* IE and Edge */\n    scrollbar-width: none; /* Firefox */\n  }\n`;\n","import { ChordChart } from './chordbox';\nimport {\n  MinorChords,\n  UnstableChords,\n  MajorChords,\n  Notes,\n  ChordType,\n} from './../../dataset/all_chords_for_impro';\n/*\n * Vex Chords\n * Mohit Muthanna Cheppudira -- http://0xfe.blogspot.com\n */\n\nenum GuitarStrings {\n  E = 'E',\n  A = 'A',\n}\n\nconst SHAPES = {\n  [`${MajorChords.Major} E`]: {\n    name: '',\n    chord: [\n      [3, 2],\n      [4, 3],\n      [5, 3],\n    ],\n    barres: [{ fromString: 6, toString: 1, fret: 1 }],\n  },\n  [`${MinorChords.Minor} E`]: {\n    name: 'm',\n    chord: [\n      [4, 3],\n      [5, 3],\n    ],\n    barres: [{ fromString: 6, toString: 1, fret: 1 }],\n  },\n  [`${UnstableChords.D7} E`]: {\n    name: '7',\n    chord: [\n      [2, 4],\n      [3, 2],\n      [5, 3],\n    ],\n    barres: [{ fromString: 6, toString: 1, fret: 1 }],\n  },\n  [`${MinorChords.M7} E`]: {\n    name: 'm7',\n    chord: [\n      [2, 4],\n      [5, 3],\n    ],\n    barres: [{ fromString: 6, toString: 1, fret: 1 }],\n  },\n  [`${MajorChords.Maj7} E`]: {\n    name: 'Maj7',\n    chord: [\n      [1, 'x'],\n      [2, 1],\n      [3, 2],\n      [4, 2],\n      [5, 'x'],\n      [6, 1],\n    ],\n  },\n  [`${UnstableChords.Dim7} E`]: {\n    name: 'dim',\n    chord: [\n      [1, 'x'],\n      [3, 2],\n      [5, 'x'],\n      [6, 2],\n    ],\n    positionText: 1,\n    barres: [{ fromString: 4, toString: 2, fret: 1 }],\n  },\n  [`${UnstableChords.Min7b5} E`]: {\n    name: 'm7b5',\n    chord: [\n      [1, 'x'],\n      [2, 1],\n      [3, 2],\n      [4, 2],\n      [5, 'x'],\n      [6, 2],\n    ],\n    positionText: 1,\n  },\n  [`${UnstableChords.Aug} E`]: {\n    name: 'aug',\n    chord: [\n      [1, 'x'],\n      [2, 2],\n      [3, 2],\n      [4, 3],\n      [5, 'x'],\n      [6, 1],\n    ],\n    positionText: 1,\n  },\n  'sus4 E': {\n    name: 'sus4',\n    chord: [],\n    barres: [\n      { fromString: 6, toString: 1, fret: 1 },\n      { fromString: 5, toString: 3, fret: 3 },\n    ],\n  },\n  '7sus4 E': {\n    name: '7sus4',\n    chord: [\n      [3, 3],\n      [5, 3],\n    ],\n    barres: [{ fromString: 6, toString: 1, fret: 1 }],\n  },\n  '13 E': {\n    name: '13',\n    chord: [\n      [1, 'x'],\n      [2, 4],\n      [3, 3],\n      [4, 2],\n      [5, 'x'],\n      [6, 2],\n    ],\n    positionText: 1,\n  },\n  [`${MajorChords.Major} A`]: {\n    name: '',\n    chord: [\n      [2, 3],\n      [3, 3],\n      [4, 3],\n      [6, 'x'],\n    ],\n    barres: [{ fromString: 5, toString: 1, fret: 1 }],\n  },\n  [`${MinorChords.Minor} A`]: {\n    name: 'm',\n    chord: [\n      [2, 2],\n      [3, 3],\n      [4, 3],\n      [6, 'x'],\n    ],\n    barres: [{ fromString: 5, toString: 1, fret: 1 }],\n  },\n  [`${UnstableChords.D7} A`]: {\n    name: '7',\n    chord: [\n      [2, 3],\n      [4, 3],\n      [6, 'x'],\n    ],\n    barres: [{ fromString: 5, toString: 1, fret: 1 }],\n  },\n  [`${MinorChords.M7} A`]: {\n    name: 'm7',\n    chord: [\n      [2, 2],\n      [4, 3],\n      [6, 'x'],\n    ],\n    barres: [{ fromString: 5, toString: 1, fret: 1 }],\n  },\n  [`${UnstableChords.Min7b5} A`]: {\n    name: 'm7b5',\n    chord: [\n      [2, 2],\n      [4, 2],\n      [6, 'x'],\n    ],\n    barres: [{ fromString: 5, toString: 3, fret: 1 }],\n  },\n  [`${UnstableChords.Dim7} A`]: {\n    name: 'dim',\n    chord: [\n      [1, 'x'],\n      [2, 3],\n      [3, 1],\n      [4, 3],\n      [5, 2],\n      [6, 'x'],\n    ],\n    positionText: 1,\n  },\n  [`${UnstableChords.Aug} A`]: {\n    name: 'aug',\n    chord: [\n      [1, 2],\n      [2, 3],\n      [3, 3],\n      [4, 'x'],\n      [5, 1],\n      [6, 'x'],\n    ],\n  },\n  [`${MajorChords.Maj7} A`]: {\n    name: 'Maj7',\n    chord: [\n      [2, 3],\n      [3, 2],\n      [4, 3],\n      [6, 'x'],\n    ],\n    barres: [{ fromString: 5, toString: 1, fret: 1 }],\n  },\n  'sus2 A': {\n    name: 'sus2',\n    chord: [\n      [3, 3],\n      [4, 3],\n      [6, 'x'],\n    ],\n    barres: [{ fromString: 5, toString: 1, fret: 1 }],\n  },\n  'sus4 A': {\n    name: 'sus4',\n    chord: [\n      [2, 4],\n      [3, 3],\n      [4, 3],\n      [6, 'x'],\n    ],\n    barres: [{ fromString: 5, toString: 1, fret: 1 }],\n  },\n  '7sus4 A': {\n    name: '7sus4',\n    chord: [\n      [2, 4],\n      [4, 3],\n      [6, 'x'],\n    ],\n    barres: [{ fromString: 5, toString: 1, fret: 1 }],\n  },\n  '9 A': {\n    name: '9',\n    chord: [\n      [1, 'x'],\n      [2, 2],\n      [3, 2],\n      [4, 1],\n      [5, 2],\n      [6, 'x'],\n    ],\n    positionText: 1,\n  },\n  '7b9 A': {\n    name: '7b9',\n    chord: [\n      [1, 'x'],\n      [2, 1],\n      [3, 2],\n      [4, 1],\n      [5, 2],\n      [6, 'x'],\n    ],\n    positionText: 1,\n  },\n  '7#9 A': {\n    name: '7#9',\n    chord: [\n      [1, 'x'],\n      [2, 3],\n      [3, 2],\n      [4, 1],\n      [5, 2],\n      [6, 'x'],\n    ],\n    positionText: 1,\n  },\n  '13 A': {\n    name: '13',\n    chord: [\n      [1, 4],\n      [2, 4],\n      [3, 2],\n      [4, 4],\n      [5, 2],\n      [6, 'x'],\n    ],\n    positionText: 1,\n  },\n};\n\nconst POSITIONS = {\n  E: {\n    A: 5,\n    'A#': 6,\n    Bb: 6,\n    B: 7,\n    C: 8,\n    'C#': 9,\n    Db: 9,\n    D: 10,\n    'D#': 11,\n    Eb: 11,\n    E: 12,\n    F: 1,\n    'F#': 2,\n    Gb: 2,\n    G: 3,\n    'G#': 4,\n    Ab: 4,\n  },\n  A: {\n    A: 12,\n    'A#': 1,\n    Bb: 1,\n    B: 2,\n    C: 3,\n    'C#': 4,\n    Db: 4,\n    D: 5,\n    'D#': 6,\n    Eb: 6,\n    E: 7,\n    F: 8,\n    'F#': 9,\n    Gb: 9,\n    G: 10,\n    'G#': 11,\n    Ab: 11,\n  },\n};\n\nfunction build(key: Notes, shape: ChordType): ChordChart {\n  const position = Math.min(\n    ...Object.values(GuitarStrings).map((string) => POSITIONS[string][key])\n  );\n\n  const struct = SHAPES[`${shape} ${getMinPositionString(key)}`];\n\n  return {\n    name: key + struct.name,\n    chord: struct.chord,\n    position,\n    positionText: struct.positionText,\n    barres: struct.barres,\n  };\n}\n\nconst getMinPositionString = (key: Notes) => {\n  const positionsWithStrings = Object.values(GuitarStrings).map((string) => ({\n    position: POSITIONS[string][key],\n    string,\n  }));\n  const minString = positionsWithStrings.sort((a, b) => a.position - b.position);\n  return minString[0].string;\n};\n\nexport { POSITIONS, SHAPES, build };\n","import styled, { createGlobalStyle } from 'styled-components';\nimport { IconButton, Typography } from '@material-ui/core';\nimport { MetalBlock } from '../../styled/global';\n\nimport { SavedMelodies } from '../../localStorageUtils/storagesController';\nimport { theme } from '../../utils/theme';\nimport Modal from '../../components/global/Modal';\nimport { SheetStave } from './SheetStave';\nimport { removeMelodyById } from '../../localStorageUtils/melodiesStorage';\nimport { Icon } from '../../components/global/Icon';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { PlayStopButton } from '../../components/global/PlayStopButton';\nimport { usePlayMelodyAndChords } from '../../hooks/usePlayMelodyAndChords';\n\ninterface Props {\n  melodyData: SavedMelodies;\n  fetchMelodies: () => void;\n}\n\nexport const Melody = ({ melodyData, fetchMelodies }: Props) => {\n  const { chords, melody } = melodyData.data;\n\n  const { handlePlaying, MPlayer, isPlaying } = usePlayMelodyAndChords({\n    part: melody,\n    chords,\n  });\n\n  return (\n    <StyledMelody>\n      <GlobalStyles />\n      <Typography className='title' variant='h6'>\n        {melodyData.title}\n      </Typography>\n      <div className='actions'>\n        <Actions>\n          <PlayStopButton handlePlaying={handlePlaying} isPlaying={isPlaying} />\n        </Actions>\n        <IconButton\n          onClick={() => {\n            removeMelodyById(melodyData.id);\n            fetchMelodies();\n          }}\n          className='icon'\n          edge='start'\n          color='inherit'\n          aria-label='menu'\n        >\n          <Icon type='material' Icon={DeleteIcon} />\n        </IconButton>\n\n        <Modal\n          className='sheet-modal'\n          triggerComponent={\n            <IconButton className='icon' edge='start' color='inherit' aria-label='menu'>\n              <Icon type='notes' />\n            </IconButton>\n          }\n          title='Part Preview'\n          style={{ padding: '0' }}\n        >\n          <SheetStave bars={melody} chords={chords} backgroundColor={theme.colors.white} />\n        </Modal>\n        {MPlayer}\n      </div>\n    </StyledMelody>\n  );\n};\n\nconst StyledMelody = styled(MetalBlock)`\n  padding: 20px;\n  display: flex;\n  justify-content: space-between;\n\n  .title {\n    /* color: ${theme.colors.white}; */\n  }\n\n  .actions {\n    display: flex;\n    align-items: center;\n  }\n`;\n\nconst GlobalStyles = createGlobalStyle`\n.sheet-modal {\n    .MuiDialogContent-root {\n      padding: 0;\n    }\n\n    @media ${theme.breakpoints.belowMobile} {\n      .MuiDialog-paper {\n        margin: 15px;\n      }\n    }\n  }\n`;\n\nconst Actions = styled.div``;\n","import React, { useContext, useState } from 'react';\nimport * as Tone from 'tone';\nimport { settingsStore } from '../context/SettingsProvider';\nimport { ChordModel } from '../dataset/all_chords_for_impro';\n\nexport const colorChordsOnPlay = (\n  chords: ChordModel[],\n  setColorChord: (idx: number | undefined) => void,\n  bpm: number\n) => {\n  Tone.Transport.start();\n\n  var N = (4 * 60) / bpm;\n\n  chords.forEach((_, idx, allChords) => {\n    Tone.Transport.scheduleOnce(() => {\n      setColorChord(idx);\n    }, N * idx);\n\n    if (idx === allChords.length - 1) {\n      Tone.Transport.scheduleOnce(() => {\n        setColorChord(undefined);\n      }, N * idx + 1);\n    }\n  });\n};\n\nexport const stopTransport = () => {\n  Tone.Transport.stop();\n};\n\ninterface Props {\n  chords: ChordModel[];\n}\n\nexport const useColorChords = ({ chords }: Props) => {\n  const {\n    state: { bpm },\n  } = useContext(settingsStore);\n\n  const [colorChord, setColorChord] = useState<number | undefined>(undefined);\n\n  const onPlay = () => {\n    if (setColorChord) {\n      colorChordsOnPlay(chords, setColorChord, bpm);\n    }\n  };\n\n  const onStop = () => {\n    stopTransport();\n    if (setColorChord) {\n      setColorChord(undefined);\n    }\n  };\n\n  return { colorChord, onPlay, onStop };\n};\n","/*\n * Vex Chords v2\n * Mohit Muthanna Cheppudira -- http://0xfe.blogspot.com\n */\n\nimport { SVG, Svg } from '@svgdotjs/svg.js';\n\n// const chords = [\n//   {\n//     name: 'Am',\n//     chord: [\n//       [1, 2],\n//       [2, 1],\n//       [3, 2],\n//       [4, 0], // fret 0 = open string\n//       [5, 'x'], // fret x = muted string\n//       [6, 'x'],\n//     ],\n\n//     // optional: position marker\n//     position: 5, // start render at fret 5\n\n//     // optional: barres for barre chords\n//      barres: [{ fromString: 6, toString: 1, fret: 1 }],\n\n//     // optional: tuning keys\n//     tuning: ['E', 'A', 'D', 'G', 'B', 'E'],\n//   },\n// ];\n\ninterface Barre {\n  fromString: number;\n  toString: number;\n  fret: number;\n}\n\nexport interface ChordChart {\n  position: number;\n  positionText?: number;\n  chord: Chord;\n  barres?: Barre[];\n  tuning?: string[];\n  name?: string;\n}\n\ntype Chord = (string | number)[][];\n\n// ChordBox implements the rendering logic for the chord\n// diagrams.\nclass ChordBox {\n  // sel can be a selector or an element.\n  private sel: string;\n  private params: any;\n  private canvas: Svg;\n  private width: number;\n  private height: number;\n\n  // Initialize scaled-spacing\n  private numStrings: number;\n  private numFrets: number;\n  private spacing: number;\n  private fretSpacing: number;\n  private metrics: {\n    circleRadius: number;\n    barreRadius: number;\n    fontSize: number;\n    barShiftX: number;\n    bridgeStrokeWidth: number;\n  };\n  private x: number;\n  private y: number;\n\n  private position: number;\n  private positionText: number;\n  private chord: Chord;\n  private barres: Barre[];\n  private tuning: string[] = ['E', 'A', 'D', 'G', 'B', 'E'];\n  constructor(sel: string, params: any) {\n    this.sel = sel;\n    this.params = {\n      ...{\n        numStrings: 6,\n        numFrets: 5,\n        x: 0,\n        y: 0,\n        width: 100,\n        height: 120,\n        strokeWidth: 1,\n        showTuning: true,\n        defaultColor: '#666',\n        bgColor: '#fff',\n        labelColor: '#fff',\n        fontFamily:\n          '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\n        fontSize: undefined,\n        fontStyle: 'light',\n        fontWeight: '100',\n        labelWeight: '100',\n      },\n      ...params,\n    };\n\n    // Setup defaults if not specifically overridden\n    ['bridgeColor', 'stringColor', 'fretColor', 'strokeColor', 'textColor'].forEach((param) => {\n      this.params[param] = this.params[param] || this.params.defaultColor;\n    });\n\n    ['stringWidth', 'fretWidth'].forEach((param) => {\n      this.params[param] = this.params[param] || this.params.strokeWidth;\n    });\n\n    // Create canvas and add it to the DOM\n    this.canvas = SVG().addTo(sel).size(this.params.width, this.params.height);\n\n    // Size and shift board\n    this.width = this.params.width * 0.75;\n    this.height = this.params.height * 0.75;\n\n    // Initialize scaled-spacing\n    this.numStrings = this.params.numStrings;\n    this.numFrets = this.params.numFrets;\n    this.spacing = this.width / this.numStrings;\n    this.fretSpacing = this.height / (this.numFrets + 2);\n\n    // Add room on sides for finger positions on 1. and 6. string\n    this.x = this.params.x + this.params.width * 0.15 + this.spacing / 2;\n    this.y = this.params.y + this.params.height * 0.15 + this.fretSpacing;\n\n    this.metrics = {\n      circleRadius: this.width / 20,\n      barreRadius: this.width / 25,\n      fontSize: this.params.fontSize || Math.ceil(this.width / 8),\n      barShiftX: this.width / 28,\n      bridgeStrokeWidth: Math.ceil(this.height / 36),\n    };\n\n    // Content\n    this.position = 0;\n    this.positionText = 0;\n    this.chord = [];\n    this.barres = [];\n    this.tuning = ['E', 'A', 'D', 'G', 'B', 'E'];\n  }\n\n  drawText(x: number, y: number, msg: string | number, attrs = {}) {\n    const textAttrs = {\n      ...{\n        family: this.params.fontFamily,\n        size: this.metrics.fontSize,\n        style: this.params.fontStyle,\n        weight: this.params.fontWeight,\n      },\n      ...attrs,\n    };\n\n    const text = this.canvas\n      .text(`${msg}`)\n      .stroke(this.params.textColor)\n      .fill(this.params.textColor)\n      .font(textAttrs);\n\n    return text.move(x - text.length() / 2, y);\n  }\n\n  private drawLine(x: number, y: number, newX: number, newY: number) {\n    return this.canvas.line(0, 0, newX - x, newY - y).move(x, y);\n  }\n\n  draw({ chord, position, barres, positionText, tuning }: ChordChart) {\n    this.chord = chord;\n    this.position = position || 0;\n    this.positionText = positionText || 0;\n    this.barres = barres || [];\n    this.tuning = tuning || ['E', 'A', 'D', 'G', 'B', 'E'];\n    if (this.tuning.length === 0) {\n      this.fretSpacing = this.height / (this.numFrets + 1);\n    }\n\n    const { spacing } = this;\n    const { fretSpacing } = this;\n\n    // Draw guitar bridge\n    if (this.position <= 1) {\n      const fromX = this.x;\n      const fromY = this.y - this.metrics.bridgeStrokeWidth;\n      this.canvas\n        .rect(this.x + spacing * (this.numStrings - 1) - fromX, this.y - fromY)\n        .move(fromX, fromY)\n        .stroke({ width: 0 })\n        .fill(this.params.bridgeColor);\n    } else {\n      // Draw position number\n      this.drawText(\n        this.x - this.spacing / 2 - this.spacing * 0.1,\n        this.y + this.fretSpacing * this.positionText,\n        this.position,\n      );\n    }\n\n    // Draw strings\n    for (let i = 0; i < this.numStrings; i += 1) {\n      this.drawLine(\n        this.x + spacing * i,\n        this.y,\n        this.x + spacing * i,\n        this.y + fretSpacing * this.numFrets,\n      ).stroke({\n        width: this.params.stringWidth,\n        color: this.params.stringColor,\n      });\n    }\n\n    // Draw frets\n    for (let i = 0; i < this.numFrets + 1; i += 1) {\n      this.drawLine(\n        this.x,\n        this.y + fretSpacing * i,\n        this.x + spacing * (this.numStrings - 1),\n        this.y + fretSpacing * i,\n      ).stroke({\n        width: this.params.fretWidth,\n        color: this.params.fretColor,\n      });\n    }\n\n    // Draw tuning keys\n    if (this.params.showTuning && this.tuning.length !== 0) {\n      for (let i = 0; i < Math.min(this.numStrings, this.tuning.length); i += 1) {\n        this.drawText(\n          this.x + this.spacing * i,\n          this.y + this.numFrets * this.fretSpacing + this.fretSpacing / 12,\n          this.tuning[i],\n        );\n      }\n    }\n\n    // Draw chord\n    for (let i = 0; i < this.chord.length; i += 1) {\n      // Light up string, fret, and optional label.\n      this.lightUp({\n        string: this.chord[i][0] as number,\n        fret: this.chord[i][1] as number,\n        label: this.chord.length > 2 ? this.chord[i][2] : undefined,\n      });\n    }\n\n    // Draw barres\n    for (let i = 0; i < this.barres.length; i += 1) {\n      this.lightBar(this.barres[i].fromString, this.barres[i].toString, this.barres[i].fret);\n    }\n  }\n\n  private lightUp({\n    string,\n    fret,\n    label,\n  }: {\n    string: number;\n    fret: number | 'x';\n    label?: number | string;\n  }) {\n    const stringNum = this.numStrings - string;\n    const shiftPosition = this.position === 1 && this.positionText === 1 ? this.positionText : 0;\n\n    const mute = fret === 'x';\n    const fretNum = fret === 'x' ? 0 : fret - shiftPosition;\n\n    const x = this.x + this.spacing * stringNum;\n    let y = this.y + this.fretSpacing * fretNum;\n\n    if (fretNum === 0) {\n      y -= this.metrics.bridgeStrokeWidth;\n    }\n\n    if (!mute) {\n      this.canvas\n        .circle()\n        .move(x, y - this.fretSpacing / 2)\n        .radius(this.params.circleRadius || this.metrics.circleRadius)\n        .stroke({ color: this.params.strokeColor, width: this.params.strokeWidth })\n        .fill(fretNum > 0 ? this.params.strokeColor : this.params.bgColor);\n    } else {\n      this.drawText(x, y - this.fretSpacing, 'X');\n    }\n\n    if (label) {\n      const fontSize = this.metrics.fontSize * 0.55;\n      const textYShift = fontSize * 0.66;\n      this.drawText(x, y - this.fretSpacing / 2 - textYShift, label, {\n        weight: this.params.labelWeight,\n        size: fontSize,\n      })\n        .stroke({\n          width: 0.7,\n          color: fretNum !== 0 ? this.params.labelColor : this.params.strokeColor,\n        })\n        .fill(fretNum !== 0 ? this.params.labelColor : this.params.strokeColor);\n    }\n\n    return this;\n  }\n\n  private lightBar(stringFrom: number, stringTo: number, theFretNum: number) {\n    let fretNum = theFretNum;\n    if (this.position === 1 && this.positionText === 1) {\n      fretNum -= this.positionText;\n    }\n\n    const stringFromNum = this.numStrings - stringFrom;\n    const stringToNum = this.numStrings - stringTo;\n\n    const x = this.x + this.spacing * stringFromNum - this.metrics.barShiftX;\n    const xTo = this.x + this.spacing * stringToNum + this.metrics.barShiftX;\n\n    const y = this.y + this.fretSpacing * (fretNum - 1) + this.fretSpacing / 4;\n    const yTo = this.y + this.fretSpacing * (fretNum - 1) + (this.fretSpacing / 4) * 3;\n\n    this.canvas\n      .rect(xTo - x, yTo - y)\n      .move(x, y)\n      .radius(this.metrics.barreRadius)\n      .fill(this.params.strokeColor);\n\n    return this;\n  }\n\n  clear = () => {\n    this.canvas.remove();\n  };\n}\n\nexport default ChordBox;\n","import { ChordModel } from './../dataset/all_chords_for_impro';\nimport { build } from './vexchordsFork/builder';\nimport ChordBox, { ChordChart } from './vexchordsFork/chordbox';\n\nexport class VexChordsController {\n  private selectorPrefix: string;\n  private chordParams = {\n    // Customizations (all optional, defaults shown)\n    width: 150, // canvas width\n    height: 180, // canvas height\n    circleRadius: 5, // circle radius (width / 20 by default)\n\n    numStrings: 6, // number of strings (e.g., 4 for bass)\n    numFrets: 5, // number of frets (e.g., 7 for stretch chords)\n    showTuning: true, // show tuning keys\n\n    defaultColor: '#666', // default color\n    bgColor: '#FFF', // background color\n    strokeColor: '#666', // stroke color (overrides defaultColor)\n    textColor: '#666', // text color (overrides defaultColor)\n    stringColor: '#666', // string color (overrides defaultColor)\n    fretColor: '#666', // fret color (overrides defaultColor)\n    labelColor: '#666', // label color (overrides defaultColor)\n\n    fretWidth: 1, // fret width\n    stringWidth: 1, // string width\n\n    // fontFamily,\n    fontSize: undefined,\n    // fontWeight,\n    // fontStyle,\n    // labelWeight\n  };\n\n  chords: ChordBox[] = [];\n  chordCharts: ChordChart[];\n\n  constructor(selectorPrefix: string, color = '#666') {\n    this.selectorPrefix = selectorPrefix;\n    this.chordParams = {\n      ...this.chordParams,\n      defaultColor: color,\n      bgColor: '#FFF',\n      strokeColor: color,\n      textColor: color,\n      stringColor: color,\n      fretColor: color,\n      labelColor: color,\n    };\n  }\n\n  drawChords = (chords: ChordModel[]) => {\n    if (this.chords.length > 0) {\n      this.chords.forEach((chord) => {\n        chord.clear();\n      });\n    }\n\n    this.chordCharts = this.getChordsData(chords);\n\n    this.chords = this.chordCharts.map(\n      (chart, idx) => new ChordBox(`#${this.selectorPrefix}${idx}`, this.chordParams)\n    );\n\n    this.chords.forEach((chord, idx) => {\n      chord.draw(this.chordCharts[idx]);\n      chord.drawText(Math.ceil(this.chordParams.width / 2), 0, this.chordCharts[idx].name || '', {\n        fontSize: 20,\n      });\n    });\n  };\n\n  private getChordsData = (chords: ChordModel[]): ChordChart[] => {\n    return chords.map((chord) => this.findChordChartData(chord));\n  };\n\n  findChordChartData = (chord: ChordModel): ChordChart => {\n    const chordChart = build(chord[0], chord[1]);\n    return chordChart;\n  };\n\n  clear = () => {\n    this.chords.forEach((chord) => {\n      chord.clear();\n    });\n  };\n}\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { ChordModel } from '../../dataset/all_chords_for_impro';\nimport { usePlayMelodyAndChords } from '../../hooks/usePlayMelodyAndChords';\nimport { VexChordsController } from '../../musicViews/VexChordsController';\nimport { theme } from '../../utils/theme';\n\ninterface Props {\n  chords: ChordModel[];\n  chordsPrefix: string;\n  selectedChord?: number;\n  color?: string;\n}\n\nexport const ChordCharts = ({ chords, chordsPrefix, selectedChord, color = '#666' }: Props) => {\n  const [ChordsDrawer, setChordsDrawer] = useState<VexChordsController | null>(null);\n  const { Player, MPlayer } = usePlayMelodyAndChords({});\n  useEffect(() => {\n    setChordsDrawer(new VexChordsController(chordsPrefix, color));\n  }, []);\n\n  useEffect(() => {\n    ChordsDrawer?.drawChords(chords);\n  }, [chords, ChordsDrawer]);\n\n  return (\n    <Chords>\n      {chords.map((chord, idx) => (\n        <Chord\n          isSelected={selectedChord === idx}\n          onClick={() => Player?.playChord(chord)}\n          key={`${chordsPrefix}${idx}`}\n          id={`${chordsPrefix}${idx}`}\n        ></Chord>\n      ))}\n      {MPlayer}\n    </Chords>\n  );\n};\n\nconst Chords = styled.div`\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  background-color: ${theme.colors.white};\n  min-width: 200px;\n  overflow-x: auto;\n`;\n\nconst Chord = styled.div<{ isSelected: boolean }>`\n  &:hover {\n    background-color: ${theme.colors.grey[200]};\n    cursor: pointer;\n  }\n\n  background-color: ${({ isSelected }) => (isSelected ? theme.colors.grey[200] : 0)};\n`;\n","import React from 'react';\nimport { IconButton } from '@material-ui/core';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport { Button } from '../../components/global/Button';\nimport { ChordsProgression } from '../../components/global/ChordsProgression';\nimport { Icon } from '../../components/global/Icon';\nimport { PlayStopButton } from '../../components/global/PlayStopButton';\nimport { SavedChords } from '../../localStorageUtils/storagesController';\nimport { MetalBlock } from '../../styled/global';\nimport { theme } from '../../utils/theme';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { ChordModel } from '../../dataset/all_chords_for_impro';\nimport { useColorChords } from '../../hooks/useColorChords';\nimport { usePlayMelodyAndChords } from '../../hooks/usePlayMelodyAndChords';\nimport { ChordCharts } from '../../components/Chords/ChordCharts';\nimport Modal from '../../components/global/Modal';\n\ninterface Props {\n  onRemove: () => void;\n  savedChords: SavedChords;\n  openInEditor: (chords: ChordModel[]) => void;\n  idx?: number;\n}\n\nexport const SavedChordsLine = ({ onRemove, savedChords, openInEditor, idx }: Props) => {\n  const { colorChord, onPlay, onStop } = useColorChords({ chords: savedChords.data });\n  const { MPlayer, handlePlaying, isPlaying, Player } = usePlayMelodyAndChords({\n    chords: savedChords.data,\n    onPlay,\n    onStop,\n  });\n\n  return (\n    <Chords>\n      <ChordsProgression\n        title={savedChords.title || savedChords.id}\n        key={savedChords.id}\n        chords={savedChords.data}\n        onChordClick={Player?.playChord}\n        selectedChord={colorChord}\n        action={\n          <div>\n            <PlayStopButton handlePlaying={handlePlaying} isPlaying={isPlaying} />\n            <IconButton\n              onClick={onRemove}\n              className='icon'\n              edge='start'\n              color='inherit'\n              aria-label='menu'\n            >\n              <Icon type='material' Icon={DeleteIcon} />\n            </IconButton>\n            <Modal\n              className='sheet-modal'\n              triggerComponent={\n                <IconButton\n                  onClick={() => {}}\n                  className='icon'\n                  edge='start'\n                  color='inherit'\n                  aria-label='menu'\n                >\n                  <Icon type='guitar' />\n                </IconButton>\n              }\n              title='Chords on guitar'\n              style={{ padding: '0' }}\n            >\n              <ChordCharts chords={savedChords.data} chordsPrefix={`saved-chords-${idx}`} />\n            </Modal>\n\n            <Button onClick={() => openInEditor(savedChords.data)}>Add Melody</Button>\n          </div>\n        }\n      />\n      <GlobalStyles />\n      {MPlayer}\n    </Chords>\n  );\n};\n\nconst Chords = styled(MetalBlock)`\n  padding: 20px;\n\n  .guitar-icon {\n    width: 28px;\n    height: 28px;\n  }\n`;\n\nconst GlobalStyles = createGlobalStyle`\n.sheet-modal {\n    .MuiDialogContent-root {\n      padding: 0;\n    }\n\n    @media ${theme.breakpoints.belowMobile} {\n      .MuiDialog-paper {\n        margin: 15px;\n      }\n    }\n  }\n`;\n","import React, { useState } from 'react';\nimport { useEffect } from 'react';\nimport { ChordModel } from '../dataset/all_chords_for_impro';\nimport { getSavedChords, removeSavedChordsById } from '../localStorageUtils/addedChordsStorage';\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router';\nimport { routes } from './routes';\nimport { Tabs } from '../components/global/Tabs';\nimport { SavedChords, SavedMelodies } from '../localStorageUtils/storagesController';\nimport { getSavedMelodies } from '../localStorageUtils/melodiesStorage';\nimport { Melody } from './Melodies/Melody';\nimport { SavedChordsLine } from './Chords/SavedChordsLine';\n\nexport const SavedPage = () => {\n  const [savedChords, setSavedChords] = useState<SavedChords[]>([]);\n  const [savedMelodies, setSavedMelodies] = useState<SavedMelodies[]>([]);\n  const history = useHistory();\n\n  const fetchChords = () => {\n    const savedChords = getSavedChords();\n    if (savedChords) {\n      setSavedChords(savedChords);\n    }\n  };\n  const fetchMelodies = () => {\n    const melodies = getSavedMelodies();\n    if (melodies) {\n      setSavedMelodies(melodies);\n    }\n  };\n\n  const openInMelodyEditor = (chords: ChordModel[]) => {\n    history.push({ pathname: routes.melodyEditor, state: { chords } });\n  };\n\n  useEffect(() => {\n    fetchChords();\n    fetchMelodies();\n  }, []);\n\n  return (\n    <Tabs items={[{ label: 'Saved chords' }, { label: 'Saved melodies' }]}>\n      <Container>\n        {!!savedChords &&\n          savedChords.map((chordsObject, idx) => (\n            <SavedChordsLine\n              openInEditor={openInMelodyEditor}\n              savedChords={chordsObject}\n              onRemove={() => {\n                removeSavedChordsById(chordsObject.id);\n                fetchChords();\n              }}\n              idx={idx}\n            />\n          ))}\n      </Container>\n      <Container>\n        {savedMelodies?.map((melody) => (\n          <Melody melodyData={melody} fetchMelodies={fetchMelodies} />\n        ))}\n      </Container>\n    </Tabs>\n  );\n};\n\nconst Container = styled.div``;\n","import { ChordModel } from './../dataset/all_chords_for_impro';\nimport {\n  clearStorage,\n  getStorage,\n  removeItemById,\n  SavedChords,\n  saveItem,\n  StorageNames,\n} from './storagesController';\n\nexport const saveSavedChords = (addedChords: ChordModel[], title: string) => {\n  saveItem(addedChords, StorageNames.Chords, title);\n};\n\nexport const clearSavedChords = () => {\n  clearStorage(StorageNames.Chords);\n};\n\nexport const removeSavedChordsById = (id: string) => {\n  removeItemById(id, StorageNames.Chords);\n};\n\nexport const getSavedChords = (): SavedChords[] | undefined => {\n  return getStorage<SavedChords>(StorageNames.Chords);\n};\n","import { createContext, useReducer } from 'react';\nimport { ChordModel } from '../dataset/all_chords_for_impro';\n\nimport MidiChordsCreator from '../musicBrain/MidiChordsCreator';\nimport {\n  getAllReleaserablesForTonality,\n  getAllReleases,\n  searchItemsForReplace,\n} from '../musicBrain/releaserUtils';\nimport { chordStringToFullChord } from '../utils';\n\ninterface State {\n  addedChords: ChordModel[];\n  chordsToAdd: ChordModel[];\n  replacingChord: { chord: ChordModel; idx: number } | null;\n  addedChordsMode: 'edit' | 'play';\n  key: string;\n  mood: '' | 'min';\n  chordsLenght: 1 | 2 | 4;\n}\n\ninterface Action {\n  type:\n    | 'ADD_CHORD'\n    | 'ADD_CHORDS_TO_ADD'\n    | 'ADD_INITIAL_CHORDS_TO_ADD'\n    | 'DELETE_CHORD'\n    | 'DELETE_ALL_CHORDS'\n    | 'DELETE_LAST_CHORD'\n    | 'REPLACE_CHORD'\n    | 'ADD_RANDOM_CHORDS_TO_ADD'\n    | 'SET_REPLACING_CHORD'\n    | 'SET_ADDED_CHORDS_MODE'\n    | 'SET_START_KEY'\n    | 'SET_START_MOOD'\n    | 'SET_CHORDS_LENGHT'\n    | 'ADD_CHORDS_FOR_REPLACE'\n    | 'ADD_CHORD_SINGLE_TONE'\n    | 'ADD_CHORDS_TO_ADD_SINGLE_TONE'\n    | 'ADD_INITIAL_CHORDS_TO_ADD_SINGLE_TONE'\n    | 'ADD_RANDOM_CHORDS_TO_ADD_SINGLE_TONE';\n  payload?: any;\n}\n\nconst initialState: State = {\n  addedChords: [],\n  chordsToAdd: [],\n  replacingChord: null,\n  addedChordsMode: 'play',\n  key: 'C',\n  mood: '',\n  chordsLenght: 1,\n};\n\ninterface Context {\n  state: State;\n  dispatch: (action: Action) => void;\n}\n\nconst chordsAdderStore = createContext<Context>({ state: initialState, dispatch: () => {} });\nconst { Provider } = chordsAdderStore;\n\nconst ChordsAdderProvider = ({ children }: any) => {\n  const chordsCreator = new MidiChordsCreator();\n\n  const [state, dispatch] = useReducer((state: State, action: Action) => {\n    switch (action.type) {\n      case 'SET_CHORDS_LENGHT':\n        return {\n          ...state,\n          key: action.payload,\n        };\n\n      case 'SET_START_KEY':\n        return {\n          ...state,\n          key: action.payload,\n        };\n\n      case 'SET_START_MOOD':\n        return {\n          ...state,\n          mood: action.payload,\n        };\n\n      case 'ADD_CHORD':\n        return {\n          ...state,\n          chordsToAdd: getAllReleases(action.payload) || [],\n          addedChords: [...state.addedChords, action.payload],\n        };\n\n      case 'ADD_CHORD_SINGLE_TONE':\n        return {\n          ...state,\n          addedChords: [...state.addedChords, action.payload],\n        };\n\n      case 'ADD_CHORDS_TO_ADD_SINGLE_TONE':\n        return {\n          ...state,\n          chordsToAdd:\n            getAllReleaserablesForTonality(chordStringToFullChord(state.key + state.mood)) || [],\n        };\n\n      case 'ADD_INITIAL_CHORDS_TO_ADD_SINGLE_TONE':\n        const singleToneChord = chordStringToFullChord(state.key + state.mood);\n\n        return {\n          ...state,\n          chordsToAdd: [...(getAllReleaserablesForTonality(singleToneChord) || [])],\n        };\n\n      case 'ADD_RANDOM_CHORDS_TO_ADD_SINGLE_TONE':\n        return {\n          ...state,\n          addedChords:\n            chordsCreator.getRandomCyclicChords(\n              action.payload,\n              chordStringToFullChord(state.key + state.mood)\n            ) || [],\n        };\n\n      case 'ADD_CHORDS_TO_ADD':\n        return {\n          ...state,\n          chordsToAdd: getAllReleases(action.payload) || [],\n        };\n\n      case 'ADD_INITIAL_CHORDS_TO_ADD':\n        const keyChord = chordStringToFullChord(state.key + state.mood);\n        return {\n          ...state,\n          chordsToAdd: [keyChord, ...(getAllReleases(keyChord) || [])],\n        };\n\n      case 'ADD_CHORDS_FOR_REPLACE':\n        return {\n          ...state,\n          chordsToAdd: searchItemsForReplace(action.payload.previous, action.payload.next) || [],\n        };\n\n      case 'ADD_RANDOM_CHORDS_TO_ADD':\n        const current = chordStringToFullChord(state.key + state.mood);\n        return {\n          ...state,\n          addedChords: chordsCreator.getRandomCyclicChords(action.payload, current) || [],\n        };\n\n      case 'DELETE_CHORD':\n        const newFilteredChords = [...state.addedChords];\n        state.addedChords.splice(action.payload, 1);\n        return {\n          ...state,\n          addedChords: newFilteredChords,\n          chordsToAdd: getAllReleases(newFilteredChords[newFilteredChords.length - 1]) || [],\n        };\n\n      case 'DELETE_ALL_CHORDS':\n        return {\n          ...state,\n          addedChords: [],\n        };\n\n      case 'DELETE_LAST_CHORD':\n        return {\n          ...state,\n          addedChords: state.addedChords.slice(0, -1),\n        };\n\n      case 'SET_REPLACING_CHORD':\n        return {\n          ...state,\n          replacingChord: action.payload,\n        };\n\n      case 'REPLACE_CHORD':\n        const newReplacedChords = [...state.addedChords];\n        if (state.replacingChord) {\n          newReplacedChords.splice(state.replacingChord.idx, 1, action.payload);\n\n          return {\n            ...state,\n            addedChords: newReplacedChords,\n            chordsToAdd: getAllReleases(newReplacedChords[newReplacedChords.length - 1]) || [],\n          };\n        } else {\n          return state;\n        }\n\n      case 'SET_ADDED_CHORDS_MODE':\n        return {\n          ...state,\n          addedChordsMode: action.payload,\n        };\n      default:\n        return state;\n    }\n  }, initialState);\n\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\n};\n\nexport { ChordsAdderProvider, chordsAdderStore };\n","import React, { useRef, useState } from 'react';\nimport Popover from '@material-ui/core/Popover';\nimport { Button } from '../global/Button';\nimport { theme } from '../../utils/theme';\n\ninterface Props {\n  children: any;\n  onReplace: () => void;\n  onDelete: () => void;\n  onClose: () => void;\n  playChord: () => void;\n  isSelected: boolean;\n  className?: string;\n}\n\nexport const ChordWithEditModal = ({\n  children,\n  isSelected,\n  onReplace,\n  onDelete,\n  className,\n  playChord,\n}: Props) => {\n  const ref = useRef(null);\n\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    playChord();\n  };\n\n  const handleLongPress = () => {\n    if (ref.current) {\n      setAnchorEl(ref.current);\n    }\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'simple-popover' : undefined;\n\n  return (\n    <div ref={ref}>\n      <Button\n        className={className}\n        color={anchorEl || isSelected ? theme.colors.blue : undefined}\n        aria-describedby={id}\n        onClick={handleClick}\n        onLongPress={handleLongPress}\n      >\n        {children}\n      </Button>\n      <Popover\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n      >\n        <Button onClick={onReplace} color={theme.colors.bluegrey}>\n          Replace\n        </Button>\n        <Button onClick={onDelete} color={theme.colors.amber}>\n          Delete\n        </Button>\n      </Popover>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { saveSavedChords } from '../../localStorageUtils/addedChordsStorage';\nimport { ChordModel } from '../../dataset/all_chords_for_impro';\n\nimport { SaveModal } from '../global/SaveModal';\n\ninterface Props {\n  chords: ChordModel[];\n}\n\nexport const SaveChordsModal = ({ chords }: Props) => {\n  const saveAndClose = (title: string) => {\n    saveSavedChords(chords, title);\n  };\n\n  return (\n    <SaveModal title='Set name of the new hit2' onSave={saveAndClose} disabled={!chords.length} />\n  );\n};\n","import React from 'react';\nimport { IconButton } from '@material-ui/core';\nimport { theme } from '../../utils/theme';\nimport { Icon } from './Icon';\n\ninterface Props {\n  onChange: (value: boolean) => void;\n  value: boolean;\n  className?: string;\n}\n\nexport const CheckboxIcon = ({ onChange, value, className }: Props) => {\n  return (\n    <IconButton onClick={() => onChange(!value)}>\n      <Icon\n        type='guitar'\n        fill={value ? theme.colors.black : theme.colors.grey[500]}\n      />\n    </IconButton>\n  );\n};\n","import React, { useContext } from 'react';\nimport { settingsStore } from '../../context/SettingsProvider';\nimport { CheckboxIcon } from '../global/CheckboxIcon';\n\nexport const GuitarModeSwitcher = () => {\n  const {\n    state: { chordsGuitarMode },\n    dispatch,\n  } = useContext(settingsStore);\n\n  const onChange = (value: boolean) => {\n    dispatch({\n      type: 'SET_CHORDS_GUITAR_MODE',\n      payload: value,\n    });\n  };\n\n  return <CheckboxIcon onChange={onChange} value={chordsGuitarMode} />;\n};\n","import { useContext } from 'react';\nimport styled from 'styled-components';\n\nimport { IconButton } from '@material-ui/core';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n\nimport { chordsAdderStore } from '../../context/ChordsAdderContext';\nimport { Icon } from '../global/Icon';\nimport { SaveChordsModal } from './SaveChordsModal';\nimport { PlayStopButton } from '../global/PlayStopButton';\nimport { ChordModel } from '../../dataset/all_chords_for_impro';\nimport { usePlayMelodyAndChords } from '../../hooks/usePlayMelodyAndChords';\nimport { GuitarModeSwitcher } from './GuitarModeSwitcher';\n\ninterface Props {\n  play?: boolean;\n  deleteLast?: boolean;\n  deleteAll?: boolean;\n  chords: ChordModel[];\n  onPlay?: (chords: ChordModel[]) => void;\n  onStop?: (chords: ChordModel[]) => void;\n}\n\nexport const Actions = ({ chords, onPlay, onStop }: Props) => {\n  const { dispatch } = useContext(chordsAdderStore);\n\n  const { handlePlaying, MPlayer, isPlaying } = usePlayMelodyAndChords({\n    chords,\n    onPlay,\n    onStop,\n  });\n\n  const deleteAll = () => {\n    dispatch({\n      type: 'DELETE_ALL_CHORDS',\n    });\n  };\n\n  const deleteLast = () => {\n    dispatch({\n      type: 'DELETE_LAST_CHORD',\n    });\n  };\n\n  const buttonsDisabled = !chords.length || isPlaying;\n\n  return (\n    <ActionsContainer>\n      <GuitarModeSwitcher />\n      {!!chords && !!chords.length && (\n        <PlayStopButton handlePlaying={handlePlaying} isPlaying={isPlaying} />\n      )}\n      <IconButton\n        className='icon'\n        disabled={buttonsDisabled}\n        onClick={deleteLast}\n      >\n        <Icon\n          type='material'\n          Icon={BackspaceIcon}\n          disabled={buttonsDisabled}\n          className='play-icon'\n        />\n      </IconButton>\n      <IconButton\n        className='icon'\n        disabled={buttonsDisabled}\n        onClick={deleteAll}\n      >\n        <Icon\n          type='material'\n          Icon={DeleteForeverIcon}\n          disabled={buttonsDisabled}\n          className='play-icon  remove-all-icon'\n        />\n      </IconButton>\n      <SaveChordsModal chords={chords} />\n      {MPlayer}\n    </ActionsContainer>\n  );\n};\n\nconst ActionsContainer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n\n  .icon {\n    &.disabled {\n      color: rgba(210, 210, 210, 0.3);\n      fill: rgba(210, 210, 210, 0.3);\n    }\n  }\n\n  .play-icon {\n    width: 30px;\n    height: 30px;\n  }\n\n  .remove-all-icon {\n    width: 35px;\n    height: 35px;\n  }\n`;\n","import React, { useContext, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport { routes } from '../../pages/routes';\n\nimport { Typography } from '@material-ui/core';\n\nimport styled from 'styled-components';\nimport { theme } from '../../utils/theme';\nimport { MetalBlock } from '../../styled/global';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\n\nimport { chordsAdderStore } from '../../context/ChordsAdderContext';\nimport { ChordModel } from '../../dataset/all_chords_for_impro';\nimport { convertChordToString } from '../../utils';\n\nimport { ChordWithEditModal } from './ChordWithEditModal';\nimport { StyledProgression } from '../../styled/Chords';\nimport { Button } from '../global/Button';\n\nimport { useMidiPlayer } from '../../utils/useMidiPlayer';\nimport { Actions } from './Actions';\nimport { useColorChords } from '../../hooks/useColorChords';\nimport { ChordCharts } from './ChordCharts';\nimport { settingsStore } from '../../context/SettingsProvider';\n\nexport const AddedChordsNew = () => {\n  const [playingChord] = useState<number | null>(null);\n  const history = useHistory();\n  const chordsPrefix = 'added-chords-';\n\n  const { Player, MPlayer } = useMidiPlayer();\n\n  const {\n    state: { addedChords, replacingChord },\n    dispatch,\n  } = useContext(chordsAdderStore);\n\n  const {\n    state: { chordsGuitarMode },\n  } = useContext(settingsStore);\n\n  const { colorChord, onPlay, onStop } = useColorChords({ chords: addedChords });\n\n  const onReplace = (previousChord: ChordModel, nextChord: ChordModel, idx: number) => {\n    dispatch({\n      type: 'ADD_CHORDS_FOR_REPLACE',\n      payload: { previous: previousChord, next: nextChord },\n    });\n\n    dispatch({\n      type: 'SET_REPLACING_CHORD',\n      payload: { chord: addedChords[idx], idx },\n    });\n  };\n\n  const onDelete = (chord: ChordModel, idx: number) => {\n    dispatch({\n      type: 'DELETE_CHORD',\n      payload: idx,\n    });\n  };\n\n  const onClose = () => {\n    dispatch({\n      type: 'ADD_CHORDS_TO_ADD',\n      payload: addedChords[addedChords.length - 1],\n    });\n  };\n\n  const openInMelodyEditor = () => {\n    history.push({\n      pathname: routes.melodyEditor,\n      state: { chords: addedChords },\n    });\n  };\n\n  return (\n    <Container>\n      <Header>\n        {!!addedChords.length ? (\n          <Typography className=\"added-title\" variant=\"h6\">\n            Added chords:\n          </Typography>\n        ) : (\n          <Typography className=\"added-title\" variant=\"h6\">\n            No chords\n          </Typography>\n        )}\n        <Actions chords={addedChords} onPlay={onPlay} onStop={onStop} />\n      </Header>\n\n      {!!addedChords.length && chordsGuitarMode && (\n        <ChordCharts selectedChord={colorChord} chords={addedChords} chordsPrefix={chordsPrefix} />\n      )}\n      {!!addedChords.length && !chordsGuitarMode && (\n        <AllChordsLines>\n          <StyledProgression>\n            <TransitionGroup className=\"list\">\n              {addedChords.map((chord: ChordModel, idx, arr) => (\n                <CSSTransition key={`chord-${chord[0]}-${idx}`} timeout={500} classNames=\"item\">\n                  <ChordWithEditModal\n                    className={`chord ${true && 'half'}`}\n                    isSelected={\n                      idx === replacingChord?.idx || idx === playingChord || idx === colorChord\n                    }\n                    onClose={() => onClose()}\n                    onDelete={() => onDelete(chord, idx)}\n                    onReplace={() => onReplace(arr[idx - 1], arr[idx + 1] || arr[0], idx)}\n                    playChord={() => Player?.playChord(chord)}\n                  >\n                    {convertChordToString(chord)}\n                  </ChordWithEditModal>\n                </CSSTransition>\n              ))}\n            </TransitionGroup>\n          </StyledProgression>\n        </AllChordsLines>\n      )}\n\n      {!!addedChords.length && (\n        <AddMelody>\n          <Button onClick={openInMelodyEditor} type=\"primary\">\n            Add melody\n          </Button>\n        </AddMelody>\n      )}\n      {MPlayer}\n    </Container>\n  );\n};\n\nconst Container = styled(MetalBlock)`\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  .added-title {\n    /* color: ${theme.colors.white}; */\n  }\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  @media ${theme.breakpoints.belowMobileL} {\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n`;\n\nconst AllChordsLines = styled.div`\n  margin: 20px 0;\n`;\n\nconst AddMelody = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`;\n","import { Typography } from '@material-ui/core';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { ChordModel } from '../../dataset/all_chords_for_impro';\nimport { MetalBlock } from '../../styled/global';\nimport { theme } from '../../utils/theme';\nimport { Button } from '../global/Button';\n\ninterface Props {\n  chords: ChordModel[];\n  title?: string;\n  onChordClick: (chord: ChordModel) => void;\n}\n\nexport const ChordsTitledLine = ({ chords, title, onChordClick }: Props) => {\n  return (\n    <Container>\n      {!!title && (\n        <TitleWrapper>\n          <Typography className=\"title\" variant=\"h6\">\n            {title}\n          </Typography>\n          {/* <Line /> */}\n        </TitleWrapper>\n      )}\n      <Chords>\n        {chords.length ? (\n          chords.map((chord, idx) => (\n            <Button\n              key={`${chord[0]}-${idx}`}\n              onClick={() => onChordClick(chord)}\n            >{`${chord[0]}${chord[1]}`}</Button>\n          ))\n        ) : (\n          <Typography className=\"title\" variant=\"subtitle1\">\n            No chords\n          </Typography>\n        )}\n      </Chords>\n    </Container>\n  );\n};\n\nconst Container = styled(MetalBlock)`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  padding: 0 10px 10px;\n\n  @media ${theme.breakpoints.belowTablet} {\n    padding: 0 10px 10px 5px;\n  }\n\n  .title {\n    /* color: ${theme.colors.white}; */\n\n    @media ${theme.breakpoints.belowTablet} {\n      font-size: 16px;\n    }\n  }\n`;\n\nconst Chords = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst TitleWrapper = styled.div`\n  height: 75px;\n  display: flex;\n  min-width: 200px;\n  align-items: center;\n  justify-content: center;\n\n  @media ${theme.breakpoints.belowTablet} {\n    height: unset;\n  }\n`;\n","import React, { useContext } from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport { Button as MatButton } from '@material-ui/core';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { chordsAdderStore } from '../../context/ChordsAdderContext';\nimport { Button } from '../global/Button';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap',\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120,\n    },\n  }),\n);\n\nexport function KeyMoodSelector() {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const {\n    state: { key, mood },\n    dispatch,\n  } = useContext(chordsAdderStore);\n\n  const handleKeyChange = (event: React.ChangeEvent<{ value: string }>) => {\n    dispatch({\n      type: 'SET_START_KEY',\n      payload: event.target.value,\n    });\n  };\n\n  const handleMoodChange = (event: React.ChangeEvent<{ value: string }>) => {\n    dispatch({\n      type: 'SET_START_MOOD',\n      payload: event.target.value === 'm' ? 'm' : '',\n    });\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const getMoodLabel = (value: '' | 'm') => {\n    return value === 'm' ? 'Minor' : 'Major';\n  };\n\n  return (\n    <div>\n      <Button onClick={handleClickOpen}>{`Key: ${key}${mood}`}</Button>\n      <Dialog open={open} onClose={handleClose}>\n        <DialogTitle>Set key and mood</DialogTitle>\n        <DialogContent>\n          <form className={classes.container}>\n            <FormControl className={classes.formControl}>\n              <InputLabel htmlFor=\"demo-dialog-native\">Key</InputLabel>\n              <Select\n                labelId=\"demo-dialog-native-label\"\n                value={key}\n                onChange={handleKeyChange}\n                input={<Input id=\"demo-dialog-native\" />}\n              >\n                <MenuItem value={'C'}>C</MenuItem>\n                <MenuItem value={'C#'}>C#</MenuItem>\n                <MenuItem value={'D'}>D</MenuItem>\n                <MenuItem value={'D#'}>D#</MenuItem>\n                <MenuItem value={'E'}>E</MenuItem>\n                <MenuItem value={'F'}>F</MenuItem>\n                <MenuItem value={'F#'}>F#</MenuItem>\n                <MenuItem value={'G'}>G</MenuItem>\n                <MenuItem value={'G#'}>G#</MenuItem>\n                <MenuItem value={'A'}>A</MenuItem>\n                <MenuItem value={'A#'}>A#</MenuItem>\n                <MenuItem value={'B'}>B</MenuItem>\n              </Select>\n            </FormControl>\n            <FormControl className={classes.formControl}>\n              <InputLabel htmlFor=\"demo-dialog-select-input\">Mood</InputLabel>\n              <Select\n                labelId=\"demo-dialog-select-label\"\n                id=\"demo-dialog-select\"\n                value={mood === '' ? 'maj' : 'm'}\n                onChange={handleMoodChange}\n                input={<Input id=\"demo-dialog-select-input\" />}\n              >\n                <MenuItem value={'maj'}>{getMoodLabel('')}</MenuItem>\n                <MenuItem value={'m'}>{getMoodLabel('m')}</MenuItem>\n              </Select>\n            </FormControl>\n          </form>\n        </DialogContent>\n        <DialogActions>\n          <MatButton onClick={handleClose} color=\"inherit\">\n            Cancel\n          </MatButton>\n          <MatButton onClick={handleClose} color=\"inherit\">\n            Ok\n          </MatButton>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import { IconButton } from '@material-ui/core';\nimport { useContext, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { chordsAdderStore } from '../../context/ChordsAdderContext';\nimport { settingsStore } from '../../context/SettingsProvider';\nimport {\n  ChordModel,\n  ChordsMode,\n  MajorChords,\n  MinorChords,\n  UnstableChords,\n} from '../../dataset/all_chords_for_impro';\nimport { MetalBlock } from '../../styled/global';\nimport { sortChordsByType } from '../../utils';\nimport { theme } from '../../utils/theme';\nimport { useMidiPlayer } from '../../utils/useMidiPlayer';\nimport { Icon } from '../global/Icon';\nimport { ChordsTitledLine } from './ChordsTitledLine';\nimport { KeyMoodSelector } from './KeySelector';\n\nexport const ChordsToAdd = () => {\n  const { state, dispatch } = useContext(chordsAdderStore);\n  const {\n    state: { chordsToGenerateCount, chordsMode },\n  } = useContext(settingsStore);\n\n  const { Player, MPlayer } = useMidiPlayer();\n\n  const onChordClick = (chord: ChordModel) => {\n    Player?.playChord(chord);\n\n    if (state.replacingChord) {\n      dispatch({\n        type: 'REPLACE_CHORD',\n        payload: chord,\n      });\n\n      dispatch({\n        type: 'SET_REPLACING_CHORD',\n        payload: null,\n      });\n    } else {\n      dispatch({\n        type: 'ADD_CHORD',\n        payload: chord,\n      });\n    }\n  };\n\n  const onRandomClick = () => {\n    if (chordsMode === ChordsMode.SingleTonality) {\n      dispatch({\n        type: 'ADD_RANDOM_CHORDS_TO_ADD_SINGLE_TONE',\n        payload: chordsToGenerateCount,\n      });\n    } else {\n      dispatch({\n        type: 'ADD_RANDOM_CHORDS_TO_ADD',\n        payload: chordsToGenerateCount,\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (chordsMode === ChordsMode.SingleTonality) {\n      dispatch({\n        type: 'ADD_INITIAL_CHORDS_TO_ADD_SINGLE_TONE',\n      });\n\n      return;\n    }\n\n    if (!state.addedChords.length) {\n      dispatch({\n        type: 'ADD_INITIAL_CHORDS_TO_ADD',\n      });\n    } else {\n      const lastChord = state.addedChords[state.addedChords.length - 1];\n\n      dispatch({\n        type: 'ADD_CHORDS_TO_ADD',\n        payload: lastChord,\n      });\n    }\n  }, [state.addedChords, state.key, state.mood, dispatch]);\n\n  return (\n    <Container>\n      <Actions>\n        <IconButton onClick={onRandomClick}>\n          <Icon type='radom' className='random-icon' />\n        </IconButton>\n        <KeyMoodSelector />\n      </Actions>\n      <Chords>\n        <ChordsTitledLine\n          onChordClick={onChordClick}\n          chords={sortChordsByType(Object.values(MinorChords), state.chordsToAdd)}\n          title='Minor chords:'\n        />\n        <ChordsTitledLine\n          onChordClick={onChordClick}\n          chords={sortChordsByType(Object.values(MajorChords), state.chordsToAdd)}\n          title='Major chords:'\n        />\n        <ChordsTitledLine\n          onChordClick={onChordClick}\n          chords={sortChordsByType(Object.values(UnstableChords), state.chordsToAdd)}\n          title='Unstable chords:'\n        />\n      </Chords>\n      {MPlayer}\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  /* padding: 20px; */\n`;\n\nconst Chords = styled.div`\n  > div {\n    flex: 1;\n  }\n\n  display: flex;\n  justify-content: space-between;\n\n  @media ${theme.breakpoints.belowTablet} {\n    flex-direction: column;\n  }\n`;\n\nconst Actions = styled(MetalBlock)`\n  display: flex;\n  justify-content: flex-start;\n\n  .random-icon {\n    width: 30px;\n    height: 30px;\n  }\n`;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { AddedChordsNew } from '../../components/Chords/AddedChordsNew';\nimport { ChordsToAdd } from '../../components/Chords/ChordsToAdd';\nimport { PageTitle } from '../../components/global/PageTitle';\n\nexport const ChordEditorPage = () => {\n  return (\n    <Container>\n      <PageTitle title='Chords Editor' />\n      <ChordsToAdd />\n      <AddedChordsNew />\n    </Container>\n  );\n};\n\nconst Container = styled.div``;\n","import React from 'react';\nimport { HashRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport Header from '../components/Header/Header';\nimport { AboutPage } from './AboutPage';\nimport { MainPage } from './MainPage';\nimport { routes } from './routes';\nimport { MelodiesPage } from './Melodies/MelodiesPage';\nimport { theme } from '../utils/theme';\nimport Footer from '../components/Footer/Footer';\nimport { SavedPage } from './SavedPage';\nimport { ChordEditorPage } from './Chords/ChordEditorPage';\n\nexport default function MainRouter() {\n  return (\n    <Router>\n      <GlobalStyles />\n      <Header />\n      <Body>\n        <Switch>\n          <Redirect exact from='/' to={routes.chordsEditor} />\n          <Route path={routes.chordsEditor}>\n            <ChordEditorPage />\n          </Route>\n          <Route path={routes.melodyEditor}>\n            <MelodiesPage />\n          </Route>\n          <Route path={routes.saved}>\n            <SavedPage />\n          </Route>\n          <Route path={routes.about}>\n            <AboutPage />\n          </Route>\n          <Route path={routes.root}>\n            <MainPage />\n          </Route>\n        </Switch>\n        <Footer />\n      </Body>\n    </Router>\n  );\n}\n\nconst Body = styled.div`\n  /* background-color: #60656f; */\n  background-color: ${theme.colors.white};\n  border-radius: 2px;\n  overflow: hidden;\n  /* -webkit-box-shadow: 0px 5px 15px 0px #333333;\n  box-shadow: 0px 5px 15px 0px #333333; */\n  margin-top: 30px;\n`;\n\nconst GlobalStyles = createGlobalStyle`\n  body {\n    background-color: ${theme.colors.white};\n    max-width: 1440px;\n    margin: 0 auto;\n    padding: 0 50px;\n\n    @media ${theme.breakpoints.belowTabletM} {\n      padding: 0 10px;\n    }\n\n  }\n`;\n","import React from 'react';\r\nimport GlobalFonts from './styled/fonts';\r\nimport './App.css';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport { createMuiTheme } from '@material-ui/core';\r\nimport MainRouter from './pages/rootRouter';\r\nimport { ChordsAdderProvider } from './context/ChordsAdderContext';\r\nimport { SettingsProvider } from './context/SettingsProvider';\r\nimport { useSettings } from './hooks/useSettings';\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    type: 'dark',\r\n  },\r\n});\r\n\r\nconst App = () => {\r\n  useSettings();\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <SettingsProvider>\r\n        <ChordsAdderProvider>\r\n          <GlobalFonts />\r\n          <MainRouter />\r\n        </ChordsAdderProvider>\r\n      </SettingsProvider>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React, { useContext, useEffect } from 'react';\nimport { settingsStore } from '../context/SettingsProvider';\nimport { getSettings } from '../localStorageUtils/settingsStorage';\n\nexport const useSettings = () => {\n  const { dispatch } = useContext(settingsStore);\n\n  useEffect(() => {\n    dispatch({\n      type: 'SET_SETTINGS',\n      payload: getSettings(),\n    });\n  }, []);\n};\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}