(this.webpackJsonpparter=this.webpackJsonpparter||[]).push([[0],{19:function(e,t,a){e.exports=a(43)},24:function(e,t,a){},25:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o);a(24),a(25);function s(){return r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,'CyberAliosha\'s "Parter"'))}var c=a(1),d=a(2),l=a(5),h=a(4),u=a(3),C=a(6),m=a(7),A=["1","2","4","8","16"],F=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],D=a(13),f=[[["A","m",["A","C","E"],["A","B","C","D","E","F","G"]],["A","m7",["A","C","E","G"],["A","B","C","D","E","F","G"]],["A","m7",["A","C","E","G"],["A","B","C","D","E","F","G"]],["A","m7b5",["A","C","D#","G"],["A","A#","C","D","D#","F","G"]],["A","",["A","C#","E"],["A","B","C#","D","E","F#","G#"]],["A","7",["A","C#","E","G"],["A","B","C#","D","E","F#","G"]],["A","7",["A","C#","E","G"],["A","B","C#","D","E","F#","G"]],["A","maj",["A","C#","E","G#"],["A","B","C#","D","E","F#","G#"]],["A","maj",["A","C#","E","G#"],["A","B","C#","D","E","F#","G#"]],["A","dim7",["A","C","D#","F#"],["A#","C","D#","D","F#","G"]]],[["A#","m",["A#","C#","F"],["A#","C","C#","D#","F","F#","G#"]],["A#","m7",["A#","C#","F","G#"],["A#","C","C#","D#","F","F#","G#"]],["A#","m7",["A#","C#","F","G#"],["A#","C","C#","D#","F","F#","G#"]],["A#","m7b5",["A#","C#","E","G#"],["A#","B","C#","D#","E","F#","G#"]],["A#","",["A#","D","F"],["A#","C","D","D#","F","G","A"]],["A#","7",["A#","D","F","G#"],["A#","C","D","D#","F","G","G#"]],["A#","7",["A#","D","F","G#"],["A#","C","D","D#","F","G","G#"]],["A#","maj",["A#","D","F","A"],["A#","C","D","D#","F","G","A"]],["A#","maj",["A#","D","F","A"],["A#","C","D","D#","F","G","A"]],["A#","dim7",["A#","C#","E","G"],["B","C#","E","D#","G","G#"]]],[["B","m",["B","D","F#"],["B","C#","D","E","F#","G","A"]],["B","m7",["B","D","F#","A"],["B","C#","D","E","F#","G","A"]],["B","m7",["B","D","F#","A"],["B","C#","D","E","F#","G","A"]],["B","m7b5",["B","D","F","A"],["B","C","D","E","F","G","A"]],["B","",["B","D#","F#"],["B","C#","D#","E","F#","G#","A#"]],["B","7",["B","D#","F#","A"],["B","C#","D#","E","F#","G#","A"]],["B","7",["B","D#","F#","A"],["B","C#","D#","E","F#","G#","A"]],["B","maj",["B","D#","F#","A#"],["B","C#","D#","E","F#","G#","A#"]],["B","maj",["B","D#","F#","A#"],["B","C#","D#","E","F#","G#","A#"]],["B","dim7",["B","D","F","G#"],["C","D","F","E","G#","A"]]],[["C","m",["C","D#","G"],["C","D","D#","F","G","G#","A#"]],["C","m7",["C","D#","G","A#"],["C","D","D#","F","G","G#","A#"]],["C","m7",["C","D#","G","A#"],["C","D","D#","F","G","G#","A#"]],["C","m7b5",["C","D#","F#","A#"],["C","C#","D#","F","F#","G#","A#"]],["C","",["C","E","G"],["C","D","E","F","G","A","B"]],["C","7",["C","E","G","A#"],["C","D","E","F","G","A","A#"]],["C","7",["C","E","G","A#"],["C","D","E","F","G","A","A#"]],["C","maj",["C","E","G","B"],["C","D","E","F","G","A","B"]],["C","maj",["C","E","G","B"],["C","D","E","F","G","A","B"]],["C","dim7",["C","D#","F#","A"],["C#","D#","F#","F","A","A#"]]],[["C#","m",["C#","E","G#"],["C#","D#","E","F#","G#","A","B"]],["C#","m7",["C#","E","G#","B"],["C#","D#","E","F#","G#","A","B"]],["C#","m7",["C#","E","G#","B"],["C#","D#","E","F#","G#","A","B"]],["C#","m7b5",["C#","E","G","B"],["C#","D","E","F#","G","A","B"]],["C#","",["C#","F","G#"],["C#","D#","F","F#","G#","A#","C"]],["C#","7",["C#","F","G#","B"],["C#","D#","F","F#","G#","A#","B"]],["C#","7",["C#","F","G#","B"],["C#","D#","F","F#","G#","A#","B"]],["C#","maj",["C#","F","G#","C"],["C#","D#","F","F#","G#","A#","C"]],["C#","maj",["C#","F","G#","C"],["C#","D#","F","F#","G#","A#","C"]],["C#","dim7",["C#","E","G","A#"],["D","E","G","F#","A#","B"]]],[["D","m",["D","F","A"],["D","E","F","G","A","A#","C"]],["D","m7",["D","F","A","C"],["D","E","F","G","A","A#","C"]],["D","m7",["D","F","A","C"],["D","E","F","G","A","A#","C"]],["D","m7b5",["D","F","G#","C"],["D","D#","F","G","G#","A#","C"]],["D","",["D","F#","A"],["D","E","F#","G","A","B","C#"]],["D","7",["D","F#","A","C"],["D","E","F#","G","A","B","C"]],["D","7",["D","F#","A","C"],["D","E","F#","G","A","B","C"]],["D","maj",["D","F#","A","C#"],["D","E","F#","G","A","B","C#"]],["D","maj",["D","F#","A","C#"],["D","E","F#","G","A","B","C#"]],["D","dim7",["D","F","G#","B"],["D#","F","G#","G","B","C"]]],[["D#","m",["D#","F#","A#"],["D#","F","F#","G#","A#","B","C#"]],["D#","m7",["D#","F#","A#","C#"],["D#","F","F#","G#","A#","B","C#"]],["D#","m7",["D#","F#","A#","C#"],["D#","F","F#","G#","A#","B","C#"]],["D#","m7b5",["D#","F#","A","C#"],["D#","E","F#","G#","A","B","C#"]],["D#","",["D#","G","A#"],["D#","F","G","G#","A#","C","D"]],["D#","7",["D#","G","A#","C#"],["D#","F","G","G#","A#","C","C#"]],["D#","7",["D#","G","A#","C#"],["D#","F","G","G#","A#","C","C#"]],["D#","maj",["D#","G","A#","D"],["D#","F","G","G#","A#","C","D"]],["D#","maj",["D#","G","A#","D"],["D#","F","G","G#","A#","C","D"]],["D#","dim7",["D#","F#","A","C"],["E","F#","A","G#","C","C#"]]],[["E","m",["E","G","B"],["E","F#","G","A","B","C","D"]],["E","m7",["E","G","B","D"],["E","F#","G","A","B","C","D"]],["E","m7",["E","G","B","D"],["E","F#","G","A","B","C","D"]],["E","m7b5",["E","G","A#","D"],["E","F","G","A","A#","C","D"]],["E","",["E","G#","B"],["E","F#","G#","A","B","C#","D#"]],["E","7",["E","G#","B","D"],["E","F#","G#","A","B","C#","D"]],["E","7",["E","G#","B","D"],["E","F#","G#","A","B","C#","D"]],["E","maj",["E","G#","B","D#"],["E","F#","G#","A","B","C#","D#"]],["E","maj",["E","G#","B","D#"],["E","F#","G#","A","B","C#","D#"]],["E","dim7",["E","G","A#","C#"],["F","G","A#","A","C#","D"]]],[["F","m",["F","G#","C"],["F","G","G#","A#","C","C#","D#"]],["F","m7",["F","G#","C","D#"],["F","G","G#","A#","C","C#","D#"]],["F","m7",["F","G#","C","D#"],["F","G","G#","A#","C","C#","D#"]],["F","m7b5",["F","G#","B","D#"],["F","F#","G#","A#","B","C#","D#"]],["F","",["F","A","C"],["F","G","A","A#","C","D","E"]],["F","7",["F","A","C","D#"],["F","G","A","A#","C","D","D#"]],["F","7",["F","A","C","D#"],["F","G","A","A#","C","D","D#"]],["F","maj",["F","A","C","E"],["F","G","A","A#","C","D","E"]],["F","maj",["F","A","C","E"],["F","G","A","A#","C","D","E"]],["F","dim7",["F","G#","B","D"],["F#","G#","B","A#","D","D#"]]],[["F#","m",["F#","A","C#"],["F#","G#","A","B","C#","D","E"]],["F#","m7",["F#","A","C#","E"],["F#","G#","A","B","C#","D","E"]],["F#","m7",["F#","A","C#","E"],["F#","G#","A","B","C#","D","E"]],["F#","m7b5",["F#","A","C","E"],["F#","G","A","B","C","D","E"]],["F#","",["F#","A#","C#"],["F#","G#","A#","B","C#","D#","F"]],["F#","7",["F#","A#","C#","E"],["F#","G#","A#","B","C#","D#","E"]],["F#","7",["F#","A#","C#","E"],["F#","G#","A#","B","C#","D#","E"]],["F#","maj",["F#","A#","C#","F"],["F#","G#","A#","B","C#","D#","F"]],["F#","maj",["F#","A#","C#","F"],["F#","G#","A#","B","C#","D#","F"]],["F#","dim7",["F#","A","C","D#"],["G","A","C","B","D#","E"]]],[["G","m",["G","A#","D"],["G","A","A#","C","D","D#","F"]],["G","m7",["G","A#","D","F"],["G","A","A#","C","D","D#","F"]],["G","m7",["G","A#","D","F"],["G","A","A#","C","D","D#","F"]],["G","m7b5",["G","A#","C#","F"],["G","G#","A#","C","C#","D#","F"]],["G","",["G","B","D"],["G","A","B","C","D","E","F#"]],["G","7",["G","B","D","F"],["G","A","B","C","D","E","F"]],["G","7",["G","B","D","F"],["G","A","B","C","D","E","F"]],["G","maj",["G","B","D","F#"],["G","A","B","C","D","E","F#"]],["G","maj",["G","B","D","F#"],["G","A","B","C","D","E","F#"]],["G","dim7",["G","A#","C#","E"],["G#","A#","C#","C","E","F"]]],[["G#","m",["G#","B","D#"],["G#","A#","B","C#","D#","E","F#"]],["G#","m7",["G#","B","D#","F#"],["G#","A#","B","C#","D#","E","F#"]],["G#","m7",["G#","B","D#","F#"],["G#","A#","B","C#","D#","E","F#"]],["G#","m7b5",["G#","B","D","F#"],["G#","A","B","C#","D","E","F#"]],["G#","",["G#","C","D#"],["G#","A#","C","C#","D#","F","G"]],["G#","7",["G#","C","D#","F#"],["G#","A#","C","C#","D#","F","F#"]],["G#","7",["G#","C","D#","F#"],["G#","A#","C","C#","D#","F","F#"]],["G#","maj",["G#","C","D#","G"],["G#","A#","C","C#","D#","F","G"]],["G#","maj",["G#","C","D#","G"],["G#","A#","C","C#","D#","F","G"]],["G#","dim7",["G#","B","D","F"],["A","B","D","C#","F","F#"]]]];function G(e,t){return Math.floor(Math.random()*(t-e))+e}function p(e,t,a){return f.find((function(a){return a[0][0]===y(e,t,F)})).find((function(e){return e[1]===a}))}var b=new D.PolySynth(5,D.AMSynth).toMaster();function E(e){var t,a;return"#"===e[1]?(t=e.slice(0,2),a=e.slice(2)):(t=e.slice(0,1),a=e.slice(1)),[t,a]}function v(e,t){console.log("notesLengthType",e);for(var a={often:[2,4,8,8,8,16],middle:[2,4,4,4,4,8,8,8],seldom:[1,1,2,2,2,4],veryOften:[8,16],verySeldom:[1,2],whole:[1],half:[2],quarter:[4],eight:[8],sixteen:[16]},n=[],r=0;r<1;){var o=1/a[e][G(0,a[e].length)];n.push(o),r+=o}return n[n.length-1]=n[n.length-1]-(r-1),n}function y(e,t,a){var n=a.indexOf(e);return t<0&&(t=a.length-t),a[(n+t)%a.length]}function B(e){return r.a.createElement("button",{id:e.id,key:e.id,className:"btn btn-outline-dark",onClick:function(t){e.handleClick(t),function(e){var t=E(e),a=p(t[0],0,t[1])[2],n=!0,r=!1,o=void 0;try{for(var i,s=a[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value;b.triggerAttackRelease(c+"4",1)}}catch(d){r=!0,o=d}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}(e.chordName)}},e.chordName)}function g(e){return r.a.createElement("button",{className:"".concat(e.class," btn-outline-dark"),onClick:e.handleClick},e.text)}function j(e){return r.a.createElement("div",{className:"chord-menu"},r.a.createElement(g,{class:"btn",handleClick:e.deleteChord,text:"Delete chord"}),r.a.createElement(g,{class:"btn",handleClick:e.replaceChord,text:"Replace chord"}),r.a.createElement(g,{class:"btn",handleClick:e.deselectChord,text:"Cancel"}))}var k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(C.a)(t,e),Object(d.a)(t,[{key:"showMenu",value:function(){var e=this;return this.props.isSelection&&r.a.createElement(j,{deleteChord:function(){return e.props.deleteChord(e.props.selectedChord)},replaceChord:this.props.replaceChord,deselectChord:this.props.deselectChord})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"added-chords text-white"},r.a.createElement("h3",{className:"App-chord-editor text-white"},"Added Chords"),this.showMenu(),this.props.chords.length>0?r.a.createElement("div",{className:"grid-col-4"},this.props.chords.map((function(t,a){return r.a.createElement(B,{id:a+"-added-chord",key:a+"-added-chord",chordName:t,handleClick:e.props.selectChord})}))):"Chords have not been added!")}}]),t}(n.Component),O=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App-chord-editor "},r.a.createElement("h3",null,"Chord Adder"),r.a.createElement("div",{className:"grid-col-4"},this.props.chords?this.props.chords.map((function(t,a){return r.a.createElement(B,{key:a+"-chord-to-add",id:a+"-chord-to-add",chordName:t[0]+t[1],handleClick:e.props.handleClick})})):null))}}]),t}(n.Component);function w(e){if(e){var t;if("dim7"===e[1]){switch(G(1,5)){case 1:t=p(e[0],1,"maj");break;case 2:t=p(e[0],4,"m7");break;case 3:t=p(e[0],7,"maj");break;case 4:t=p(e[0],10,"m")}return t}if("7"===e[1])return t=p(e[0],5,Math.random()>.5?"m7":"maj");if("m7b5"===e[1]){switch(G(1,8)){case 1:t=p(e[0],5,"7");break;case 2:t=p(e[0],9,"dim7")}return t=p(e[0],5,"7")}if("m"===e[1]||"m7"===e[1]||"mAdd9"===e[1]){switch(G(1,5)){case 1:t=p(e[0],3,"maj");break;case 2:t=p(e[0],5,"m7");break;case 3:t=p(e[0],7,"7");break;case 4:t=p(e[0],8,"maj")}return t}if(""===e[1]||"maj"===e[1]){switch(G(1,10)){case 1:t=p(e[0],2,"m");break;case 2:t=p(e[0],4,"m7");break;case 3:t=p(e[0],5,"maj");break;case 4:t=p(e[0],7,"7");break;case 5:t=p(e[0],9,"m7");break;case 6:t=p(e[0],11,"m7b5");break;case 7:t=p(e[0],2,"7");break;case 8:t=p(e[0],11,"m7");break;case 9:t=p(e[0],7,"maj")}return t}return t}}var S=function(){function e(){Object(c.a)(this,e),this.chords=[]}return Object(d.a)(e,[{key:"generateChords",value:function(e,t){for(var a=[],n=0;n<t;n++){var r=w(a[n-1]);if(r)a.push(r);else{var o=e[G(0,e.length)],i=o[G(0,o.length)];a.push(i)}}return a.slice(0,t)}},{key:"getNewChords",value:function(e){return this.generateChords(f,e)}},{key:"getChords",value:function(){return this.chords}}]),e}(),P=function(){function e(){Object(c.a)(this,e)}return Object(d.a)(e,[{key:"searchItems",value:function(e){if(e){if("dim7"===(e=E(e))[1])return N(e,[0,"dim7"],[1,"maj"],[4,"m7"],[7,"maj"],[10,"m"]);if("7"===e[1])return N(e,[0,"7"],[5,"m7"],[5,"m"],[5,""],[5,"maj"],[2,"m"],[2,"m7"]);if("m7b5"===e[1])return N(e,[0,"m7b5"],[10,"m"],[10,"m7"],[5,"7"],[9,"dim7"]);if("m"===e[1]||"m7"===e[1]||"mAdd9"===e[1])return N(e,[0,"m"],[0,"m7"],[2,"7"],[3,"maj"],[5,"m7"],[7,"7"],[7,"m7"],[8,"maj"],[10,"maj"]);if(""===e[1]||"maj"===e[1])return N(e,[0,""],[0,"maj"],[2,"m"],[4,""],[4,"7"],[4,"m7"],[5,"maj"],[7,"7"],[9,"m7"],[11,"m7b5"],[2,"7"],[11,"m7"],[7,"maj"]);if(!(void 0).length)throw new Error("Unknown chord ".concat(e[0]+e[1]))}}}]),e}();function N(e){for(var t=[],a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];return n.forEach((function(a){t.push(p(e[0],a[0],a[1]))})),t}var x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).chordsCreator=new S,a.chordSearcher=new P,a.addChord=a.addChord.bind(Object(u.a)(a)),a.deleteChord=a.deleteChord.bind(Object(u.a)(a)),a.replaceChord=a.replaceChord.bind(Object(u.a)(a)),a.setUpForReplace=a.setUpForReplace.bind(Object(u.a)(a)),a.selectChord=a.selectChord.bind(Object(u.a)(a)),a.deselectChord=a.deselectChord.bind(Object(u.a)(a)),a.liftUpChords=a.liftUpChords.bind(Object(u.a)(a)),a.proposeChordsForLast=a.proposeChordsForLast.bind(Object(u.a)(a)),a.getRandomChords=a.getRandomChords.bind(Object(u.a)(a)),a.toggleAddedChordsLabel=a.toggleAddedChordsLabel.bind(Object(u.a)(a)),a.state={chordsToAdd:a.chordSearcher.searchItems("C"),addedChords:[],isForReplace:!1,isSelection:!1,selectedChord:null,addedChordsLabel:"Click 'Set these chords' to set"},a}return Object(C.a)(t,e),Object(d.a)(t,[{key:"liftUpChords",value:function(){this.state.addedChords.length<1?this.toggleAddedChordsLabel(2):(this.props.setChords(this.state.addedChords,!0),this.toggleAddedChordsLabel(1))}},{key:"toggleAddedChordsLabel",value:function(e){this.setState({addedChordsLabel:{0:"Click 'Set these chords' to set",1:"Chords have been added!",2:"Chords have not been added!"}[e]})}},{key:"selectChord",value:function(e){this.setState({isSelection:!0,selectedChord:e.target})}},{key:"deselectChord",value:function(){this.setState({isSelection:!1,isForReplace:!1,selectedChord:null}),this.proposeChordsForLast()}},{key:"addChord",value:function(e){var t=Object(m.a)(this.state.addedChords);this.setState({chordsToAdd:this.chordSearcher.searchItems(e.target.innerText),addedChords:[].concat(Object(m.a)(t),[e.target.innerText])})}},{key:"deleteChord",value:function(e){var t=+e.id[0],a=Object(m.a)(this.state.addedChords);a.splice(t,1),this.setState({addedChords:a})}},{key:"proposeChordsForLast",value:function(){var e=this.state.addedChords[this.state.addedChords.length-1];console.log(e),this.setState({chordsToAdd:this.chordSearcher.searchItems(e)})}},{key:"setUpForReplace",value:function(){var e=+this.state.selectedChord.id[0],t=0===e?0:e-1;this.setState({chordsToAdd:this.chordSearcher.searchItems(this.state.addedChords[t]),isForReplace:!0})}},{key:"replaceChord",value:function(e){var t=+this.state.selectedChord.id[0],a=Object(m.a)(this.state.addedChords);a.splice(t,1,e.target.innerText),this.setState({addedChords:a,isForReplace:!1})}},{key:"getRandomChords",value:function(){var e=this.chordsCreator.getNewChords(8);console.log(e),this.setState({addedChords:e.map((function(e){return e[0]+e[1]}))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"text-white"},r.a.createElement(k,{chords:this.state.addedChords,selectedChord:this.state.selectedChord,selectChord:this.selectChord,isSelection:this.state.isSelection,deleteChord:this.deleteChord,replaceChord:this.setUpForReplace,deselectChord:this.deselectChord}),r.a.createElement(O,{chords:this.state.chordsToAdd,handleClick:this.state.isForReplace?this.replaceChord:this.addChord}),r.a.createElement(g,{handleClick:this.getRandomChords,text:"Set random chords",class:"btn btn-big mb-20"}),r.a.createElement("div",null,r.a.createElement(g,{handleClick:this.liftUpChords,text:"Set these chords",class:"btn btn-big mb-20"})),this.state.addedChordsLabel)}}]),t}(n.Component);function R(e){var t=e.name,a=e.id,n=e.options,o=e.handleChange;return r.a.createElement("select",{name:t,key:a,id:a,onChange:o,className:"selector mb-20"},n.map((function(e,a){return r.a.createElement("option",{key:a,value:e[0]},"".concat(t,": ").concat(e[1]))})))}var M=function(){function e(){Object(c.a)(this,e)}return Object(d.a)(e,[{key:"getPattern",value:function(e,t){var a=v(e),n=[];return a.forEach((function(e,r){console.log(r),0===r&&"bass"===t?(console.log("bass 0 note tonic"),n.push({chordPitch:0,dur:e})):"bass"===t&&1===r&&a[0]<.25?(console.log("bass 1 note tonic"),n.push({chordPitch:0,dur:e})):(console.log("not the bass"),n.push({chordPitch:G(0,3),dur:e}))})),console.log(n),console.log(n.reduce((function(e,t){return e+t.dur}),0)),n}}]),e}(),L=function(){function e(t,a){Object(c.a)(this,e),this.type=a,this.notesLengthMode=t,this.toneJsArr=[]}return Object(d.a)(e,[{key:"getRandomBar",value:function(e,t,a,n){return this.toneJsArr=this.createRandomBar(e,a,n),this.createOctave(t),this.toneJsArr}},{key:"createRandomBar",value:function(e,t,a){var n=[];if(t)return t.map((function(t){n.push({note:Math.random()>a?e[2][t.chordPitch]:"",dur:t.dur})})),n;for(var r=v(this.notesLengthMode),o=0;o<r.length;o++){var i=this.createRandomNote(e[2],r[o],null,a);n.push(i)}return n}},{key:"createOctave",value:function(e){"soprano"===this.type&&(this.toneJsArr=this.toneJsArr.map((function(t){return t.note?(t.note=t.note+(e%5===0?"4":e%9===0?"6":"5"),t):t}))),"bass"===this.type&&(this.toneJsArr=this.toneJsArr.map((function(t){return t.note?(t.note=t.note+(e%6===0?"2":"3"),t):t}))),"tenor"===this.type&&(this.toneJsArr=this.toneJsArr.map((function(t){return t.note?(t.note=t.note+(e%6===0?"3":"4"),t):t})))}},{key:"createRandomNote",value:function(e,t,a,n){var r=G(0,e.length);return{note:Math.random()>n?a||e[r]:"",dur:t||1/+A[G(1,A.length)]}}}]),e}(),T=function(){function e(t,a,n){Object(c.a)(this,e),console.log("partOptions",n),this.pattern="accompaniment"===n.pattern&&(new M).getPattern(n.notes,n.type),console.log("this pattern",this.pattern),this.chords=t,this.barCreator=new L(n.notes,n.type),this.squaresCountToAdd=a,this.notes=[],console.log("partOptions.restProbability",n.restProbability),this.onInit(n.restProbability/100)}return Object(d.a)(e,[{key:"onInit",value:function(e){this.createRandomPart(e)}},{key:"createRandomPart",value:function(e){for(var t=0;t<this.squaresCountToAdd;t++)for(var a in this.chords){var n=this.barCreator.getRandomBar(this.chords[a],a,this.pattern,e);this.notes=[].concat(Object(m.a)(this.notes),Object(m.a)(n))}}}]),e}(),I=function(){function e(t,a){Object(c.a)(this,e),this.chords=t,this.parts=[],this.squaresCount=a}return Object(d.a)(e,[{key:"addPart",value:function(e){var t=new T(this.chords,this.squaresCount,e).notes;return console.log(JSON.stringify(t)),this.parts.push(t),t}},{key:"getParts",value:function(){return this.parts}}]),e}(),U=a(10),J=a.n(U),q=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(c.a)(this,e),this.chords=t||new S(a),this.partsFabric=new I(t||this.chords.getChords(),n),this.file=new J.a.File,this.parts=[],this.tempo=G(80,130)}return Object(d.a)(e,[{key:"addPart",value:function(e){return this.partsFabric.addPart(e)}},{key:"createMidiFile",value:function(){this.file=new J.a.File}},{key:"addAllPartsInFile",value:function(){var e=this;this.partsFabric.getParts().forEach((function(t){return e.addPartInFIle(t)}))}},{key:"addPartInFIle",value:function(e){var t=new J.a.Track;t.instrument(0,30),t.setTempo(this.tempo);var a=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value;t.addNote(0,s.note,512*s.dur)}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}this.file.addTrack(t)}},{key:"getURI",value:function(){return"data:audio/mid;base64,"+btoa(this.file.toBytes())}}]),e}(),H=function(){function e(){Object(c.a)(this,e),this.userChords=null,this.midiCreator=null,this.partOptions={type:"soprano",notesLength:"often",function:"solo",restProbability:.2}}return Object(d.a)(e,[{key:"createNewFile",value:function(e){this.midiCreator=new q(e)}},{key:"generateMidi",value:function(){this.midiCreator.addAllPartsInFile()}},{key:"addNewPart",value:function(){return this.midiCreator.addPart(this.partOptions)}},{key:"getURI",value:function(){return this.midiCreator.getURI()}}]),e}(),W=[["soprano","Soprano"],["tenor","Tenor"],["bass","Bass"]],_=[["solo","Solo"],["accompaniment","Accompaniment"]],Q=[["often","Often notes"],["middle","Middle notes"],["seldom","Seldom notes"],["veryOften","Very often notes"],["verySeldom","Very seldom notes"],["whole","Whole notes"],["half","Half notes"],["quarter","Quarter notes"],["eight","Eight notes"],["sixteen","Sixteen notes"]],V=a(9),$=a(8),z=a.n($);function K(e){var t=e.partOptions,a=Object(n.useRef)(null),o=Object(n.useState)(!1),i=Object(V.a)(o,2),s=i[0],c=i[1];return r.a.createElement("div",{className:"added-parts__part text-white"},r.a.createElement("p",null,"Type: ".concat(t.type)),r.a.createElement("p",null,"Function: ".concat(t.function)),r.a.createElement("p",null,"Notes: ".concat(t.notes)),r.a.createElement("p",null,"Rest probability: ".concat(t.restProbability,"%")),r.a.createElement("button",{className:"btn btn-outline",onClick:function(){c(!0);var e=a.current.contextTime(),n=t.part.map((function(e){return e.note=function(e){if("number"===typeof e)return e;if(""===e)return-100;console.log(e);var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(e.slice(0,e.length-1)),a=24+12*(+e[e.length-1]-1)+t;return console.log(a),a}(e.note),e.dur=e.dur,e})),r=!0,o=!1,i=void 0;try{for(var s,d=n[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){var l=s.value;a.current.playChordAt(e,260,[l.note],3*l.dur),e+=3*l.dur}}catch(h){o=!0,i=h}finally{try{r||null==d.return||d.return()}finally{if(o)throw i}}}},"Play"),s&&r.a.createElement("button",{onClick:function(){a.current.cancelQueue()},className:"btn btn-outline"},"Stop"),r.a.createElement(z.a,{ref:a,appElementName:"root",instruments:[3,260]}))}function X(e){var t=e.partOptionsArr,a=Object(n.useRef)(null),o=Object(n.useState)([]),i=Object(V.a)(o,2),s=i[0],c=i[1],d=function(){var e=t.map((function(e){return e.part.map((function(e){return e.note=function(e){if("number"===typeof e)return e;if(""===e)return-100;console.log(e);var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(e.slice(0,e.length-1)),a=24+12*(+e[e.length-1]-1)+t;return console.log(a),a}(e.note),e.dur=e.dur,e}))}));c(e)};Object(n.useEffect)((function(){d()}),[t]);return r.a.createElement("div",{className:"part-editor__added-parts mb-20 mt-20"},r.a.createElement("div",null,s.length>1&&r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){s.forEach((function(e){!function(e){var t=a.current.contextTime(),n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value;a.current.playChordAt(t,260,[c.note],2*c.dur),t+=c.dur}}catch(d){r=!0,o=d}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}(e)}))}},"Play all"),r.a.createElement("button",{onClick:function(){return a.current.cancelQueue()}},"Stop all")),r.a.createElement("div",{style:{display:"none",marginBottom:"20px"}},r.a.createElement(z.a,{ref:a,appElementName:"root",instruments:[3,260]}))),t.map((function(e,t){return r.a.createElement(K,{key:t,partOptions:e})})))}var Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={partOptions:{type:"soprano",function:"solo",notes:"often",restProbability:20},fileLink:null,addedPartsHeaders:[]},a.fileEditor=new H,a.isFile=!1,a.types=W,a.function=_,a.notes=Q,a.handleSelectorsChange=a.handleSelectorsChange.bind(Object(u.a)(a)),a.addPart=a.addPart.bind(Object(u.a)(a)),a.generateMidi=a.generateMidi.bind(Object(u.a)(a)),a.createNewFile=a.createNewFile.bind(Object(u.a)(a)),a.fileDidDownloaded=a.fileDidDownloaded.bind(Object(u.a)(a)),a}return Object(C.a)(t,e),Object(d.a)(t,[{key:"handleSelectorsChange",value:function(e){var t=JSON.parse(JSON.stringify(this.state.partOptions));t[e.target.name]=e.target.value,console.log(e.target.value),this.setState({partOptions:t})}},{key:"createNewFile",value:function(){var e=this.props.chords.map((function(e){return E(e)})).map((function(e){return p(e[0],0,e[1])}));this.fileEditor.createNewFile(e)}},{key:"addPart",value:function(){this.fileEditor.midiCreator||this.createNewFile(),this.fileEditor.partOptions=this.state.partOptions;var e=this.fileEditor.addNewPart();console.log(e);var t=this.state.partOptions;t.part=e,this.setState({addedPartsHeaders:[].concat(Object(m.a)(this.state.addedPartsHeaders),[t])})}},{key:"fileDidDownloaded",value:function(){this.props.setChords(null,!1),this.setState({fileLink:null,addedPartsHeaders:[]})}},{key:"generateMidi",value:function(){null!==this.fileEditor.midiCreator?null===this.state.fileLink?(this.fileEditor.generateMidi(),this.setState({fileLink:r.a.createElement("a",{href:this.fileEditor.getURI()},r.a.createElement(g,{class:"btn btn-big",handleClick:this.fileDidDownloaded,text:"Download file"}))}),this.createNewFile()):console.log("file already generated!"):console.log("add a part !")}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"App-chord-editor"},r.a.createElement("h3",null,"Part Editor"),r.a.createElement(R,{name:"type",id:"part-type",options:this.types,handleChange:this.handleSelectorsChange}),r.a.createElement(R,{name:"function",id:"part-function",options:this.function,handleChange:this.handleSelectorsChange}),r.a.createElement(R,{name:"notes",id:"part-notes",options:this.notes,handleChange:this.handleSelectorsChange}),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 0"}},r.a.createElement("label",{className:"label text-white",htmlFor:"restProbability"},"Rest probability: ",this.state.partOptions.restProbability,"%"),r.a.createElement("input",{id:"restProbability",className:"input",value:this.state.partOptions.restProbability,type:"range",min:"0",max:"100",onChange:this.handleSelectorsChange,name:"restProbability"})),r.a.createElement(g,{class:"btn btn-big",handleClick:this.addPart,text:"Add a part in file"}),r.a.createElement(X,{partOptionsArr:this.state.addedPartsHeaders}),r.a.createElement(g,{class:"btn btn-big mb-20",handleClick:this.generateMidi,text:"Generate file"}),this.state.fileLink)}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).chords=[],a.state={chordsToAdd:a.chords,isChordsSet:!1},a.setChords=a.setChords.bind(Object(u.a)(a)),a}return Object(C.a)(t,e),Object(d.a)(t,[{key:"setChords",value:function(e,t){this.setState({chordsToAdd:e,isChordsSet:t})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"main-window"},r.a.createElement(x,{setChords:this.setChords,chords:this.chords}),this.state.isChordsSet?r.a.createElement(Y,{setChords:this.setChords,chords:this.state.chordsToAdd}):null))}}]),t}(n.Component);function ee(){return r.a.createElement("footer",{className:"App-footer text-white mb-20"},r.a.createElement("span",null,"Petr Marchanka ",r.a.createElement("a",{href:"https://www.facebook.com/piatro.marchanka"},"FaceBook")," ",r.a.createElement("a",{href:"https://github.com/PyatroMarchanka"},"Github")," 2020"))}var te=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement(Z,null),r.a.createElement(ee,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.1330966e.chunk.js.map